{
  "OutputDir": "_news",
  "Title": "Transitioning to new Extensions AI IEmbeddingGenerator interface",
  "FeedUrl": "https://devblogs.microsoft.com/semantic-kernel/feed/",
  "Link": "https://devblogs.microsoft.com/semantic-kernel/transitioning-to-new-iembeddinggenerator-interface/",
  "Author": "Roger Barreto",
  "ProcessedDate": "2025-08-05 07:58:47",
  "EnhancedContent": "[![Transitioning from ITextEmbeddingGenerationService to IEmbeddingGenerator](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsAQMAAABDsxw2AAAAA1BMVEXW1taWrGEgAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAIklEQVRoge3BMQEAAADCoPVPbQo/oAAAAAAAAAAAAAAAeBkttAABG9R7kwAAAABJRU5ErkJggg==)](https://devblogs.microsoft.com/semantic-kernel/wp-content/uploads/sites/78/2025/05/fdc3edd7-fc8b-4e85-a664-c118dd1e0b43.png)\n\nAs Semantic Kernel shifts its foundational abstractions to Microsoft.Extensions.AI, we are obsoleting and moving away from our experimental embeddings interfaces to the new standardized abstractions that provide a more consistent and powerful way to work with AI services across the .NET ecosystem.\n\n## The Evolution of Embedding Generation in Semantic Kernel\n\nSemantic Kernel has always aimed to provide a unified way to interact with AI services, including embedding generation. Our initial approach used the `ITextEmbeddingGenerationService` interface, which served us well during the experimental phase. However, as the AI landscape has matured, so have our abstractions.\n\nWith Microsoft.Extensions.AI now generally available (no longer in preview), we’re standardizing on the more robust `IEmbeddingGenerator<string, Embedding<float>>` interface, which offers several advantages over our previous approach.\n\n## Why Make the Change?\n\nThe transition to `Microsoft.Extensions.AI.IEmbeddingGenerator` brings several benefits:\n\n1. **Standardization**: Aligns with broader .NET ecosystem patterns and Microsoft.Extensions conventions\n2. **Type Safety**: Stronger typing with the generic `Embedding<float>`\nreturn type\n3. **Flexibility**: Support for different input types and embedding formats\n4. **Consistency**: Uniform approach across different AI service providers\n5. **Integration**: Seamless integration with other Microsoft.Extensions libraries\n\n## Code Comparison: Before and After\n\nLet’s look at how this transition affects your code:\n\n### Before: Using ITextEmbeddingGenerationService\n\n```csharp using Microsoft.SemanticKernel; using Microsoft.SemanticKernel.Embeddings;\n\n// Create a kernel builder var builder = Kernel.CreateBuilder();\n\n// Add the OpenAI embedding service builder.Services.AddOpenAITextEmbeddingGeneration( modelId: \"text-embedding-ada-002\", apiKey: \"your-api-key\");\n\n// Build the kernel var kernel = builder.Build();\n\n// Get the embedding service from the kernel var embeddingService = kernel.GetRequiredService<ITextEmbeddingGenerationService>();\n\n// Generate embeddings var text = \"Semantic Kernel is a lightweight SDK that integrates Large Language Models (LLMs) with conventional programming languages.\"; var embedding = await embeddingService.GenerateEmbeddingAsync(text);\n\n// Work with the embedding vector Console.WriteLine($\"Generated embedding with {embedding.Length} dimensions\");\n\n```\n\n### After: Using IEmbeddingGenerator\n\n```csharp using Microsoft.Extensions.AI; using Microsoft.SemanticKernel;\n\n// Create a kernel builder var builder = Kernel.CreateBuilder();\n\n// Add the OpenAI embedding generator builder.Services.AddOpenAIEmbeddingGenerator( modelId: \"text-embedding-ada-002\", apiKey: \"your-api-key\");\n\n// Build the kernel var kernel = builder.Build();\n\n// Get the embedding generator from the kernel var embeddingGenerator = kernel.GetRequiredService<IEmbeddingGenerator<string, Embedding<float>>>();\n\n// Generate embeddings var text = \"Semantic Kernel is a lightweight SDK that integrates Large Language Models (LLMs) with conventional programming languages.\"; var embedding = await embeddingGenerator.GenerateAsync(text);\n\n// Work with the embedding vector Console.WriteLine($\"Generated embedding with {embedding.Vector.Length} dimensions\");\n\n```\n\n## Key Differences\n\n1. **Method Names**: `GenerateEmbeddingsAsync`\nbecomes `GenerateAsync`\n2. **Return Type**: Instead of returning `IList<ReadOnlyMemory<float>>`\n, the new interface returns `GeneratedEmbeddings<Embedding<float>>`\n3. **Options**: The new interface accepts an optional `EmbeddingGenerationOptions`\nparameter for more control\n4. **Dimensions**: Setting dimensions is now handled through options rather than attributes\n\n## Migrating Your Code\n\nIf you’re currently using `ITextEmbeddingGenerationService` , here’s how to migrate:\n\n1. Update your package references to include the latest Semantic Kernel packages\n2. Replace `ITextEmbeddingGenerationService`\nwith `IEmbeddingGenerator<string, Embedding<float>>`\n3. Update service registration to use the new embedding generator classes (e.g., `OpenAIEmbeddingGenerator`\ninstead of `OpenAITextEmbeddingGenerationService` )\n4. Update method calls from `GenerateEmbeddingsAsync`\nto `GenerateAsync`\n5. Update how you access the embedding vectors (now through the `.Vector`\nproperty)\n\n## Transitional Support\n\nTo ease the transition, we’ve provided extension methods that allow you to convert between the old and new interfaces:\n\n```csharp using Microsoft.Extensions.AI; using Microsoft.SemanticKernel; using Microsoft.SemanticKernel.Embeddings;\n\n// Create a kernel with both old and new embedding services var builder = Kernel.CreateBuilder();\n\n// Add the old OpenAI embedding service builder.Services.AddOpenAITextEmbeddingGeneration( modelId: \"text-embedding-ada-002\", apiKey: \"your-api-key\");\n\n// Build the kernel var kernel = builder.Build();\n\n// Get the old embedding service var oldEmbeddingService = kernel.GetRequiredService<ITextEmbeddingGenerationService>();\n\n// Convert from old to new using extension method IEmbeddingGenerator<string, Embedding<float>> newGenerator = oldEmbeddingService.AsEmbeddingGenerator();\n\n// Use the new generator var newEmbedding = await newGenerator.GenerateAsync(\"Converting from old to new\"); Console.WriteLine($\"Generated embedding with {newEmbedding.Vector.Length} dimensions\");\n\n```\n\n## Connector Support\n\nAll our connectors have been updated to support the new interface:\n\n- OpenAI and Azure OpenAI\n- Google AI and Vertex AI\n- Amazon Bedrock\n- Hugging Face\n- MistralAI\n- And more…\n\nEach connector now provides both the legacy service (marked as obsolete) and the new generator implementation.\n\n## Conclusion\n\nThe transition to Microsoft.Extensions.AI represents an important step in the maturation of Semantic Kernel. By aligning with broader .NET ecosystem patterns, we’re making it easier for developers to integrate AI capabilities into their applications with a consistent, type-safe approach.\n\nWe encourage all Semantic Kernel users to migrate to the new `IEmbeddingGenerator<string, Embedding<float>>` interface as soon as possible. The old interface will continue to work for now but is marked as obsolete and will be removed in a future release.\n\nFor more information about Microsoft.Extensions.AI, check out the [official announcement](https://devblogs.microsoft.com/semantic-kernel/microsoft-extensions-ai-simplifying-ai-integration-for-net-partners/).",
  "Tags": [
    ".NET",
    "AI",
    "Announcement",
    "C#",
    "Ecosystem",
    "Embeddings",
    "Microsoft Semantic Kernel",
    "RAG",
    "Samples",
    "Semantic Kernel",
    "Vector Database"
  ],
  "PubDate": "2025-05-21T14:46:46+00:00",
  "Description": "As Semantic Kernel shifts its foundational abstractions to Microsoft.Extensions.AI, we are obsoleting and moving away from our experimental embeddings interfaces to the new standardized abstractions that provide a more consistent and powerful way to work with AI services across the .NET ecosystem. The Evolution of Embedding Generation in Semantic Kernel Semantic Kernel has always aimed […]\n\nThe post [Transitioning to new Extensions AI IEmbeddingGenerator interface](https://devblogs.microsoft.com/semantic-kernel/transitioning-to-new-iembeddinggenerator-interface/) appeared first on [Semantic Kernel](https://devblogs.microsoft.com/semantic-kernel).",
  "FeedLevelAuthor": "Semantic Kernel",
  "FeedName": "Microsoft DevBlog"
}
