{
  "FeedLevelAuthor": "Azure SDK Blog",
  "Author": "Kristen Womack, Jeff Omhover",
  "FeedName": "Microsoft Azure SDK Blog",
  "PubDate": "2025-11-19T17:22:31+00:00",
  "ProcessedDate": "2025-11-19 18:03:14",
  "Description": "This post shares how to work with the new Azure Developer CLI (`azd`) agents extension.\n\nThe post [Announcing the azd AI agent extension: Publish Microsoft Foundry agents directly from your development environment](https://devblogs.microsoft.com/azure-sdk/azure-developer-cli-foundry-agent-extension/) appeared first on [Azure SDK Blog](https://devblogs.microsoft.com/azure-sdk).",
  "Link": "https://devblogs.microsoft.com/azure-sdk/azure-developer-cli-foundry-agent-extension/",
  "Title": "Announcing the azd AI agent extension: Publish Microsoft Foundry agents directly from your development environment",
  "Tags": [
    ".NET",
    "AI agent",
    "Azure SDK",
    "azure-developer-cli",
    "Codespaces",
    "Docker",
    "java",
    "javascript",
    "kubernetes",
    "Microsoft Foundry",
    "python",
    "typescript",
    "VSCode"
  ],
  "EnhancedContent": "# Announcing the new azd AI agent extension: Publish Microsoft Foundry agents directly from your development environment\n\nIf you’ve ever built an AI agent, you know the real challenge is more than writing the code, it’s the complex dance of provisioning resources, managing models, and securely deploying everything to the cloud. We thought, what if that entire workflow could be simplified?\n\nThat’s why our team has been working on a new extension for the Azure Developer CLI (`azd` ), which we’re excited to announce at Ignite 2025. Our goal was to simplify the entire workflow. This new extension helps you build, provision, and publish AI agents on Microsoft Foundry, bridging the gap between local development and cloud deployment. It brings everything you need into your terminal and code editor, letting you go from an agent idea on your machine to a running, shareable agent in Azure with minimal friction.\n\nWith this extension, agents become a part of your toolchain. You get the power of Foundry’s advanced features (from multi-model reasoning to integrated evaluations) combined with the developer-first workflow of `azd` . This extension empowers you to rapidly iterate on AI agents locally and reliably push them to the cloud for at-scale use, all using a consistent set of tools.\n\n## What is the new `azd`\nAI agent extension?\n\nThe new `azd ai agent` extension adds agent-centric workflows directly into the Azure Developer CLI. It integrates Foundry projects, model deployments, and agent definitions leveraging the `azd` concepts, such as `azd init` and `azd up` . When paired with a template that includes Infrastructure as Code (IaC) or when you bring your own IaC, this extension automates the process of provisioning Azure resources, configuring model deployments, and publishing agents.\n\n![azd ai agent extension workflow](https://devblogs.microsoft.com/azure-sdk/wp-content/uploads/sites/58/2025/11/11-19-azd-ai-agent-extension.png)\n\nThese new features handle three critical aspects of agent development:\n\n- **Project scaffolding**: Initialize a new project with an agent-ready starter template that includes pre-configured IaC files you need to get started, then initializes agents from a manifest file.\n- **Resource provisioning**: After you’ve initialized your IaC and agents, then the extension will provision and configure Foundry projects, deploy models with proper SKUs and capacity settings, and establish required connections.\n- **Agent deployment**: Package your agent, push container images to Azure Container Registry, and deploy agents to Foundry where they become shareable, production-ready services.\n\nThe result? You can go from an empty folder to a deployed, callable agent endpoint in minutes instead of hours. Ready to see how?\n\n## Key features\n\nThe new `azd ai agent` extension provides several powerful features that accelerate your agent development:\n\n- **Simplify agent project initialization**: Use starter templates that include the necessary IaC to scaffold complete projects. `azd`\ncreates the necessary directory structure, IaC files, and configuration so you can start building immediately.\n- **Declarative configuration**: Define your entire agent stack—services, resources, and model deployments—in a declarative `azure.yaml`\nfile. This approach makes your agent infrastructure version-controlled, repeatable, and easy to share across teams.\n- **Unified provisioning and deployment**: Use the familiar `azd up`\ncommand to provision infrastructure and deploy your agent. `azd` handles the container builds, registry pushes, resource provisioning, and agent deployment automatically.\n- **Agent definition management**: Pull agent definitions from GitHub repositories or local paths. The `azd ai agent init`\ncommand analyzes the definition, updates your project configuration, and maps parameters to environment variables automatically.\n- **Secure by default**: `azd`\nhandles, with IaC files in templates, the boilerplate security configuration for you. It automatically configures your agent with a managed identity for secure access to Azure resources, following recommended practices without manual setup.\n\n## Getting started\n\nLet’s walk through creating and deploying your first Foundry agent using the new AI agent features in `azd` .\n\n### Prerequisites\n\nBefore you begin, ensure you have:\n\n- [Azure Developer CLI (`azd`\n)](https://learn.microsoft.com/azure/developer/azure-developer-cli/install-azd) (version 1.21.3 or later) installed and authenticated (`azd auth login` ).\n- The `azd ai agent`\nextension installed (`azd extension install azure.ai.agents` ); and, if you don’t have the extension installed, when you initialize the starter template or run `azd ai agent` the extension is installed automatically.\n- An Azure subscription with permissions to create resource groups and Foundry resources. Sign up for a free account at [azure.com/free](https://azure.com/free) if you don’t have one.\n- Azure CLI (`az`\n) installed for certain operations.\n\n### Initialize with a Foundry configuration template\n\nThis extension works with an azd template and is also able to connect to an existing project using `azd ai agent init --project-id [resourceID]` .\n\nIn this post, we’ll walk through the approach of starting with a template. It’s a basic template for Foundry Agent Service to get started quickly.\n\n- **Basic Setup** (`azd-ai-starter-basic`\n): Optimized for speed and simplicity with all essential resources\n\nStart by initializing a new project with the Basic Setup template. In an empty folder, run:\n\n```bash azd init -t Azure-Samples/azd-ai-starter-basic ```\n\nWhen prompted, provide an environment name for your agent project (for example, “my-agent-project”).\n\nThe `azd init` process:\n\n- Clones the starter template files into your project\n- Creates the directory structure with `infra/`\n(IaC files) and `src/` folders\n- Generates an `azure.yaml`\nconfiguration file\n- Sets up `.azure/<env>/.env`\nfor environment-specific variables\n\n### Review your project structure\n\nThe initialized template includes these key files:\n\n```text ├── .azure/ # Environment-specific settings (.env) ├── infra/ # Bicep files for Azure infrastructure └── azure.yaml # Project configuration ```\n\nOpen the `azure.yaml` file to see how your agent project is configured:\n\n```yaml\n# yaml-language-server: $schema=https://raw.githubusercontent.com/Azure/azure-dev/main/schemas/v1.0/azure.yaml.json\nname: my-agent-project\n\ninfra: provider: bicep path: ./infra\n\nrequiredVersions: extensions:\n# the azd ai agent extension is required for this template\n\"azure.ai.agents\": latest ```\n\nThis declarative configuration defines your agent service and the Azure AI resources it needs, including model deployments. To read more about the `azure.yaml` schema, see the [Azure Developer CLI documentation](https://learn.microsoft.com/azure/developer/azure-developer-cli/azd-schema) and azd environment variables that the agent relies on, such as `AZURE_AI_ACCOUNT_NAME` and `AZURE_AI_PROJECT_NAME` , see the [azd environment variables documentation](https://learn.microsoft.com/azure/developer/azure-developer-cli/manage-environment-variables?tabs=bash).\n\n### Initialize your agent definition\n\nThe starter template provides the project structure, but you need to add a specific agent definition. Agent definitions describe your agent’s behavior, tools, and capabilities. You can find example definitions in the [Agent Framework repository](https://github.com/microsoft/agent-framework).\n\nFor this walkthrough, use an agent definition manifest:\n\n```bash azd ai agent init -m <agent-definition-url> ```\n\nAs an example, you can use the following URL for a simple calculator agent:\n\n```bash azd ai agent init -m https://github.com/azure-ai-foundry/foundry-samples/blob/main/samples/microsoft/python/getting-started-agents/hosted-agents/calculator-agent/agent.yaml ```\n\nHere’s what happens when you run `azd ai agent init` :\n\n- Downloads the agent definition YAML file into your project’s `src/`\ndirectory.\n- Analyzes the agent definition to understand its requirements.\n- Updates `azure.yaml`\nwith the corresponding services and configurations.\n- Maps agent parameters to environment variables.\n\nAfter running `azd ai agent init` , review the updated `azure.yaml` and `.env` files to see how your agent is configured. The `azure.yaml` file looks like:\n\n```yaml requiredVersions: extensions: azure.ai.agents: latest azure.ai.agents: latest name: my-agent-project services: CalculatorAgent: project: src/CalculatorAgent host: azure.ai.agent language: docker docker: remoteBuild: true config: container: resources: cpu: \"1\" memory: 2Gi scale: maxReplicas: 3 minReplicas: 1 deployments:\n- model:\nformat: OpenAI name: gpt-4o-mini version: \"2024-07-18\" name: gpt-4o-mini sku: capacity: 10 name: GlobalStandard ```\n\n### Provision and deploy your agent\n\nNow with your project is configured, you can deploy everything to Azure with one command:\n\n```bash azd up ```\n\nThis single command orchestrates the entire deployment workflow, from infrastructure to a live agent endpoint. Here’s what happens step-by-step:\n\n1. **Provisions Infrastructure**: Creates the Foundry account, project, and all necessary Azure resources defined in the Bicep files.\n- Pre-provision hooks inspect the agents and their dependencies, models, and other resources, then populates environment variables so that Bicep knows what to provision, including:\n- `AI_PROJECT_DEPLOYMENTS`\n(JSON): Specification of the models to deploy.\n- `AI_PROJECT_CONNECTIONS`\n(JSON): Specification of the connections to create.\n- `AI_PROJECT_DEPENDENT_RESOURCES`\n(JSON): Specification of the dependent resources.\n- `ENABLE_HOSTED_AGENTS`\n(boolean): Whether hosted agents need to be provisioned (with an ACR and CapHost).\n2. **Deploys Models**: Provisions the model deployments specified in `azure.yaml`\n(for example, GPT-4o-mini with the configured SKU and capacity).\n3. **Builds & Pushes Container**: If the agent has custom code, `azd`\npackages it into a container image and pushes it to your Azure Container Registry.\n4. **Publishes Agent**: Creates an Agent Application in Foundry and deploys your agent as a live, callable service.\n\nThe entire process typically completes in 5-10 minutes for a new project. When `azd up` finishes, there are links in the terminal output to the agent playground portal and the agent endpoint.\n\nThe agent is now live and ready to use. From an empty folder to a running agent, all with just three commands:\n\n1. `azd init -t Azure-Samples/azd-ai-starter-basic`\n2. `azd ai agent init -manifest <agent-definition-url>`\n3. `azd up`\n\n### Test your agent in Foundry\n\nNow for the fun part—let’s make sure your agent is working.\n\n1. Follow the link in the terminal output. (Alternatively, open the [Foundry portal](https://ai.azure.com) and navigate to the project provisioned by `azd`\nwhich is the project name was displayed in the `azd up` output).\n2. Open the **Agents** section to see your deployed agent.\n3. Launch the agent in the playground and send a test query, for example: “Summarize your capabilities.”\n\nIf your agent responds successfully, congratulations! You’ve just deployed a working Foundry agent from your local development environment.\n\n## How it works: Under the hood\n\nSo, what’s happening behind the scenes when you run these `azd` commands? Let’s break down the how this transforms your local project into a cloud-native AI agent. The process follows a clear, logical flow from scaffolding to a secure, running service.\n\n### 1. Project scaffolding and configuration\n\nWhen you run `azd init` with a Foundry template, `azd` sets up a complete, well-structured project. The template includes:\n\n- **Bicep infrastructure files** in the `infra/`\ndirectory that define all the necessary Foundry resources, model deployments, and networking.\n- **An `azure.yaml` file** that provides a declarative map of your services, resources, and dependencies.\n- **Environment configurations** in `.azure/<env>/.env`\nthat store subscription IDs, resource names, and endpoints.\n- **An `agent.yaml` file** in the `src/`\ndirectory that stores the environment variables the agent needs. For example:\n\n```yaml kind: hosted name: CalculatorAgent description: This LangGraph agent can perform arithmetic calculations such as addition, subtraction, multiplication, and division. metadata: authors:\n- migu\nexample:\n- content: What is the size of France in square miles, divided by 27?\nrole: user tags:\n- example\n- learning\nprotocols:\n- protocol: responses\nversion: v1 environment_variables:\n- name: AZURE_OPENAI_ENDPOINT\nvalue: ${AZURE_OPENAI_ENDPOINT}\n- name: OPENAI_API_VERSION\nvalue: 2025-03-01-preview ```\n\nNext, when you run `azd ai agent init` , the CLI:\n\n- Fetches the agent definition from the URL or local path you provided.\n- Parses the YAML to understand the agent’s requirements (models, tools, connections).\n- Updates `azure.yaml`\nto include the agent as a service.\n- Creates or updates the environment variables needed for the agent’s runtime.\n\n### 2. Resource provisioning\n\nThe `azd up` command triggers all infrastructure provisioning through Azure Resource Manager. Based on your `azure.yaml` and Bicep files, `azd` :\n\n- Compiles your Bicep templates into ARM templates.\n- Creates the resource group in your specified Azure region.\n- Provisions the Foundry account and project.\n- Deploys the specified models to the project with your configured SKUs and capacity.\n\nFor example, if your `azure.yaml` specifies `gpt-4o-mini` with version `2024-07-18` , `azd` creates that exact model deployment in your Foundry project. This declarative approach ensures consistency between environments, so your development, staging, and production deployments use identical configurations.\n\n### 3. Container build and publishing\n\nFor agents with custom code (for custom tools, integrations, or business logic), `azd` handles the complete containerization workflow:\n\n1. **Build**: Packages your agent code into a Docker container image using the configuration from your project.\n2. **Push**: Authenticates to Azure Container Registry and pushes the image with a unique tag.\n3. **Deploy**: Creates an agent in the Foundry and a deployment that runs your container.\n\nYour agent is deployed to the Foundry hosted agent service, which provides automatic scaling, managed compute, and integrated monitoring. The Agent Application becomes the stable, versionable interface for your agent, with a unique name and endpoint.\n\n### 4. Identity and security\n\nFinally, `azd` automatically configures secure access patterns with IaC so you don’t have to manage credentials manually:\n\n- **Managed Identity**: Your agent uses the Foundry project’s system-assigned managed identity for authenticating to other Azure resources.\n- **Role Assignments**: Required permissions are granted automatically (for example, giving your agent access to Azure AI services, storage, or databases) with the starter template.\n- **Endpoint Security**: Agent endpoints use Azure AD authentication by default to ensure only authorized users or applications can call your agent.\n\nThese security configurations in the template follow Azure recommended practices and work out of the box, giving you a secure foundation from the start.\n\n## Use cases and scenarios\n\nNow that you have a solid understanding of how these `azd` features work, let’s explore how you can use them to build different kinds of agents. For complete, ready-to-deploy examples, check out:\n\n- [Python hosted agents samples](https://aka.ms/hosted-agent-samples/python)\n- [.NET hosted agents samples](https://aka.ms/hosted-agent-samples/csharp).\n\n### Building conversational AI assistants\n\nCreate intelligent customer service agents that understand context, access knowledge bases, and provide personalized responses. With `azd` , you can:\n\n- Rapidly deploy multiple agent variations for A/B testing\n- Integrate agents with Azure AI Search for retrieval-augmented generation\n- Connect to business systems and APIs through custom tools\n- Version and roll back agent deployments as you iterate\n\n### Data analysis and insights agents\n\nBuild agents that analyze data, generate visualizations, and provide insights. With `azd` , you can:\n\n- Provision agents with access to Azure SQL Database or Cosmos DB.\n- Deploy specialized models for quantitative analysis.\n- Create agents that use code interpreter tools for calculations.\n- Publish agents to help learn French.\n\n### Multi-agent orchestration\n\nDevelop systems where multiple specialized agents collaborate on complex tasks:\n\n- Deploy a coordinator agent that routes requests to specialist agents\n- Provision each agent with different model configurations for optimal performance\n- Use the declarative `azure.yaml`\nto define agent relationships and dependencies\n- Scale individual agents independently based on workload\n\n### Enterprise agent deployment\n\nStandardize agent development and deployment across your organization:\n\n- Create reusable agent blueprints that encode your organization’s best practices\n- Publish agent templates to internal catalogs for teams to consume\n- Enforce consistent security, compliance, and monitoring configurations\n- Automate agent deployment in CI/CD pipelines using `azd provision`\nand `azd deploy`\n\n## Advanced configuration\n\nOnce you’re comfortable with the basic workflow, you can start customizing your deployments to meet more advanced requirements.\n\n### Customizing model deployments\n\nYour `azure.yaml` file gives you full control over which models get deployed. To add or change a model, edit the file:\n\n```yaml services: CalculatorAgent: project: src/CalculatorAgent host: azure.ai.agent language: docker docker: remoteBuild: true config: container: resources: cpu: \"1\" memory: 2Gi scale: maxReplicas: 3 minReplicas: 1 deployments:\n- model:\nformat: OpenAI name: gpt-4o-mini version: \"2024-07-18\" name: gpt-4o-mini sku: capacity: 10 name: GlobalStandard ```\n\nThis configuration provisions multiple models, enabling your agent to use different models for different tasks (for example, a larger model for complex reasoning and a smaller one for simple queries). When you next run `azd up` , it automatically deploys the new model and update your project.\n\n### Managing environment variables\n\nKey environment variables `azd` sets or uses:\n\n| Variable | Purpose | | --- | --- | | `AZURE_SUBSCRIPTION_ID` | Target subscription for resources. | | `AZURE_RESOURCE_GROUP` | Resource group hosting the AI project. | | `AZURE_LOCATION` | Azure region (must support chosen models). | | `AZURE_AI_PROJECT_ID` | The full Azure resource ID of your project. | | `AZURE_AI_PROJECT_NAME` | Project hosting the agent. | | `AZURE_AI_PROJECT_ENDPOINT` | Endpoint for agent management and runtime calls. | | `AZURE_CONTAINER_REGISTRY_ENDPOINT` | Endpoint to build and push container images |\n\nThese variables are stored in `.azure/<environment-name>/.env` and can be customized for each of your environments (for example, dev, test, and prod).\n\n## Get started today\n\nThe new `azd ai agent` capabilities are available in public preview as of Microsoft Ignite 2025. While it’s an early release, it’s ready for you to try today, and we’re actively evolving these features based on your feedback.\n\n### Getting involved\n\nTo get started:\n\n- **Explore sample agents**: Check out the [Agent Framework repository](https://github.com/microsoft/agent-framework) for [.NET agents](https://github.com/microsoft/agent-framework/tree/main/dotnet/samples) and [Python agents](https://github.com/microsoft/agent-framework/tree/main/python/samples) you can deploy with `azd ai agent init`\n.\n- **Join the community**: Share your experiences and ask questions in the [Azure Developer CLI GitHub discussions](https://github.com/Azure/azure-dev/discussions).\n- **Report issues and suggest features**: We’re eager for your feedback! File issues or suggestions in the [Azure/azure-dev repository](https://github.com/Azure/azure-dev/issues) (tag them with `ext-agents`\n).\n- **Review documentation**: Visit the [Foundry documentation](https://learn.microsoft.com/azure/ai-foundry/) for comprehensive guides on agent development.\n\nYour feedback shapes these priorities, so we encourage you to share your ideas and use cases.\n\n## Start building intelligent agents today\n\nWe believe this new extension will change how you develop agents by letting you focus on what’s important: building intelligent solutions. We handled the complexity so you can get back to creating. With Foundry’s advanced capabilities and `azd` ‘s developer-friendly workflow, you have everything you need to create, iterate, and deploy production-grade AI agents.\n\n[Install the Azure Developer CLI](https://learn.microsoft.com/azure/developer/azure-developer-cli/install-azd) today and start building the next generation of AI agents.\n\n## Additional resources\n\n- [Azure Developer CLI documentation](https://learn.microsoft.com/azure/developer/azure-developer-cli/)\n- [Foundry documentation](https://learn.microsoft.com/azure/ai-foundry/)\n- [Agent Framework repository (samples and tools)](https://github.com/microsoft/agent-framework)\n- [Azure Developer CLI GitHub repository](https://github.com/Azure/azure-dev)\n- [AI Foundry starter template](https://github.com/Azure-Samples/azd-ai-starter-basic)\n\nHappy building!",
  "FeedUrl": "https://devblogs.microsoft.com/azure-sdk/feed/",
  "OutputDir": "_news"
}
