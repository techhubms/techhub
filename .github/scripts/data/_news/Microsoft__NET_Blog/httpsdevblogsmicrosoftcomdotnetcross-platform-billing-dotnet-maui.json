{
  "ProcessedDate": "2025-12-09 19:02:51",
  "FeedName": "Microsoft .NET Blog",
  "Author": "Gerald Versluis",
  "Title": "Implementing Cross-Platform In-App Billing in .NET MAUI Applications",
  "Description": "Learn how to implement in-app purchases in your .NET MAUI apps with our new cross-platform billing sample for Android, iOS, Mac Catalyst, and Windows.\n\nThe post [Implementing Cross-Platform In-App Billing in .NET MAUI Applications](https://devblogs.microsoft.com/dotnet/cross-platform-billing-dotnet-maui/) appeared first on [.NET Blog](https://devblogs.microsoft.com/dotnet).",
  "PubDate": "2025-12-09T18:05:00+00:00",
  "OutputDir": "_news",
  "FeedLevelAuthor": ".NET Blog",
  "FeedUrl": "https://devblogs.microsoft.com/dotnet/feed/",
  "Tags": [
    ".NET",
    ".NET MAUI",
    "billing",
    "Google Play Billing",
    "in-app purchases",
    "Microsoft Store",
    "StoreKit"
  ],
  "Link": "https://devblogs.microsoft.com/dotnet/cross-platform-billing-dotnet-maui/",
  "EnhancedContent": "With the [discontinuation of the popular InAppBillingPlugin](https://github.com/jamesmontemagno/InAppBillingPlugin), many .NET MAUI developers have been looking for guidance on implementing in-app purchases in their applications. Today, we’re sharing a comprehensive sample that demonstrates how to implement cross-platform billing for Android, iOS, Mac Catalyst, and Windows using platform-specific APIs with a unified interface.\n\n## The BillingService Sample\n\nOur new [BillingService sample](https://learn.microsoft.com/samples/dotnet/maui-samples/cross-platform-billing-service/) shows you how to integrate platform-specific billing systems into your .NET MAUI applications while maintaining clean, maintainable code through dependency injection and the MVVM pattern. The sample includes complete implementations for:\n\n- **Android**: Google Play Billing Client v7\n- **iOS & Mac Catalyst**: StoreKit\n- **Windows**: Microsoft Store APIs\n\n![BillingService Demo showing product listings with purchase buttons on Android](https://devblogs.microsoft.com/dotnet/wp-content/uploads/sites/10/2025/12/billing_demo.webp)\n\n## Architecture Overview\n\nThe sample demonstrates several important architectural patterns for cross-platform development:\n\n### Unified Interface\n\nAt the core of the implementation is a clean `IBillingService` interface that abstracts platform-specific billing operations:\n\n```csharp public interface IBillingService { Task<bool> InitializeAsync(); Task<IEnumerable<Product>> GetProductsAsync(); Task<PurchaseResult> PurchaseAsync(string productId); Task<bool> RestorePurchasesAsync(); bool IsProductOwned(string productId); } ```\n\n### Platform-Specific Implementations\n\nEach platform has its own implementation file using conditional compilation:\n\n- `BillingService.Android.cs`\n– Google Play Billing integration\n- `BillingService.iOS.cs`\n– StoreKit implementation (shared between iOS and Mac Catalyst)\n- `BillingService.Windows.cs`\n– Microsoft Store integration\n\nThe project file uses conditional compilation directives to include the appropriate implementation for each target platform, while iOS and Mac Catalyst share a single implementation since they both use identical StoreKit 1 APIs.\n\n### Dependency Injection\n\nThe billing service is registered in `MauiProgram.cs` and automatically resolves to the correct platform-specific implementation at runtime:\n\n```csharp builder.Services.AddSingleton<IBillingService, Services.BillingService>(); builder.Services.AddTransient<ProductsViewModel>(); ```\n\n## A Note on StoreKit Implementation\n\nThe current iOS and Mac Catalyst implementation uses StoreKit 1, which continues to work on all current iOS versions, including iOS 18, 26, and beyond. At WWDC 2024, Apple announced the deprecation of StoreKit 1 in favor of StoreKit 2, which offers enhanced features and modern Swift-first APIs with async/await support. While StoreKit 1 remains functional for existing implementations, Apple has indicated that future enhancements and new features will be exclusive to StoreKit 2.\n\nThis sample provides a production-ready implementation you can use in your apps today. We are still working on Swift interop for .NET and plan to update this sample once full StoreKit 2 support is available in .NET for iOS. The migration to StoreKit 2 will bring improvements like better transaction handling, enhanced subscription management, and modern async patterns, but your apps using StoreKit 1 will continue to function properly in the meantime.\n\n**Important**\n\nFor production applications, you should implement server-side purchase validation and receipt verification to ensure security and prevent fraud. This sample focuses on the client-side implementation patterns.\n\n## Getting Started\n\nTo explore the sample and see how each platform implements billing:\n\n1. Browse the complete source code in the [.NET MAUI samples repository](https://github.com/dotnet/maui-samples/tree/main/10.0/BillingService)\n2. Check out the [online samples browser](https://learn.microsoft.com/samples/dotnet/maui-samples/cross-platform-billing-service/) to see the sample in action\n3. Clone the repository and run the sample on your development machine\n\nThe sample includes detailed README documentation with platform-specific setup instructions for Google Play Console, App Store Connect, and Microsoft Partner Center.\n\n## Configuration Requirements\n\nBefore testing in-app purchases, you’ll need to configure products in each platform’s developer console:\n\n- **Android**: [Set up products in Google Play Console](https://developer.android.com/google/play/billing/getting-ready) and configure license testers\n- **iOS/Mac Catalyst**: [Create products in App Store Connect](https://developer.apple.com/help/app-store-connect/manage-in-app-purchases/create-in-app-purchases) and [set up sandbox tester accounts](https://developer.apple.com/help/app-store-connect/test-in-app-purchases/create-sandbox-apple-ids)\n- **Windows**: [Configure add-ons in Microsoft Partner Center](https://learn.microsoft.com/windows/uwp/publish/add-on-submissions) and associate your app with the Store\n\nEach platform has specific requirements for testing, and the sample documentation provides step-by-step guidance for each.\n\n## Learn More\n\nThe BillingService sample demonstrates patterns you can adapt for your own applications. Key takeaways include:\n\n- How to create a unified interface for platform-specific billing operations\n- Proper use of conditional compilation for platform-specific code\n- Integration with dependency injection and MVVM patterns\n- Error handling and user feedback for billing operations\n- Testing strategies for in-app purchases\n\nVisit the [.NET MAUI samples browser](https://learn.microsoft.com/samples/browse/?expanded=dotnet&amp;products=dotnet-maui) to explore this and other samples that help you build better cross-platform applications.\n\n## Resources\n\n- [BillingService Sample](https://github.com/dotnet/maui-samples/tree/main/10.0/BillingService) – Complete source code\n- [Google Play Billing Documentation](https://developer.android.com/google/play/billing)\n- [Apple StoreKit Documentation](https://developer.apple.com/storekit/)\n- [Microsoft Store In-App Purchases](https://learn.microsoft.com/windows/uwp/monetize/in-app-purchases-and-trials)\n- [.NET MAUI Documentation](https://learn.microsoft.com/dotnet/maui/)\n\nWe hope this sample helps you implement in-app purchases in your .NET MAUI applications! Share your feedback and questions in the comments below."
}
