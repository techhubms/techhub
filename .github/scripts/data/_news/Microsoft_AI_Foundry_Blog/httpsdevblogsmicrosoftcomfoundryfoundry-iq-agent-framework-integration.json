{
  "ProcessedDate": "2025-12-08 10:03:08",
  "Description": "Build enterprise-grade RAG agents with Foundry IQ Knowledge Bases in ~20 lines of Python. Learn how the Azure AI Search Context Provider brings intelligent, multi-hop retrieval to the Microsoft Agent Framework—no fragmented pipelines, just plug in the knowledge your agent needs.\n\nThe post [Foundry IQ in Microsoft Agent Framework](https://devblogs.microsoft.com/foundry/foundry-iq-agent-framework-integration/) appeared first on [Microsoft Foundry Blog](https://devblogs.microsoft.com/foundry).",
  "EnhancedContent": "## Executive Summary\n\n**~20 lines of Python. Enterprise-grade RAG. Powered by Foundry IQ.**\n\nThe Azure AI Search Context Provider in the Microsoft Agent Framework brings **Foundry IQ**—Microsoft’s intelligent knowledge layer—directly to your AI agents. Foundry IQ treats retrieval as a reasoning task, not just a keyword lookup or vector search, enabling agents to plan queries, follow chains of information, and synthesize answers across diverse sources.\n\n## The Problem with Traditional RAG\n\n**Traditional RAG puts a heavy tax on every project.** Every team rebuilds data connections, chunking logic, embeddings, routing, and permissions from scratch. It leaves organizations with fragmented, duplicated pipelines all trying to answer the same question: *what context does the model need to respond effectively?*\n\n**Foundry IQ shifts that work into Knowledge Bases.** Instead of wiring retrieval logic into every agent, you define a reusable Knowledge Base and connect. Behind the scenes, Foundry IQ handles indexing, vectorization, query planning, and multi-source routing.\n\nThe result: getting started feels like *“plug in the domain knowledge this agent should have”* rather than *“rebuild a RAG stack.”*\n\n## Quick Start\n\n**Prerequisites:** Azure AI Search service, Azure AI Foundry project, Python 3.10+. [See samples →](https://github.com/microsoft/agent-framework/tree/main/python/samples/getting_started/context_providers/azure_ai_search)\n\nInstall the package:\n\n```bash pip install agent-framework-azure-ai-search --pre ```\n\nBuild a RAG agent with Foundry IQ in ~20 lines. This example uses **agentic mode**, which leverages Foundry IQ Knowledge Bases for intelligent, multi-hop retrieval:\n\n```python import asyncio from agent_framework import ChatAgent from agent_framework.azure import AzureAIAgentClient, AzureAISearchContextProvider from azure.identity.aio import DefaultAzureCredential\n\nasync def main():\n# Use managed identity for secure, keyless authentication\ncredential = DefaultAzureCredential()\n\nasync with (\n# Connect to Foundry IQ Knowledge Base for agentic retrieval\nAzureAISearchContextProvider( endpoint=\"YOUR_SEARCH_ENDPOINT\", knowledge_base_name=\"YOUR_KNOWLEDGE_BASE\", credential=credential, mode=\"agentic\", ) as search,\n# Connect to Azure AI Foundry for model inference\nAzureAIAgentClient( project_endpoint=\"YOUR_PROJECT_ENDPOINT\", model_deployment_name=\"YOUR_MODEL\", async_credential=credential, ) as client,\n# Create an agent grounded in your Knowledge Base\nChatAgent(chat_client=client, context_providers=[search]) as agent, ): print((await agent.run(\"What's in the knowledge base?\")).text)\n\nasyncio.run(main()) ```\n\nThat’s it. Your agent now has access to enterprise knowledge with intelligent retrieval.\n\n## What is the Microsoft Agent Framework?\n\nThe [Microsoft Agent Framework](https://aka.ms/agent-framework) is an open-source, model-agnostic engine for building agentic AI applications. It provides:\n\n- **Unified Agent Abstractions**: A consistent API across LLM providers (Azure OpenAI, OpenAI, Anthropic, and more)\n- **Context Providers**: Pluggable components that inject relevant context into agent conversations\n- **Tool Integration**: A standardized way to give agents access to external capabilities\n- **Protocol Support**: Built-in support for Agent-to-Agent (A2A) and AG-UI protocols\n\nThe framework is available for both Python and .NET, enabling developers to build agents that can reason, plan, and take actions across enterprise data.\n\n## What is Foundry IQ?\n\n**Foundry IQ** is Microsoft’s intelligent knowledge layer for AI agents, built on Azure AI Search. Instead of traditional RAG where one query hits one index once, Foundry IQ treats retrieval as a reasoning task:\n\n- **Query Planning**: An LLM analyzes your query and plans optimal sub-queries\n- **Multi-hop Reasoning**: Follows chains of information across documents\n- **Answer Synthesis**: Returns comprehensive context with citations\n- **Knowledge Bases**: A unified abstraction over multiple data sources that agents can query naturally\n\nMicrosoft’s evaluations show up to 36% improvement in response relevance on complex multi-hop queries compared to traditional RAG approaches. [Learn more about Foundry IQ →](https://aka.ms/AISearch-KB-evals)\n\n## Two Retrieval Modes\n\nThe `AzureAISearchContextProvider` supports two modes, so you can choose the right approach for your use case:\n\n| Aspect | Semantic Mode | Agentic Mode (Foundry IQ) | | --- | --- | --- | | **Speed** | Fast | Slower (includes query planning) | | **Accuracy** | Good for simple queries | Excellent for complex queries | | **Query Complexity** | Single-hop lookups | Multi-hop reasoning | | **Best For** | Speed-critical applications | Research/analytical understanding tasks |\n\n### Semantic Mode\n\nFast [hybrid search](https://learn.microsoft.com/azure/search/hybrid-search-overview) combining vector similarity, keyword matching, and [semantic reranking](https://learn.microsoft.com/azure/search/semantic-search-overview). Great for straightforward queries where speed matters.\n\n```python async with (\n# Fast hybrid search on your index\nAzureAISearchContextProvider( endpoint=\"https://mysearch.search.windows.net\", index_name=\"product-catalog\", credential=credential, mode=\"semantic\", # Fast hybrid search top_k=5, # Return top 5 results ) as search, AzureAIAgentClient( project_endpoint=\"YOUR_PROJECT_ENDPOINT\", model_deployment_name=\"gpt-4o\", async_credential=credential, ) as client, ChatAgent( chat_client=client, instructions=\"You help customers find products.\", context_providers=[search], ) as agent, ): response = await agent.run(\"What laptops do you have under $1000?\") print(response.text) ```\n\n### Agentic Mode (Foundry IQ)\n\nIntelligent retrieval powered by Knowledge Bases. The engine plans, searches, evaluates, and iterates before returning context—handling complex, multi-step questions that traditional RAG struggles with.\n\n**Already have an Azure AI Search index?** No problem. The provider can auto-create a Knowledge Base from your existing index:\n\n```python async with ( AzureAISearchContextProvider( endpoint=\"https://mysearch.search.windows.net\", index_name=\"legal-documents\", # Your existing index credential=credential, mode=\"agentic\", # Foundry IQ intelligent retrieval azure_openai_resource_url=\"https://myopenai.openai.azure.com\", # Azure OpenAI only model_deployment_name=\"gpt-4o\", retrieval_reasoning_effort=\"medium\", # Full query planning ) as search,\n# ... rest of setup\n): ```\n\n>\n> **Note:** Foundry IQ currently supports Azure OpenAI models only. See [supported models](https://learn.microsoft.com/azure/search/agentic-retrieval-how-to-create-knowledge-base?tabs=rbac&amp;pivots=python) for the latest list.\n>\n\n**Have a Knowledge Base already?** Even simpler—just reference it by name:\n\n```python async with ( AzureAISearchContextProvider( endpoint=\"https://mysearch.search.windows.net\", knowledge_base_name=\"enterprise-kb\", # No index_name needed credential=credential, mode=\"agentic\", ) as search,\n# ... rest of setup\n): ```\n\n## Configuration Options\n\n### Retrieval Reasoning Effort\n\nControl how much work the Foundry IQ engine does when planning queries:\n\n| Level | Description | Use Case | | --- | --- | --- | | `minimal` | Basic query, no decomposition | Simple lookups | | `low` | Light reasoning | Moderate complexity | | `medium` | Full query planning | Complex multi-hop queries |\n\n### Output Modes\n\n| Mode | Description | Use Case | | --- | --- | --- | | `extractive_data` | Returns raw document chunks | Agent handles synthesis | | `answer_synthesis` | Knowledge Base synthesizes answer | Direct Q&A systems |\n\n## Get Started\n\n- **Install**: `pip install agent-framework-azure-ai-search --pre`\n- **Docs**: [Azure AI Search Context Provider documentation](https://github.com/microsoft/agent-framework/tree/main/python/samples/getting_started/context_providers/azure_ai_search)\n- **Video**: [Foundry IQ for multi-source AI knowledge bases](https://youtu.be/bHL1jbWjJUc?si=I4FgUT_EHL9CkQfa)\n- **Demo App**: [Knowledge Bases and agentic RAG](https://aka.ms/foundry-iq-demo)\n\n## Summary\n\nThe Azure AI Search Context Provider bridges the Microsoft Agent Framework and Foundry IQ. It enables your agents to:\n\n- Access enterprise knowledge through a standardized context provider\n- Choose the right retrieval strategy (semantic vs agentic) based on your use case\n- Leverage Foundry IQ’s intelligence for complex, multi-hop reasoning\n- Scale with enterprise requirements using managed identity and built-in governance\n\n**~20 lines of Python. Enterprise-grade RAG. Powered by Foundry IQ.**",
  "Title": "Foundry IQ in Microsoft Agent Framework",
  "FeedName": "Microsoft AI Foundry Blog",
  "FeedLevelAuthor": "Microsoft Foundry Blog",
  "Author": "Farzad Sunavala, Eduard van Valkenburg",
  "FeedUrl": "https://devblogs.microsoft.com/foundry/feed/",
  "Link": "https://devblogs.microsoft.com/foundry/foundry-iq-agent-framework-integration/",
  "PubDate": "2025-12-07T10:55:00+00:00",
  "OutputDir": "_news",
  "Tags": [
    "agent-framework",
    "agentic-ai",
    "azure-ai-search",
    "azure-openai",
    "context-providers",
    "enterprise-knowledge",
    "foundry-iq",
    "knowledge-bases",
    "Microsoft Foundry",
    "rag",
    "semantic-search"
  ]
}
