{
  "Tags": [],
  "ProcessedDate": "2025-08-21 19:13:43",
  "Link": "http://spindev.net/post/be-careful-with-repo-scope/",
  "OutputDir": "_posts",
  "FeedUrl": "https://spindev.net/index.xml",
  "Description": "Did you know that when you‚Äôre using a Github personal access token (PAT) with the `repo` scope, it gives you more permissions than just accessing your repositories? If not, you should take a look into this blog post.\n\n## What is a GitHub PAT?\n\nA classic GitHub PAT gives you the possibility to authenticate using a token against Github, and it‚Äôs going to impersonate as your user account. Depending on the chosen scope, you can do multiple things with these token. For example read repository content, write to repository, etc. To create a classical personal access token, you have to go to your [developer settings of your personal account](https://github.com/settings/tokens?type=classic). ![PAT creation](pat-creation.png)\n\n## What is the issue with the repo scope token?\n\nI was currently working for a customer and they wanted to migrate from GitHub Enterprise Server to GitHub Enterprise Cloud. Therefore we have tooling in place like the [GitHub Enterprise Importer (GEI)](https://docs.github.com/en/migrations/using-github-enterprise-importer). One downside of the tooling is, it will not migrate teams, users, repo permissions, etc. That was the reason I created some post-migration scripts to do the work and with this I noticed something weird. I only had a `repo` scope token accidentally but wanted to create a team for the organization. And guess what? It worked‚Ä¶ üòµ‚Äçüí´\n\nI was confused and checked the scope of my token, looked like this\n\n![repo scope](repo-scope.png)\n\nLooks pretty clean here. No hints for additional permissions, right?\n\nI played around a little bit and came to the conclusion that has to be a bug üí™. My PAT doesn‚Äôt have `admin:org` scope, so that shouldn‚Äôt work. Following this up I created a support ticket on GitHub just to get the confirmation `this is by design` . True to the motto: `\"It is not a bug, it is a feature\"` . What the hell! ü§Ø They pointed me to the [docs](https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/scopes-for-oauth-apps#available-scopes) where it is outlined as well:\n\n![repo scope docs](repo-scope-docs.png)\n\nWell, this is some kind of misleading, isn‚Äôt it? You have the `admin:org` scope for exactly this scenarios:\n\n![org admin scope docs](org-admin-scope-docs.png)\n\nBut some of these resources are included by design in the `repo` scope, too. Why GitHub, WHY?!?!\n\n## Conclusion\n\nI think this is still a bug and should be fixed. Yes, this may cause some integrations to stop working but it will definitely increase security and predictability. It is more consistent to use the `org:admin` scope to handle organization resources instead the `repo` scope. Using the GitHub API with classic PAT shows some other strange behaviors but this is a topic for another blog post.\n\nNext time you give a person or tool your ‚Äújust‚Äù `repo` scope token keep in mind that it can be used to modify organization level resources likes teams, projects, etc. For sure you can use this on purpose to work with lower privileges than necessary üòÅ",
  "Author": "Home on",
  "FeedName": "Spindev's Blog",
  "PubDate": "2025-06-27T07:38:30+00:00",
  "FeedLevelAuthor": "Home on",
  "Title": "Be careful using GitHub PAT with repo scope",
  "EnhancedContent": "# Be Careful Using GitHub PAT With Repo Scope\n\n- 27.06.2025\n- 3-minute read\n\nDid you know that when you‚Äôre using a Github personal access token (PAT) with the `repo` scope, it gives you more permissions than just accessing your repositories? If not, you should take a look into this blog post.\n\n## What is a GitHub PAT?\n\nA classic GitHub PAT gives you the possibility to authenticate using a token against Github, and it‚Äôs going to impersonate as your user account. Depending on the chosen scope, you can do multiple things with these token. For example read repository content, write to repository, etc. To create a classical personal access token, you have to go to your [developer settings of your personal account](https://github.com/settings/tokens?type=classic). ![PAT creation](pat-creation.png)\n\n## What is the issue with the repo scope token?\n\nI was currently working for a customer and they wanted to migrate from GitHub Enterprise Server to GitHub Enterprise Cloud. Therefore we have tooling in place like the [GitHub Enterprise Importer (GEI)](https://docs.github.com/en/migrations/using-github-enterprise-importer). One downside of the tooling is, it will not migrate teams, users, repo permissions, etc. That was the reason I created some post-migration scripts to do the work and with this I noticed something weird. I only had a `repo` scope token accidentally but wanted to create a team for the organization. And guess what? It worked&mldr; üòµ‚Äçüí´\n\nI was confused and checked the scope of my token, looked like this\n\n![repo scope](repo-scope.png)\n\nLooks pretty clean here. No hints for additional permissions, right?\n\nI played around a little bit and came to the conclusion that has to be a bug üí™. My PAT doesn‚Äôt have `admin:org` scope, so that shouldn‚Äôt work. Following this up I created a support ticket on GitHub just to get the confirmation `this is by design` . True to the motto: `\"It is not a bug, it is a feature\"` . What the hell! ü§Ø They pointed me to the [docs](https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/scopes-for-oauth-apps#available-scopes) where it is outlined as well:\n\n![repo scope docs](repo-scope-docs.png)\n\nWell, this is some kind of misleading, isn‚Äôt it? You have the `admin:org` scope for exactly this scenarios:\n\n![org admin scope docs](org-admin-scope-docs.png)\n\nBut some of these resources are included by design in the `repo` scope, too. Why GitHub, WHY?!?!\n\n## Conclusion\n\nI think this is still a bug and should be fixed. Yes, this may cause some integrations to stop working but it will definitely increase security and predictability. It is more consistent to use the `org:admin` scope to handle organization resources instead the `repo` scope. Using the GitHub API with classic PAT shows some other strange behaviors but this is a topic for another blog post.\n\nNext time you give a person or tool your ‚Äújust‚Äù `repo` scope token keep in mind that it can be used to modify organization level resources likes teams, projects, etc. For sure you can use this on purpose to work with lower privileges than necessary üòÅ\n\n[GitHub](/categories/github/) [GitHub](/tags/github/)[PAT](/tags/pat/)\n\n## comments"
}
