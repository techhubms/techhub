{
  "FeedUrl": "https://www.reddit.com/r/dotnet/.rss",
  "Link": "https://www.reddit.com/r/dotnet/comments/1mk4hp1/high_ram_usage_aspnet_core_mvc/",
  "Tags": [
    "dotnet"
  ],
  "OutputDir": "_community",
  "FeedName": "Reddit DotNet",
  "ProcessedDate": "2025-08-08 16:23:55",
  "Title": "High RAM usage aspnet core mvc",
  "FeedLevelAuthor": ".NET",
  "EnhancedContent": "Hi everyone,\n\nI have an [ASP.NET](http://ASP.NET) Core MVC 8 application that's consuming a lot of RAM (about 2.5GB), and sometimes it logs an out-of-memory error. I don't have the experience to say if this is acceptable.\n\nI'm here to ask for your advice.\n\nThe application runs from 8:00 AM to 6:00 PM with about 50-70 regular users connected who perform a lot of database operations (EF Core). Most importantly, every time they open a case detail page, they see thumbnails (between 10 and 300KB) that are retrieved from a network folder. These thumbnails are also generated when a new case is created.\n\nThe site is hosted on IIS on a Windows Server 2025 with 4GB of RAM. That's all I know.\n\nShould I push to analyze the situation and figure out how to optimize it, or could the characteristics described above be causing such high RAM consumption, and therefore it's better to push for an increase in RAM?\n\nI'd like to analyze the most critical operations. Which tools do you recommend? VS or Rider. If there's something for production, that would be even better, so I can get immediate feedback.\n\nThanks everyone!\n\nTake a memory dump when the application is eating a lot of memory. Then the memory dump should be opened in Visual Studio or WinDbg and look at the number of objects and their size.\n\nHow do you retrieve or generate the images?\n\nYou could be opening unmanages resources like files, filehandles, memory and not disposing them.\n\nIf run a memory profiler to see whatâ€™s causing the memory usage. Chances are itâ€™s unmanaged resources not being disposed thatâ€™s the issue.\n\nShow us the code\n\n4GB RAM, to me, suggests this may be running in a 32 bit environment - are you able to check that?\n\nRegardless that's a *lot* of memory usage for 70 users, the database work shouldn't be that intensive on the hardware unless the queries are loading masses of data into memory and then performing logic on them. That kind of thing is typical with devs who aren't used to optimising/writing SQL.\n\nThe thumbnails is an interesting part, are they dynamic to the contents of the case (ie have to be completely unique each time)? Even if there are 10 potential thumbnails per case \"type\", you could generate them once and cache/persist them statically and load it in.\n\nIt's hard to tell if the RAM/CPU usage is normal for the workload, without seeing the code behind the workload unfortunately. Getting frequent `OutOfMemoryException` is **not** acceptable, and something should be done.\n\nQuickest win is checking if the environment/site IIS is hosting the application in is set to 32bit, and if so can it be changed to 64bit?\n\nCould potentially be a memory leak. Have you run a profiler on it?\n\nWhen you say MVC 8, do you meant dotnet 8?\n\nYou will, almost, never be able to reproduce the memory leaks in local development. For various reasons. Until you find the reasons in the memory dump. Then it will be obvious. ðŸ˜‰\n\nBe aware that creating the memory dump will halt the code until it is done. In the meantime the site will not respond. So write it to a fast local disk to minimize the halt-time.\n\n- 4 GB of physical memory is unacceptably small for typical web applications of modern days. Two decades ago enterprises moved to larger specs when Windows Server 64 bit was released.\n- Performance analysis (and then tuning) is efficient if the code base is available, or people just throw random ideas that might not be applicable. You should hire an experienced consultant instead of forcing yourself to learn from scratch.\n\nThanks for your post scartus. Please note that we don't allow spam, and we ask that you follow the rules available in the sidebar. We have a lot of commonly asked questions so if this post gets removed, please do a search and see if it's already been asked.\n\n*I am a bot, and this action was performed automatically. Please* [*contact the moderators of this subreddit*](/message/compose/?to=/r/dotnet) *if you have any questions or concerns.*",
  "Author": "scartus",
  "PubDate": "2025-08-07T16:19:11+00:00",
  "Description": "Hi everyone,\n\nI have an [ASP.NET](http://ASP.NET) Core MVC 8 application that's consuming a lot of RAM (about 2.5GB), and sometimes it logs an out-of-memory error. I don't have the experience to say if this is acceptable.\n\nI'm here to ask for your advice.\n\nThe application runs from 8:00 AM to 6:00 PM with about 50-70 regular users connected who perform a lot of database operations (EF Core). Most importantly, every time they open a case detail page, they see thumbnails (between 10 and 300KB) that are retrieved from a network folder. These thumbnails are also generated when a new case is created.\n\nThe site is hosted on IIS on a Windows Server 2025 with 4GB of RAM. That's all I know.\n\nShould I push to analyze the situation and figure out how to optimize it, or could the characteristics described above be causing such high RAM consumption, and therefore it's better to push for an increase in RAM?\n\nI'd like to analyze the most critical operations. Which tools do you recommend? VS or Rider. If there's something for production, that would be even better, so I can get immediate feedback.\n\nThanks everyone!"
}
