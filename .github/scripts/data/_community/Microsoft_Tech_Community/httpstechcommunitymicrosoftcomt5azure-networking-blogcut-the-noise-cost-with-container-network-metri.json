{
  "Author": "KhushbuP",
  "Tags": [],
  "Title": "Cut the Noise & Cost with Container Network Metrics Filtering in ACNS for AKS",
  "FeedUrl": "https://techcommunity.microsoft.com/t5/s/gxcuf89792/rss/Category?category.id=Azure",
  "EnhancedContent": "Weâ€™re excited to introduceÂ **Container Network Metrics Filtering** in **Azure Container Networking Services (ACNS)** for **Azure Kubernetes Service (AKS)** is **** now in **Public Preview**! This capability transforms how you manage network observability in Kubernetes clusters by giving you control over what metrics matter most.\n\n## Why Excessive Metrics Are a Problem (And How Weâ€™re Fixing It)\n\nIn todayâ€™s large-scale, microservices-driven environments, teams often face **metrics bloat**, **** Bollecting far more data than they need. The result?\n\n- **High Storage & Ingestion Costs:** Paying for data youâ€™ll never use.\n- **Cluttered Dashboards:** Hunting for critical latency spikes in a sea of irrelevant pod restarts.\n- **Operational Overhead:** Slower queries, higher maintenance, and fatigue.\n\nOur new filtering capability solves this by letting you define **precise filters at the pod level** using standard Kubernetes Custom Resources. You collect only what matters, before it ever reaches your monitoring stack.\n\n## Key Benefits: Signal Over Noise\n\n| Benefit | Your Gain | | --- | --- | | Fine-Grained Control | Filter by namespace or pod label. Target critical services and ignore noise. | | Cost Optimization | Reduce ingestion costs for Prometheus, Grafana, and other tools. | | Improved Observability | Cleaner dashboards and faster troubleshooting with relevant metrics only. | | Dynamic & Zero-Downtime | Apply or update filters without restarting Cilium agents or Prometheus. |\n\n## How It Works: Filtering at the Source\n\nUnlike traditional sampling or post-processing, filtering happens **at the Cilium agent levelâ€”inside the kernelâ€™s data plane**.\n\nYou define filters using the **ContainerNetworkMetric** Custom Resource to include or exclude metrics such as:\n\n- DNS lookups\n- TCP connection metrics\n- Flow metrics\n- Drop (error) metrics\n\nThis reduces data volume **before metrics leave the host**, ensuring your observability tools receive only curated, high-value data.\n\n## Example: Filtering Flow Metrics to Reduce Noise\n\nHereâ€™s a sample `ContainerNetworkMetric` CRD that filters **only dropped flows** from the `traffic/http` namespace and excludes flows from `traffic/fortio` pods:\n\n``` apiVersion: acn.azure.com/v1alpha1 kind: ContainerNetworkMetric metadata: name: container-network-metric spec: filters:\n- metric: flow\nincludeFilters:\n# Include only DROPPED flows from traffic namespace\nverdict:\n- \"dropped\"\nfrom: namespacedPod:\n- \"traffic/http\"\nexcludeFilters:\n# Exclude traffic/fortio flows to reduce noise\nfrom: namespacedPod:\n- \"traffic/fortio\"\n```\n\n### Before Filtering\n\n### After Applying Filters\n\n## Getting Started Today\n\nReady to simplify your network observability?\n\n1. **Enable ACNS:** Make sure [ACNS is enabled](https://aka.ms/acns) on your AKS cluster.\n2. **Define Your Filter:** Apply the [ContainerNetworkMetric CRD](https://aka.ms/acns/filteringhowto) with your include/exclude rules.\n3. **Validate:** Check your settings via ConfigMap and Cilium agent logs.\n4. **See the Impact:** Watch ingestion costs drop and dashboards become clearer!\n\nðŸ‘‰ Learn more in the [Metrics Filtering Guide](https://aka.ms/acns/container-network-metrics-filtering).\n\n**Try the Public Preview today and take control of your container network metrics.**\n\nUpdated Nov 08, 2025\n\nVersion 1.0\n\n[azure cni](/tag/azure%20cni?nodeId=board%3AAzureNetworkingBlog)\n\n[azure networking](/tag/azure%20networking?nodeId=board%3AAzureNetworkingBlog)\n\n[cilium](/tag/cilium?nodeId=board%3AAzureNetworkingBlog)\n\n[container networking](/tag/container%20networking?nodeId=board%3AAzureNetworkingBlog)\n\n[ebpf](/tag/ebpf?nodeId=board%3AAzureNetworkingBlog)\n\n[!\\[KhushbuP&#x27;s avatar\\](https://techcommunity.microsoft.com/t5/s/gxcuf89792/m_assets/avatars/default/avatar-9.svg?image-dimensions=50x50)](/users/khushbup/1859529) [KhushbuP](/users/khushbup/1859529) ![Icon for Microsoft rank](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/cmstNC05WEo0blc?image-dimensions=100x16&amp;constrain-image=true)Microsoft\n\nJoined May 10, 2023\n\n[View Profile](/users/khushbup/1859529)\n\n/category/azure/blog/azurenetworkingblog [Azure Networking Blog](/category/azure/blog/azurenetworkingblog) Follow this blog board to get notified when there's new activity",
  "FeedLevelAuthor": "rss.livelink.threads-in-node",
  "Link": "https://techcommunity.microsoft.com/t5/azure-networking-blog/cut-the-noise-cost-with-container-network-metrics-filtering-in/ba-p/4468221",
  "ProcessedDate": "2025-11-08 05:05:38",
  "OutputDir": "_community",
  "FeedName": "Microsoft Tech Community",
  "PubDate": "2025-11-08T04:16:56+00:00",
  "Description": "Weâ€™re excited to introduce **Container Network Metrics Filtering** in **Azure Container Networking Services (ACNS)** for **Azure Kubernetes Service (AKS)** is **** now in **Public Preview**! This capability transforms how you manage network observability in Kubernetes clusters by giving you control over what metrics matter most.\n\n## Why Excessive Metrics Are a Problem (And How Weâ€™re Fixing It)\n\nIn todayâ€™s large-scale, microservices-driven environments, teams often face **metrics bloat**, **** Bollecting far more data than they need. The result?\n\n- **High Storage & Ingestion Costs:** Paying for data youâ€™ll never use.\n- **Cluttered Dashboards:** Hunting for critical latency spikes in a sea of irrelevant pod restarts.\n- **Operational Overhead:** Slower queries, higher maintenance, and fatigue.\n\nOur new filtering capability solves this by letting you define **precise filters at the pod level** using standard Kubernetes Custom Resources. You collect only what matters, before it ever reaches your monitoring stack.\n\n## Key Benefits: Signal Over Noise\n\n| Benefit | Your Gain | | --- | --- | | Fine-Grained Control | Filter by namespace or pod label. Target critical services and ignore noise. | | Cost Optimization | Reduce ingestion costs for Prometheus, Grafana, and other tools. | | Improved Observability | Cleaner dashboards and faster troubleshooting with relevant metrics only. | | Dynamic & Zero-Downtime | Apply or update filters without restarting Cilium agents or Prometheus. |\n\n## How It Works: Filtering at the Source\n\nUnlike traditional sampling or post-processing, filtering happens **at the Cilium agent levelâ€”inside the kernelâ€™s data plane**.\n\nYou define filters using the **ContainerNetworkMetric** Custom Resource to include or exclude metrics such as:\n\n- DNS lookups\n- TCP connection metrics\n- Flow metrics\n- Drop (error) metrics\n\nThis reduces data volume **before metrics leave the host**, ensuring your observability tools receive only curated, high-value data.\n\n## Example: Filtering Flow Metrics to Reduce Noise\n\nHereâ€™s a sample `ContainerNetworkMetric` CRD that filters **only dropped flows** from the `traffic/http` namespace and excludes flows from `traffic/fortio` pods:\n\n``` apiVersion: acn.azure.com/v1alpha1 kind: ContainerNetworkMetric metadata: name: container-network-metric spec: filters:\n- metric: flow\nincludeFilters:\n# Include only DROPPED flows from traffic namespace\nverdict:\n- \"dropped\"\nfrom: namespacedPod:\n- \"traffic/http\"\nexcludeFilters:\n# Exclude traffic/fortio flows to reduce noise\nfrom: namespacedPod:\n- \"traffic/fortio\"\n```\n\n### Before Filtering\n\n![]()\n\n### After Applying Filters\n\n![]()\n\n## Getting Started Today\n\nReady to simplify your network observability?\n\n1. **Enable ACNS:** Make sure [ACNS is enabled](https://aka.ms/acns) on your AKS cluster.\n2. **Define Your Filter:** Apply the [ContainerNetworkMetric CRD](https://aka.ms/acns/filteringhowto) with your include/exclude rules.\n3. **Validate:** Check your settings via ConfigMap and Cilium agent logs.\n4. **See the Impact:** Watch ingestion costs drop and dashboards become clearer!\n\nðŸ‘‰ Learn more in the [Metrics Filtering Guide](https://aka.ms/acns/container-network-metrics-filtering).\n\n**Try the Public Preview today and take control of your container network metrics.**"
}
