{
  "EnhancedContent": "## In this post we are going to discuss the different authentication options when calling a Logic Apps MCP Server including API Key authentication.\n\nWe previously [announced](https://techcommunity.microsoft.com/blog/integrationsonazureblog/introducing-logic-apps-mcp-servers-public-preview/4450419)support for building Logic Apps MCP servers. This capability comes in a couple forms including via the wizard hosted in API Center and through manual configurations inside an existing Logic App.\n\nWhen we initially shipped this feature, we offered two authentication options:\n\n- OAuth2 (default)\n- Anonymous (opt-in)\n\nBased upon customer feedback and the need for greater interoperability with non-Microsoft agent frameworks we have enabled API Key authentication. API Key authentication now becomes part of the default security configuration, which means when you use API Center (or AI Foundry) to generate an MCP Server, we will setup OAuth and API Key by default.\n\n## **How can I configure my authentication settings?**\n\nIn our [product documentation](https://learn.microsoft.com/en-us/azure/logic-apps/set-up-model-context-protocol-server-standard#set-up-logic-app-as-mcp-server), we discuss the role of host.json and that becomes a key configuration to enable a Logic App as an MCP server. We have recently introduced an¬†**authentication** node which includes a¬†**type** property. Within this property there are 3 valid options that can be used:\n\n- OAuth2\n- ApiKey\n- Anonymous\n\nBy default, you won't see a type property in host.json and that means that you have the default settings which include OAuth2 and ApiKey. If you explicitly add one of these values, only that authentication scheme will be implemented.\n\n``` { \"version\": \"2.0\", \"extensionBundle\": { \"id\": \"Microsoft.Azure.Functions.ExtensionBundle.Workflows\", \"version\": \"[1.*, 2.0.0)\" }, \"extensions\": { \"workflow\": { \"McpServerEndpoints\": { \"enable\": true, \"authentication\": { \"type\": \"ApiKey\" } } } } } ```\n\n**Note:** We will be adding a user experience around accessing key information, but for now, you can access this information by calling our backend APIs.\n\n## **Pre-requisites**\n\nIn order to connect to the related APIs, we will need a Bearer token that can be used to authenticate our request. A simple way to obtain this token is to log into the Azure Portal and then open up a Cloud Shell session.\n\nIssue the following command: az account get-access-token --resource https://management.azure.com/\n\nYou will see a response that includes an 'accessToken'. Copy this value.\n\n## **Retrieving API Key**\n\nTo obtain an API key, use your favorite REST client and call the following endpoint with the query parameter¬†*getApikey=true*:\n\n**REST Endpoint**: POST /listMcpServers\n\nPOST¬†https://management.azure.com/subscriptions/**{subscriptionId}**/resourceGroups/**{RGName}**/providers/Microsoft.Web/sites/**{LAName}**/hostruntime/runtime/webhooks/workflow/api/management/listMcpServers?api-version=2021-02-01&**getApikey=true**\n\nYou should receive a response that includes all MCP Servers for that Logic App, related tools and a value of X-API-Key. This will be the key that you can use to connect to your MCP Server.\n\n**Note:** The API Keys that are available, both primary and secondary, apply to the entire Logic App and not individual MCP Servers\n\nIf you prefer using a CLI, you can alternatively issue this command instead:\n\naz rest --method post --url https://management.azure.com/subscriptions/**{subscriptionId}**/resourceGroups/**{RGName}**/providers/Microsoft.Web/sites/**{LAName}**/hostruntime/runtime/webhooks/workflow/api/management/listMcpServers?api-version=2021-02-01&getApikey=true\n\n**Note:** Providing a request body is not required unless you want some additional control over the behavior of the API. For example, you have the ability to control whether you are interested in the primary or secondary key and notAfter when dealing with expiry dates.\n\n{\n\n\"keyType\": \"primary\", // Optional: \"primary\" or \"secondary\". Defaults to \"primary\" if not provided.\n\n\"notAfter\": \"2026-09-04T10:04:24Z\" // Optional: UTC timestamp for API Key expiry. Defaults to 24 hours if not provided.\n\n}\n\n## Tools\n\nAs you may have noticed, one of the benefits of using the listMCPServers API is that it will also display any of the preconfigured tools for an MCP Server. This is a good way to discover what tools are available in the MCP Server.\n\n## **Regenerating API Key**\n\nTo regenerate an API key, we do have a different API that we can call to accomplish this.\n\n**Endpoint**: POST /regenerateMcpServerAccessKey\n\nPOST https://management.azure.com/subscriptions/**{subscriptionId}**/resourceGroups/**{RGName}**/providers/Microsoft.Web/sites/**{LAName}**/hostruntime/runtime/webhooks/workflow/api/management/regenerateMcpServerAccessKey?api-version=2021-02-01\n\n**CLI:** Alternatively, if you have CLI installed, then you can use this command:\n\naz rest --method post --url https://management.azure.com/subscriptions/**{subscriptionId}**/resourceGroups/**{RGName}**/providers/Microsoft.Web/sites/**{LAName}**/hostruntime/runtime/webhooks/workflow/api/management/regenerateMcpServerAccessKey?api-version=2021-02-01\n\nWhen making these calls, we do need to ensure that we provide a keyType in our request body.\n\n{\n\n\"keyType\": \"primary\" // Required: \"primary\" or \"secondary\"\n\n}\n\nWhen you make this call you will receive a 200 OK HTTP response. To access the new key value, call the listMcpServee API that we previously discussed in this article.\n\n## **Usage**\n\nYou can use the API Key MCP Server authentication from any MCP client that supports it. We have recently introduced Agent Loop support for MCP Servers so we can use that here. With our URL, APIKey we can configure connection to call our MCP Server using API Key.\n\nStart by building a Conversational Agent (this will also work with autonomous agents as well) and click **Add an MCP server (preview)**.\n\nClick on¬†**Add MCP Server**\n\nAdd a new connection and select¬†**Key**as your¬†**Authentication Type**. From there, insert your¬†**MCP Server URL** and¬†**Key.** For the¬†**Key Header Name** provide a value of¬†X-API-KEY.\n\nSave and run your agent.\n\n## Demo\n\nTo see a demo of how to setup API Key authentication, please see the following video\n\nUpdated Nov 18, 2025\n\nVersion 1.0\n\n[ai](/tag/ai?nodeId=board%3AIntegrationsonAzureBlog)\n\n[logic apps](/tag/logic%20apps?nodeId=board%3AIntegrationsonAzureBlog)\n\n[logic apps standard](/tag/logic%20apps%20standard?nodeId=board%3AIntegrationsonAzureBlog)\n\n[!\\[KentWeareMSFT&#x27;s avatar\\](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/dS0xMzc3NzYzLTM3MDMzN2lBMDQxNzRGQUE3REQ3MjUx?image-dimensions=50x50)](/users/kentwearemsft/1377763) [KentWeareMSFT](/users/kentwearemsft/1377763) ![Icon for Microsoft rank](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/cmstNC05WEo0blc?image-dimensions=100x16&amp;constrain-image=true)Microsoft\n\nJoined April 30, 2022\n\n[View Profile](/users/kentwearemsft/1377763)\n\n/category/azure/blog/integrationsonazureblog [Azure Integration Services Blog](/category/azure/blog/integrationsonazureblog) Follow this blog board to get notified when there's new activity",
  "Title": "üîêEnabling API Key Authentication for Logic Apps MCP Servers",
  "ProcessedDate": "2025-11-18 19:04:49",
  "FeedUrl": "https://techcommunity.microsoft.com/t5/s/gxcuf89792/rss/Category?category.id=Azure",
  "Link": "https://techcommunity.microsoft.com/t5/azure-integration-services-blog/enabling-api-key-authentication-for-logic-apps-mcp-servers/ba-p/4470560",
  "Author": "KentWeareMSFT",
  "Description": "We previously [announced](https://techcommunity.microsoft.com/blog/integrationsonazureblog/introducing-logic-apps-mcp-servers-public-preview/4450419)support for building Logic Apps MCP servers. This capability comes in a couple forms including via the wizard hosted in API Center and through manual configurations inside an existing Logic App.\n\nWhen we initially shipped this feature, we offered two authentication options:\n\n- OAuth2 (default)\n- Anonymous (opt-in)\n\nBased upon customer feedback and the need for greater interoperability with non-Microsoft agent frameworks we have enabled API Key authentication. API Key authentication now becomes part of the default security configuration, which means when you use API Center (or AI Foundry) to generate an MCP Server, we will setup OAuth and API Key by default.\n\n## **How can I configure my authentication settings?**\n\nIn our [product documentation](https://learn.microsoft.com/en-us/azure/logic-apps/set-up-model-context-protocol-server-standard#set-up-logic-app-as-mcp-server), we discuss the role of host.json and that becomes a key configuration to enable a Logic App as an MCP server. We have recently introduced an **authentication** node which includes a **type** property. Within this property there are 3 valid options that can be used:\n\n- OAuth2\n- ApiKey\n- Anonymous\n\nBy default, you won't see a type property in host.json and that means that you have the default settings which include OAuth2 and ApiKey. If you explicitly add one of these values, only that authentication scheme will be implemented.\n\n- { \"version\": \"2.0\", \"extensionBundle\": { \"id\": \"Microsoft.Azure.Functions.ExtensionBundle.Workflows\", \"version\": \"[1.\\*, 2.0.0)\" }, \"extensions\": { \"workflow\": { \"McpServerEndpoints\": { \"enable\": true, \"authentication\": { \"type\": \"ApiKey\" } } } } }\n\n**Note:** We will be adding a user experience around accessing key information, but for now, you can access this information by calling our backend APIs.\n\n## **Pre-requisites**\n\nIn order to connect to the related APIs, we will need a Bearer token that can be used to authenticate our request. A simple way to obtain this token is to log into the Azure Portal and then open up a Cloud Shell session.\n\n![]()\n\nIssue the following command: az account get-access-token --resource https://management.azure.com/\n\nYou will see a response that includes an 'accessToken'. Copy this value.\n\n![]()\n\n## **Retrieving API Key**\n\nTo obtain an API key, use your favorite REST client and call the following endpoint with the query parameter *getApikey=true*:\n\n**REST Endpoint**: POST /listMcpServers\n\nPOST https://management.azure.com/subscriptions/**{subscriptionId}**/resourceGroups/**{RGName}**/providers/Microsoft.Web/sites/**{LAName}**/hostruntime/runtime/webhooks/workflow/api/management/listMcpServers?api-version=2021-02-01&**getApikey=true**\n\nYou should receive a response that includes all MCP Servers for that Logic App, related tools and a value of X-API-Key. This will be the key that you can use to connect to your MCP Server.\n\n**Note:** The API Keys that are available, both primary and secondary, apply to the entire Logic App and not individual MCP Servers\n\n![]()\n\nIf you prefer using a CLI, you can alternatively issue this command instead:\n\naz rest --method post --url https://management.azure.com/subscriptions/**{subscriptionId}**/resourceGroups/**{RGName}**/providers/Microsoft.Web/sites/**{LAName}**/hostruntime/runtime/webhooks/workflow/api/management/listMcpServers?api-version=2021-02-01&getApikey=true\n\n**Note:** Providing a request body is not required unless you want some additional control over the behavior of the API. For example, you have the ability to control whether you are interested in the primary or secondary key and notAfter when dealing with expiry dates.\n\n{\n\n\"keyType\": \"primary\", // Optional: \"primary\" or \"secondary\". Defaults to \"primary\" if not provided.\n\n\"notAfter\": \"2026-09-04T10:04:24Z\" // Optional: UTC timestamp for API Key expiry. Defaults to 24 hours if not provided.\n\n}\n\n## Tools\n\nAs you may have noticed, one of the benefits of using the listMCPServers API is that it will also display any of the preconfigured tools for an MCP Server. This is a good way to discover what tools are available in the MCP Server.\n\n![]()\n\n## **Regenerating API Key**\n\nTo regenerate an API key, we do have a different API that we can call to accomplish this.\n\n**Endpoint**: POST /regenerateMcpServerAccessKey\n\nPOST https://management.azure.com/subscriptions/**{subscriptionId}**/resourceGroups/**{RGName}**/providers/Microsoft.Web/sites/**{LAName}**/hostruntime/runtime/webhooks/workflow/api/management/regenerateMcpServerAccessKey?api-version=2021-02-01\n\n**CLI:** Alternatively, if you have CLI installed, then you can use this command:\n\naz rest --method post --url https://management.azure.com/subscriptions/**{subscriptionId}**/resourceGroups/**{RGName}**/providers/Microsoft.Web/sites/**{LAName}**/hostruntime/runtime/webhooks/workflow/api/management/regenerateMcpServerAccessKey?api-version=2021-02-01\n\nWhen making these calls, we do need to ensure that we provide a keyType in our request body.\n\n{\n\n\"keyType\": \"primary\" // Required: \"primary\" or \"secondary\"\n\n}\n\nWhen you make this call you will receive a 200 OK HTTP response. To access the new key value, call the listMcpServee API that we previously discussed in this article.\n\n![]()\n\n## **Usage**\n\nYou can use the API Key MCP Server authentication from any MCP client that supports it. We have recently introduced Agent Loop support for MCP Servers so we can use that here. With our URL, APIKey we can configure connection to call our MCP Server using API Key.\n\nStart by building a Conversational Agent (this will also work with autonomous agents as well) and click **Add an MCP server (preview)**.\n\n![]()\n\nClick on **Add MCP Server**\n\n![]()\n\nAdd a new connection and select **Key** as your **Authentication Type**. From there, insert your **MCP Server URL** and **Key.** For the **Key Header Name** provide a value of X-API-KEY.\n\n![]()\n\nSave and run your agent.\n\n![]()\n\n## Demo\n\nTo see a demo of how to setup API Key authentication, please see the following video",
  "FeedName": "Microsoft Tech Community",
  "Tags": [],
  "OutputDir": "_community",
  "PubDate": "2025-11-18T18:35:39+00:00",
  "FeedLevelAuthor": "rss.livelink.threads-in-node"
}
