{
  "Description": "## **Duplicate Detection in Logic App Trigger**\n\n### **Overview**\n\nIn certain scenarios, a Logic App may process the same item multiple times due to various reasons. Common examples include:\n\n- **SharePoint Polling**: The trigger might fire twice because of subsequent edits.\n*(Reference: [Microsoft SharePoint Connector for Power Automate | Microsoft Learn](https://learn.microsoft.com/en-us/sharepoint/dev/business-apps/power-automate/sharepoint-connector-actions-triggers#flow-runs))*\n- **Dataverse Webhook**: This can occur when a field is updated by plugins.\n\n### **Solution Approach**\n\nTo address this issue, I implemented a solution using the **Logic Apps REST API**: [Workflow Runs - List - REST API (Azure Logic Apps) | Microsoft Learn](https://learn.microsoft.com/en-us/rest/api/logic/workflow-runs/list?view=rest-logic-2019-05-01&tabs=HTTP)\n\nThe idea is simple: Each time the Logic App is triggered, it searches all available runs within a specified time window for the same **clientTrackingId**.\n\n### **Implementation Details**\n\n#### **Step 1: Extract clientTrackingId**\n\n![]()\n\nFor the SharePoint trigger example, I used the file name as the clientTrackingId with the following expression:\n\n@string(trigger()['outputs']['body']['value'][0]['{FilenameWithExtension}'])\n\n#### **Step 2: Pass Payload to Duplicate Detector Flow**\n\n![]()\n\n#### ****\n\nThe payload includes:\n\n- **clientTrackingId** (chosen identifier)\n- **Resource URI** for the SharePoint flow\n- **Time window** to check against\n\n### **Duplicate Detector Flow Logic**\n\nThe flow retrieves the run history and checks if the number of runs is greater than 1. If so, the same file was processed before:\n\n![]()\n\nthe http response will have the below status\n\nif(greater(length(body('HTTP-Get\\_History')['value']), 1), '400', '200')\n\n### **Important Notes**\n\n- The **Duplicate Detector Flow** must have **Logic Apps Standard Reader (Preview)** permission for the resource group.\n- The solution is built on **Logic App Standard**, but it can be adapted for **Logic App Consumption** or **Power Automate**.\n\n### **GitHub Link**\n\n[logicappfiles/Logic Apps Duplicate Detector at main · mbarqawi/logicappfiles](https://github.com/mbarqawi/logicappfiles/tree/main/Logic%20Apps%20Duplicate%20Detector)",
  "Link": "https://techcommunity.microsoft.com/t5/azure-integration-services-blog/duplicate-detection-in-logic-app-trigger/ba-p/4470365",
  "PubDate": "2025-11-17T08:58:53+00:00",
  "EnhancedContent": "## **Duplicate Detection in Logic App Trigger**\n\n### **Overview**\n\nIn certain scenarios, a Logic App may process the same item multiple times due to various reasons. Common examples include:\n\n- **SharePoint Polling**: The trigger might fire twice because of subsequent edits.\n*(Reference: [Microsoft SharePoint Connector for Power Automate | Microsoft Learn](https://learn.microsoft.com/en-us/sharepoint/dev/business-apps/power-automate/sharepoint-connector-actions-triggers#flow-runs))*\n- **Dataverse Webhook**: This can occur when a field is updated by plugins.\n\n### **Solution Approach**\n\nTo address this issue, I implemented a solution using the **Logic Apps REST API**: [Workflow Runs - List - REST API (Azure Logic Apps) | Microsoft Learn](https://learn.microsoft.com/en-us/rest/api/logic/workflow-runs/list?view=rest-logic-2019-05-01&amp;tabs=HTTP)\n\nThe idea is simple: Each time the Logic App is triggered, it searches all available runs within a specified time window for the same **clientTrackingId**.\n\n### **Implementation Details**\n\n#### **Step 1: Extract clientTrackingId**\n\nFor the SharePoint trigger example, I used the file name as the clientTrackingId with the following expression:\n\n@string(trigger()['outputs']['body']['value'][0]['{FilenameWithExtension}'])\n\n#### **Step 2: Pass Payload to Duplicate Detector Flow**\n\n#### ****\n\nThe payload includes:\n\n- **clientTrackingId** (chosen identifier)\n- **Resource URI** for the SharePoint flow\n- **Time window** to check against\n\n### **Duplicate Detector Flow Logic**\n\nThe flow retrieves the run history and checks if the number of runs is greater than 1. If so, the same file was processed before:\n\nthe http response will have the below status\n\nif(greater(length(body('HTTP-Get\\_History')['value']), 1), '400', '200')\n\n### **Important Notes**\n\n- The **Duplicate Detector Flow** must have **Logic Apps Standard Reader (Preview)** permission for the resource group.\n- The solution is built on **Logic App Standard**, but it can be adapted for **Logic App Consumption** or **Power Automate**.\n\n### **GitHub Link**\n\n[logicappfiles/Logic Apps Duplicate Detector at main · mbarqawi/logicappfiles](https://github.com/mbarqawi/logicappfiles/tree/main/Logic%20Apps%20Duplicate%20Detector)\n\nPublished Nov 17, 2025\n\nVersion 1.0\n\n[azure](/tag/azure?nodeId=board%3AIntegrationsonAzureBlog)\n\n[logic apps](/tag/logic%20apps?nodeId=board%3AIntegrationsonAzureBlog)\n\n[logic apps standard](/tag/logic%20apps%20standard?nodeId=board%3AIntegrationsonAzureBlog)\n\n[!\\[Mohammed_Barqawi&#x27;s avatar\\](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/dS02Njc2ODktMjQwNjYwaThENDU5RjI5NEVBMjU3REQ?image-dimensions=50x50)](/users/mohammed_barqawi/667689) [Mohammed_Barqawi](/users/mohammed_barqawi/667689) ![Icon for Microsoft rank](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/cmstNC05WEo0blc?image-dimensions=100x16&amp;constrain-image=true)Microsoft\n\nJoined May 14, 2020\n\n[View Profile](/users/mohammed_barqawi/667689)\n\n/category/azure/blog/integrationsonazureblog [Azure Integration Services Blog](/category/azure/blog/integrationsonazureblog) Follow this blog board to get notified when there's new activity",
  "OutputDir": "_community",
  "FeedName": "Microsoft Tech Community",
  "Author": "Mohammed_Barqawi",
  "FeedUrl": "https://techcommunity.microsoft.com/t5/s/gxcuf89792/rss/Category?category.id=Azure",
  "Tags": [],
  "ProcessedDate": "2025-11-17 09:04:58",
  "Title": "Duplicate detection in Logic App Trigger",
  "FeedLevelAuthor": "rss.livelink.threads-in-node"
}
