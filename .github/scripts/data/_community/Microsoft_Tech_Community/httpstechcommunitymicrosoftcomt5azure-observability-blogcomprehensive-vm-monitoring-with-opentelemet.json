{
  "Title": "Comprehensive VM Monitoring with OpenTelemetry performance counters",
  "Description": "Monitoring virtual machines often requires multiple tools and manual investigation. You may see high CPU or memory usage, but identifying the process responsible usually means signing in to the VM and running diagnostic commands.\n\nAzure Monitor already provides Guest OS performance monitoring through Log Analytics‑based metrics, trusted for its flexibility, deep integration, and advanced analytics, including custom performance counters, extended retention, and powerful KQL queries. Many customers use LA‑based metrics to correlate performance with other log data sources and build rich operational insights.\n\nToday, we’re excited to introduce a new preview capability: [OpenTelemetry (OTel) Guest OS metrics](https://aka.ms/otelmetrics) for VMs and Arc servers, with metric data stored in the metrics-optimized [Azure Monitor Workspace (AMW)](http://aka.ms/amw-overview). OTel provides a standards‑based pipeline with a unified schema, richer system and process counters, and streamlined integration with open‑source and cloud‑native observability tooling. It’s designed for simpler onboarding, cost‑efficient metric storage, and more granular visibility into what’s happening inside the VM.\n\n###### **What are OpenTelemetry Guest OS metrics**\n\nOTel Guest OS metrics are system and process‑level performance counters collected from inside a VM. This includes CPU, memory, disk I/O, network, and per‑process details such as CPU percent, memory percent, uptime, and thread count. This level of visibility helps you diagnose issues without signing into the VM.\n\n###### **Why They Matter**\n\nAzure Monitor continues to support Guest OS metrics through Log Analytics, and you now have the option to use OTel‑based Guest OS metrics. OTel offers richer insights, faster query performance, and lower cost, and is a good fit when you want a modern, standards‑based pipeline with deeper system visibility.\n\n###### **Key Benefits**\n\n| **Benefit** | **Description** | | --- | --- | | Unified data model | Consistent metric names and schema across Windows and Linux for easier, reusable queries and dashboards | | Richer, simplified counters | More system and process metrics (e.g., per‑process CPU, memory, disk I/O) and consolidation of legacy counters into clearer OTel metrics. | | Easy onboarding | Collect OTel metrics with minimal setup. | | Flexible visualization | Use the Azure portal, Metrics Explorer, or Azure Monitor Dashboards with Grafana. | | Cost‑efficient performance | Store metrics in Azure Monitor Workspace instead of Log Analytics ingestion for lower cost and faster queries. |\n\n###### **When to use LA‑based metrics (GA) vs OTel‑based metrics (Preview)**\n\n| **LA-based metrics (GA)** | **OTel-based metrics (Preview)** | | --- | --- | | <ul><br><li>Custom performance counters or extended retention</li><br><br><li>Advanced KQL analytics and log‑metric correlation</li><br><br><li>A mature, fully supported pipeline for operational analytics</li><br><br></ul> | <ul><br><li>A standards‑based, unified schema across platforms</li><br><br><li>Easier onboarding and broader system/process coverage</li><br><br><li>Cost‑efficient metric storage with improved query performance</li><br><br></ul> |\n\nWe recommend evaluating your requirements to determine which approach best fits your needs. LA-based metrics remain the foundation for customers who need advanced analytics and correlation, while OTel-based metrics open new possibilities for modern VM observability.\n\n#### Onboarding VMs to OpenTelemetry performance counters\n\nOnboarding your virtual machines and Arc servers to OpenTelemetry-based counters is now both cost-efficient and easier than ever. With the new onboarding experience, you can enable guest-level metrics using a lightweight, standards-based OTel pipeline with no complex setup required. These system-level counters are available at no additional cost and provide deep visibility into CPU, memory, disk, network, and process activity from inside the VM. Azure Monitor automatically configures your Data Collection Rules (DCRs) to route these OpenTelemetry counters through the Monitor pipeline, ensuring you get full monitoring coverage with minimal configuration.\n\n![]()*Single-VM onboarding screen showing the option to enable OpenTelemetry-based counters*\n\nAdditionally, you can also onboard your VMs at scale using the new [Monitoring Coverage experience](https://learn.microsoft.com/en-us/azure/azure-monitor/fundamentals/monitoring-coverage) or [Essential Machine Management (EMM)](https://aka.ms/EssentialMachineManagement). For teams managing large fleets of virtual machines, these capabilities turn onboarding into a one-click operation, eliminating the need to repeat manual steps for each machine. This is especially valuable in enterprises or environments with dynamic VM creation, where maintaining consistent visibility across every machine is critical for performance, compliance, and troubleshooting.\n\n![]()*Monitoring Coverage screen showing the ability to enable OpenTelemetry-based counters at scale*\n\nAfter onboarding at scale, you can further customize your monitoring. By editing the Data Collection Rule (DCR) created during onboarding, you can collect additional metrics and logs, then automatically apply those updates across all VMs associated with that DCR. This allows you to extend monitoring coverage beyond the default counters and adapt to your observability as your environment evolves.\n\n#### New Capabilities Powered by OpenTelemetry\n\n###### **New VM monitoring experience powered by OpenTelemetry (preview)**\n\nWe're excited to announce the [public preview of the enhanced monitoring experience for Azure Virtual Machines (VMs) and Arc servers](https://aka.ms/vmiv2-azure-update). This redesign brings comprehensive monitoring capabilities in a single, streamlined view, helping you more efficiently observe, diagnose, and optimize your virtual machines.\n\nThe new experience offers two levels of insight within one unified interface:\n\n- **Basic view (Host OS based)**: Available for all Azure VMs with no configuration required. This view surfaces key host level metrics including CPU, disk, and network performance for quick health checks.\n- **Detailed view (Guest OS based** **)**: Requires a simple onboarding step and is available at no additional cost. Azure Monitor already provides a GA detailed view powered by Log Analytics based Guest OS metrics, and this remains fully supported. This preview option is powered by OTel Guest OS metrics to provide expanded metric coverage and the new, streamlined monitoring experience introduced above\n\n![]()\n\n*Detailed view (Guest OS based with OTel) and enhanced monitoring experience for VMs*\n\nYou can access the new experience directly in the Azure portal under **Virtual Machine → Monitoring → Insights**.\n\n###### **Building Custom Dashboards with Azure Monitor Dashboards in Grafana**\n\nAzure Monitor Dashboards with Grafana lets you build custom visualizations on top of OTel Guest OS metrics. In addition to the out-of-the-box VM monitoring experience, you can create tailored dashboards to analyze the specific system or process-level signals that matter most to your workloads.\n\nFor example, you can build a dashboard that breaks down CPU, memory, disk, and network usage at the process level. This helps you quickly identify unusual behavior or resource hotspots without signing in to the VM. [Learn more](https://learn.microsoft.com/en-us/azure/azure-monitor/vm/vminsights-opentelemetry#additional-metrics).\n\n![]()*Custom Grafana dashboard to analyze process-level signals (CPU, memory, disk)*\n\n###### **Query-based metric alerts (preview)**\n\nAzure Monitor now supports PromQL-based metric alerts for OTel metrics stored in Azure Monitor Workspace, enabling flexible and powerful query-driven alerting.\n\nFor example, you can configure an alert to notify you when a specific process shows unusual CPU usage, allowing you to detect issues earlier and take action before they impact users.\n\n![]()\n\n*PromQL based metric alert that triggers when the backupdatawarehouse.exe process exceeds 80% memory usage*\n\n#### Get Started\n\nExplore the new OpenTelemetry-powered experiences today:\n\n- [Get started with VM Monitoring (Preview)](https://learn.microsoft.com/en-us/azure/azure-monitor/vm/vminsights-opentelemetry)\n- [Use Azure Monitor Dashboards with Grafana](https://learn.microsoft.com/en-us/azure/azure-monitor/visualize/visualize-use-grafana-dashboards)\n- [Query Based Metric Alerts Overview (Preview)](https://learn.microsoft.com/en-us/azure/azure-monitor/alerts/alerts-query-based-metric-alerts-overview)\n\nWe are also starting a limited public preview of application monitoring with OpenTelemetry signal collection from Azure VMs, VMSS and Arc Server. [Learn more](https://techcommunity.microsoft.com/t5/aka.ms/AzureMonitorOTelPreview).\n\nTogether, these previews mark a major step toward a unified and open monitoring platform designed to make observability simpler, faster, and aligned with open standards across every layer of your environment.",
  "Tags": [],
  "EnhancedContent": "Monitoring virtual machines often requires multiple tools and manual investigation. You may see high CPU or memory usage, but identifying the process responsible usually means signing in to the VM and running diagnostic commands.\n\nAzure Monitor already provides Guest OS performance monitoring through Log Analytics‑based metrics, trusted for its flexibility, deep integration, and advanced analytics, including custom performance counters, extended retention, and powerful KQL queries. Many customers use LA‑based metrics to correlate performance with other log data sources and build rich operational insights.\n\nToday, we’re excited to introduce a new preview capability: [OpenTelemetry (OTel) Guest OS metrics](https://aka.ms/otelmetrics) for VMs and Arc servers, with metric data stored in the metrics-optimized [Azure Monitor Workspace (AMW)](http://aka.ms/amw-overview). OTel provides a standards‑based pipeline with a unified schema, richer system and process counters, and streamlined integration with open‑source and cloud‑native observability tooling. It’s designed for simpler onboarding, cost‑efficient metric storage, and more granular visibility into what’s happening inside the VM.\n\n###### **What are OpenTelemetry Guest OS metrics**\n\nOTel Guest OS metrics are system and process‑level performance counters collected from inside a VM. This includes CPU, memory, disk I/O, network, and per‑process details such as CPU percent, memory percent, uptime, and thread count. This level of visibility helps you diagnose issues without signing into the VM.\n\n###### **Why They Matter**\n\nAzure Monitor continues to support Guest OS metrics through Log Analytics, and you now have the option to use OTel‑based Guest OS metrics. OTel offers richer insights, faster query performance, and lower cost, and is a good fit when you want a modern, standards‑based pipeline with deeper system visibility.\n\n###### **Key Benefits**\n\n| **Benefit** | **Description** | | --- | --- | | Unified data model | Consistent metric names and schema across Windows and Linux for easier, reusable queries and dashboards | | Richer, simplified counters | More system and process metrics (e.g., per‑process CPU, memory, disk I/O) and consolidation of legacy counters into clearer OTel metrics. | | Easy onboarding | Collect OTel metrics with minimal setup. | | Flexible visualization | Use the Azure portal, Metrics Explorer, or Azure Monitor Dashboards with Grafana. | | Cost‑efficient performance | Store metrics in Azure Monitor Workspace instead of Log Analytics ingestion for lower cost and faster queries. |\n\n###### **When to use LA‑based metrics (GA) vs OTel‑based metrics (Preview)**\n\n| **LA-based metrics (GA)** | **OTel-based metrics (Preview)** | | --- | --- | | <ul><br><li>Custom performance counters or extended retention</li><br><br><li>Advanced KQL analytics and log‑metric correlation</li><br><br><li>A mature, fully supported pipeline for operational analytics</li><br><br></ul> | <ul><br><li>A standards‑based, unified schema across platforms</li><br><br><li>Easier onboarding and broader system/process coverage</li><br><br><li>Cost‑efficient metric storage with improved query performance</li><br><br></ul> |\n\nWe recommend evaluating your requirements to determine which approach best fits your needs. LA-based metrics remain the foundation for customers who need advanced analytics and correlation, while OTel-based metrics open new possibilities for modern VM observability.\n\n#### Onboarding VMs to OpenTelemetry performance counters\n\nOnboarding your virtual machines and Arc servers to OpenTelemetry-based counters is now both cost-efficient and easier than ever. With the new onboarding experience, you can enable guest-level metrics using a lightweight, standards-based OTel pipeline with no complex setup required. These system-level counters are available at no additional cost and provide deep visibility into CPU, memory, disk, network, and process activity from inside the VM. Azure Monitor automatically configures your Data Collection Rules (DCRs) to route these OpenTelemetry counters through the Monitor pipeline, ensuring you get full monitoring coverage with minimal configuration.\n\n*Single-VM onboarding screen showing the option to enable OpenTelemetry-based counters*\n\nAdditionally, you can also onboard your VMs at scale using the new [Monitoring Coverage experience](https://learn.microsoft.com/en-us/azure/azure-monitor/fundamentals/monitoring-coverage) or [Essential Machine Management (EMM)](https://aka.ms/EssentialMachineManagement). For teams managing large fleets of virtual machines, these capabilities turn onboarding into a one-click operation, eliminating the need to repeat manual steps for each machine. This is especially valuable in enterprises or environments with dynamic VM creation, where maintaining consistent visibility across every machine is critical for performance, compliance, and troubleshooting.\n\n*Monitoring Coverage screen showing the ability to enable OpenTelemetry-based counters at scale*\n\nAfter onboarding at scale, you can further customize your monitoring. By editing the Data Collection Rule (DCR) created during onboarding, you can collect additional metrics and logs, then automatically apply those updates across all VMs associated with that DCR. This allows you to extend monitoring coverage beyond the default counters and adapt to your observability as your environment evolves.\n\n#### New Capabilities Powered by OpenTelemetry\n\n###### **New VM monitoring experience powered by OpenTelemetry (preview)**\n\nWe're excited to announce the [public preview of the enhanced monitoring experience for Azure Virtual Machines (VMs) and Arc servers](https://aka.ms/vmiv2-azure-update). This redesign brings comprehensive monitoring capabilities in a single, streamlined view, helping you more efficiently observe, diagnose, and optimize your virtual machines.\n\nThe new experience offers two levels of insight within one unified interface:\n\n- **Basic view (Host OS based)**: Available for all Azure VMs with no configuration required. This view surfaces key host level metrics including CPU, disk, and network performance for quick health checks.\n- **Detailed view (Guest OS based** **)**: Requires a simple onboarding step and is available at no additional cost. Azure Monitor already provides a GA detailed view powered by Log Analytics based Guest OS metrics, and this remains fully supported. This preview option is powered by OTel Guest OS metrics to provide expanded metric coverage and the new, streamlined monitoring experience introduced above\n\n*Detailed view (Guest OS based with OTel) and enhanced monitoring experience for VMs*\n\nYou can access the new experience directly in the Azure portal under **Virtual Machine → Monitoring → Insights**.\n\n###### **Building Custom Dashboards with Azure Monitor Dashboards in Grafana**\n\nAzure Monitor Dashboards with Grafana lets you build custom visualizations on top of OTel Guest OS metrics. In addition to the out-of-the-box VM monitoring experience, you can create tailored dashboards to analyze the specific system or process-level signals that matter most to your workloads.\n\nFor example, you can build a dashboard that breaks down CPU, memory, disk, and network usage at the process level. This helps you quickly identify unusual behavior or resource hotspots without signing in to the VM. [Learn more](https://learn.microsoft.com/en-us/azure/azure-monitor/vm/vminsights-opentelemetry#additional-metrics).\n\n*Custom Grafana dashboard to analyze process-level signals (CPU, memory, disk)*\n\n###### **Query-based metric alerts (preview)**\n\nAzure Monitor now supports PromQL-based metric alerts for OTel metrics stored in Azure Monitor Workspace, enabling flexible and powerful query-driven alerting.\n\nFor example, you can configure an alert to notify you when a specific process shows unusual CPU usage, allowing you to detect issues earlier and take action before they impact users.\n\n*PromQL based metric alert that triggers when the backupdatawarehouse.exe process exceeds 80% memory usage*\n\n#### Get Started\n\nExplore the new OpenTelemetry-powered experiences today:\n\n- [Get started with VM Monitoring (Preview)](https://learn.microsoft.com/en-us/azure/azure-monitor/vm/vminsights-opentelemetry)\n- [Use Azure Monitor Dashboards with Grafana](https://learn.microsoft.com/en-us/azure/azure-monitor/visualize/visualize-use-grafana-dashboards)\n- [Query Based Metric Alerts Overview (Preview)](https://learn.microsoft.com/en-us/azure/azure-monitor/alerts/alerts-query-based-metric-alerts-overview)\n\nWe are also starting a limited public preview of application monitoring with OpenTelemetry signal collection from Azure VMs, VMSS and Arc Server. [Learn more](https://techcommunity.microsoft.com/t5/aka.ms/AzureMonitorOTelPreview).\n\nTogether, these previews mark a major step toward a unified and open monitoring platform designed to make observability simpler, faster, and aligned with open standards across every layer of your environment.\n\nUpdated Nov 17, 2025\n\nVersion 1.0\n\n[azure monitor](/tag/azure%20monitor?nodeId=board%3AAzureObservabilityBlog)\n\n[msignite](/tag/msignite?nodeId=board%3AAzureObservabilityBlog)\n\n[opentelemetry](/tag/opentelemetry?nodeId=board%3AAzureObservabilityBlog)\n\n[updates](/tag/updates?nodeId=board%3AAzureObservabilityBlog)\n\n[!\\[viviandiec&#x27;s avatar\\](https://techcommunity.microsoft.com/t5/s/gxcuf89792/m_assets/avatars/default/avatar-7.svg?image-dimensions=50x50)](/users/viviandiec/1873273) [viviandiec](/users/viviandiec/1873273) ![Icon for Microsoft rank](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/cmstNC05WEo0blc?image-dimensions=100x16&amp;constrain-image=true)Microsoft\n\nJoined May 22, 2023\n\n[View Profile](/users/viviandiec/1873273)\n\n/category/azure/blog/azureobservabilityblog [Azure Observability Blog](/category/azure/blog/azureobservabilityblog) Follow this blog board to get notified when there's new activity",
  "ProcessedDate": "2025-11-18 00:09:02",
  "FeedLevelAuthor": "rss.livelink.threads-in-node",
  "OutputDir": "_community",
  "FeedName": "Microsoft Tech Community",
  "FeedUrl": "https://techcommunity.microsoft.com/t5/s/gxcuf89792/rss/Category?category.id=Azure",
  "PubDate": "2025-11-17T23:17:57+00:00",
  "Link": "https://techcommunity.microsoft.com/t5/azure-observability-blog/comprehensive-vm-monitoring-with-opentelemetry-performance/ba-p/4470122",
  "Author": "viviandiec"
}
