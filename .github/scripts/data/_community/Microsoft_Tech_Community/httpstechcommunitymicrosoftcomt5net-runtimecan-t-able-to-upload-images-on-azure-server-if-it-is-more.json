{
  "FeedUrl": "https://techcommunity.microsoft.com/t5/s/gxcuf89792/rss/Category?category.id=dotnet",
  "Link": "https://techcommunity.microsoft.com/t5/net-runtime/can-t-able-to-upload-images-on-azure-server-if-it-is-more-than/m-p/4423541#M742",
  "Tags": [],
  "OutputDir": "_community",
  "FeedName": "Microsoft Tech Community",
  "ProcessedDate": "2025-08-08 15:42:09",
  "Title": "Can't able to Upload Images on Azure Server if it is more than 128KB",
  "FeedLevelAuthor": "rss.livelink.threads-in-node",
  "EnhancedContent": "Hi Everyone ,\n\nI am trying to upload image and store  but when i do it in my local server its working fine but when i push the same code in server i am getting entity  too large\n\nI reached out microsoft support they are telling that \"The content type format is supposed to be image as example given to upload the image file otherwise the application gateway will not understand the image and tries to accept only 128KB which is why the request is not accepted with Application Gateway.\n\n\"\n\nwhen i am debugging i am getting same content type = image/jpeg . Code snippet for storing\n\nprivate void SaveImage(int vendItemID) { try { string folderPath = @\"C:\\UploadedImages\\\"; Directory.CreateDirectory(folderPath);\n\nstring fileExtension = Path.GetExtension(fileUpload.FileName).ToLower(); string fileName = Path.GetFileNameWithoutExtension(fileUpload.FileName); string newImageName = string.Empty;\n\ndbCon.Server = \"\\*\\*\\*\"; dbCon.OpenConnection();\n\n// Optimize and compress the image byte[] optimizedImageBytes = CompressImageToTargetSize(fileUpload.PostedFile.InputStream, fileExtension);\n\n// Convert to Base64 string base64String = Convert.ToBase64String(optimizedImageBytes);\n\nusing (SqlCommand cmd = new SqlCommand(\"\\*\\*\\*\", dbCon.Cnn)) { cmd.CommandType = CommandType.StoredProcedure; AddImageParameters(cmd, vendItemID, fileName, fileExtension); cmd.Parameters.AddWithValue(\"@ImageBase64\", base64String);\n\nvar outputCodeParam = new SqlParameter(\"@ImageNewName\", SqlDbType.NVarChar, 200) { Direction = ParameterDirection.Output }; cmd.Parameters.Add(outputCodeParam);\n\ncmd.ExecuteNonQuery(); newImageName = outputCodeParam.Value.ToString(); }\n\nstring newFilePath = Path.Combine(folderPath, newImageName); File.WriteAllBytes(newFilePath, optimizedImageBytes);\n\nUpdateImagePath(newImageName, newFilePath); } catch (Exception ex) { ShowMessage(\"Error while saving image: \" + ex.Message, Color.Red); LogError(\"Image save failed\", ex); throw; } finally { dbCon.CloseConnection(); } }\n\nI also try to compress and change it to base 64 but its not working.\n\nKindly assist on what steps i need to take.\n\nThanks, Shahid\n\nNote :WebForm i m working on .",
  "Author": "Shahid_MA",
  "PubDate": "2025-06-13T07:17:54+00:00",
  "Description": "Hi Everyone ,\n\nI am trying to upload image and store but when i do it in my local server its working fine but when i push the same code in server i am getting entity too large\n\n![]()\n\nI reached out microsoft support they are telling that \"The content type format is supposed to be image as example given to upload the image file otherwise the application gateway will not understand the image and tries to accept only 128KB which is why the request is not accepted with Application Gateway.\n\n\"\n\n![]() when i am debugging i am getting same content type = image/jpeg . Code snippet for storing\n\nprivate void SaveImage(int vendItemID) { try { string folderPath = @\"C:\\UploadedImages\\\"; Directory.CreateDirectory(folderPath);\n\nstring fileExtension = Path.GetExtension(fileUpload.FileName).ToLower(); string fileName = Path.GetFileNameWithoutExtension(fileUpload.FileName); string newImageName = string.Empty;\n\ndbCon.Server = \"\\*\\*\\*\"; dbCon.OpenConnection();\n\n// Optimize and compress the image byte[] optimizedImageBytes = CompressImageToTargetSize(fileUpload.PostedFile.InputStream, fileExtension);\n\n// Convert to Base64 string base64String = Convert.ToBase64String(optimizedImageBytes);\n\nusing (SqlCommand cmd = new SqlCommand(\"\\*\\*\\*\", dbCon.Cnn)) { cmd.CommandType = CommandType.StoredProcedure; AddImageParameters(cmd, vendItemID, fileName, fileExtension); cmd.Parameters.AddWithValue(\"@ImageBase64\", base64String);\n\nvar outputCodeParam = new SqlParameter(\"@ImageNewName\", SqlDbType.NVarChar, 200) { Direction = ParameterDirection.Output }; cmd.Parameters.Add(outputCodeParam);\n\ncmd.ExecuteNonQuery(); newImageName = outputCodeParam.Value.ToString(); }\n\nstring newFilePath = Path.Combine(folderPath, newImageName); File.WriteAllBytes(newFilePath, optimizedImageBytes);\n\nUpdateImagePath(newImageName, newFilePath); } catch (Exception ex) { ShowMessage(\"Error while saving image: \" + ex.Message, Color.Red); LogError(\"Image save failed\", ex); throw; } finally { dbCon.CloseConnection(); } }\n\nI also try to compress and change it to base 64 but its not working.\n\nKindly assist on what steps i need to take.\n\nThanks, Shahid\n\nNote :WebForm i m working on ."
}
