{
  "FeedName": "Microsoft Tech Community",
  "OutputDir": "_community",
  "Link": "https://techcommunity.microsoft.com/t5/apps-on-azure-blog/azure-app-service-ai-scenarios-complete-sample-with-ai-foundry/ba-p/4473142",
  "PubDate": "2025-11-28T10:42:08+00:00",
  "Tags": [],
  "Title": "Azure App Service AI Scenarios: Complete Sample with AI Foundry Integration",
  "Description": "This sample application demonstrates how to implement various AI scenarios on Azure App Service using Azure AI Foundry. It provides production-ready code that you can integrate into your existing Flask applications by copying the AIPlaygroundCode package and following the integration steps.\n\n**Ideal for:** Developers looking to add AI capabilities to existing Flask applications, learn Azure AI Foundry integration patterns, and implement enterprise-grade AI features with minimal setup effort.\n\n## Key Scenarios Covered\n\n**Conversational AI**: Natural language processing with context awareness and session management **Reasoning Models**: Advanced problem-solving capabilities with step-by-step analytical thinking **Structured Output**: JSON-formatted responses with schema validation for system integration **Multimodal Processing**: Image analysis and audio transcription using vision and audio models **Enterprise Chat**: Retail-optimized AI assistant with customer service and business intelligence scenarios\n\n## Quick Start - Azure Deployment (Recommended)\n\n### Prerequisites\n\n- [Azure CLI](https://docs.microsoft.com/en-us/cli/azure/install-azure-cli) installed\n- [Azure Developer CLI (azd)](https://docs.microsoft.com/en-us/azure/developer/azure-developer-cli/install-azd) installed\n- Azure subscription with contributor access\n- **Optional:** [Azure AI Foundry](https://ai.azure.com)access with existing model deployments if you want to use existing endpoints:\n- **Chat/Reasoning/Image model:** gpt-4o-mini or similar for conversational AI, reasoning, and image analysis\n- **Audio model:** gpt-4o-mini-audio-preview or similar for audio transcription and processing\n- **Model Compatibility:** Use recommended models (gpt-4o-mini, gpt-35-turbo) to avoid deployment errors. Advanced models like gpt-4o may not be available in all regions\n\n### One-Command Deployment\n\n1. **Clone and Deploy**\n\n- git clone https://github.com/Azure-Samples/azure-app-service-ai-scenarios-integrated-sample.git\ncd azure-app-service-ai-scenarios-integrated-sample azd up\n\n### What to Expect During Deployment\n\nWhen you run azd up, you'll see these prompts:\n\n1. Enter a unique environment name: ‚Üí myai-demo\n2. **Subscription Selection** ‚Üí Use arrow keys to select\n3. **Resource Group** ‚Üí Create new or use existing\n4. Select a location to create the resource group in: e.g. East US\n5. Choose new (create AI services) or existing [new/existing]: e.g. existing\n6. Enter your project endpoint URL: e.g. https://your-project.services.ai.azure.com/models\n7. Enter your deployment name (gpt-4o-mini, gpt-4, gpt-35-turbo): e.g. gpt-4o-mini\n8. Enter your audio deployment name (gpt-4o-mini-audio-preview): e.g. gpt-4o-mini-audio-preview\n9. Select an Azure location to use: e.g. East US\n\n**Automatic steps**: Package building, RBAC setup, provisioning, deployment\n\n**Expected deployment time**: 4-5 minutes for complete provisioning and deployment\n\n1. **Azure AI Foundry Integration During Deployment**\nDuringazd up, you'll be prompted to configure AI setup:\n\n**Prompt: \"Do you have an existing Azure AI Foundry endpoint?\"**\n\n- **Answer \"existing\":**If you have existing Azure AI Foundry resources\n- You'll be asked to provide your endpoint URL (e.g., https://your-project.services.ai.azure.com/models)\n- Managed Identity role permissions will be automatically configured on your endpoint\n- You'll specify your existing model deployment names (chat model name e.g. gpt-4o-mini and audio model name e.g. gpt-4o-mini-audio-preview)\n- **Answer \"new\":**Creates new Azure AI Foundry resources automatically\n- Provisions new Azure AI Foundry project with required dependencies\n- Deploys chat and audio models with configurable names (defaults: gpt-4o-mini and gpt-4o-mini-audio-preview)\n- Configures Managed Identity integration and updates all required settings\n\n**Configuration is automatic** - all environment variables and permissions are set up during deployment!\n\n**Note:** You no longer need to manually configure AI settings or manage API keys - everything is handled automatically through Managed Identity integration.\n\n1. **Test Your Application**\n\n- Click \"üß™ Test Config\" to verify connection, then start using AI scenarios!\n- Refer to Usage Examples section below to test manually with sample scenarios\n\n### What Gets Deployed\n\n- **Azure App Service** (Basic B2 SKU) with Python 3.11\n- **Azure AI Foundry resources**(if \"new\" was chosen for existing endpoint):\n- AI Hub with cognitive services multi-service account\n- AI Project workspace with model deployments (gpt-4o-mini, gpt-4o-mini-audio-preview)\n- Storage account for AI project data and model artifacts\n- **Managed Identity Configuration**(automatic for both new and existing endpoints):\n- System-assigned managed identity enabled on App Service\n- \"Cognitive Services OpenAI User\" role assigned to access AI endpoints\n- \"AI Developer\" role assigned for Azure AI Foundry project access\n- All necessary environment variables configured automatically in App Service\n\n## Local Development Setup\n\n### Prerequisites\n\n- **Python 3.8+**\n- Check version: python --version\n- Download from: https://python.org/downloads/\n- **Azure AI Foundry**with deployed models\n- üìñ **Setup Guide**: [Create and deploy models in Azure AI Foundry](https://learn.microsoft.com/en-us/azure/ai-foundry/how-to/create-projects)\n- **Required models**: gpt-4o-mini (chat/reasoning/image) and gpt-4o-mini-audio-preview (audio)\n- *Alternative: Use azd up deployment method above for automatic setup*\n\n### Step-by-Step Installation & Setup\n\n#### Step 1: Install and Launch Application\n\n1. **Install Dependencies**\n- pip install -r requirements.txt\n1. **Launch Application**\n- python app.py\n\n**Verify Application is Running**\n\n- Open http://localhost:5000 in your browser\n- You should see the application homepage\n\n#### Step 2: Configure AI Settings\n\n1. **Open Settings Page**\n\n- - Navigate to http://localhost:5000/settings\n\n1. **Fill in Configuration Fields**\n\n- - **Azure AI Foundry Endpoint:** https://your-project.services.ai.azure.com/models\n- **API Key:** Your Azure AI Foundry API key *(Note: For production deployment, Managed Identity is automatically configured)*\n- **Chat Model Name:** Your deployed chat model name (e.g., gpt-4o-mini)\n- **Audio Model Name:** Your audio model deployment (e.g., gpt-4o-mini-audio-preview)\n\n1. **Save and Test Configuration**\n\n- - Click **Save** to store your settings\n- Click **\"üß™ Test Config\"** to verify connection\n- Wait for success confirmation message\n\n#### Step 3: Test Core Features\n\nRefer to the **Test Core Features** section below for detailed testing instructions with sample scenarios.\n\n**‚úÖ Success Indicators:**\n\n- Configuration test shows success message\n- Application loads at http://localhost:5000\n- Chat interface is accessible and functional\n\n## Test Core Features\n\n*Note: These tests work for both local development and Azure deployment setups.*\n\n### Step-by-Step Testing Guide\n\n#### 1. Access Chat Interface\n\n- Go to http://localhost:5000\n- Click the floating AI chat button (bottom-right corner)\n- Verify the chat popup opens correctly\n\n#### 2. Test Basic Conversational AI\n\n**Test these exact messages** (copy and paste):\n\n1. **Identity Test**:\n- **Message**: \"Who are you and what can you help with?\"\n- **Expected**: AI identifies as Enterprise AI Assistant, explains capabilities\n2. **Product Inquiry Test**:\n- **Message**: \"Tell me about features and price for Pro Gaming X1\"\n- **Expected**: Relevant product information response\n3. **Customer Service Test**:\n- **Message**: \"What is the return policy and how do I process a customer refund?\"\n- **Expected**: Helpful customer service guidance\n\n#### 3. Test Multimodal Features\n\n**Image Analysis Testing**:\n\n1. **Type message**: \"Analyze this laptop and tell me its specifications\"\n2. **Click üìé button** to upload file\n3. **Select file**: tests/test\\_inputs/laptop.jpeg\n4. **Send message**\n5. **Expected**: AI describes laptop specifications from the image\n\n**Audio Processing Testing**:\n\n1. **Type message**: \"Transcribe this customer service call\"\n2. **Click üìé button** to upload file\n3. **Select file**: tests/test\\_inputs/test\\_customer\\_service\\_audio.mp3\n4. **Send message**\n5. **Expected**: AI provides transcription of the audio content\n\n#### 4. Test Advanced Reasoning Capabilities\n\n**Complex Business Analysis Testing**: **Message**: \"Zava's sales have dropped 15% this quarter. Walk me through a systematic approach to identify root causes and develop an action plan.\" **Expected**: Structured analytical approach with step-by-step reasoning process\n\n**‚úÖ Success Indicators:**\n\n- All chat responses are relevant and helpful\n- Image analysis identifies laptop features accurately\n- Audio transcription provides readable text from audio file\n- Reasoning responses show structured analytical thinking\n- No error messages in chat interface\n- File uploads complete successfully\n- Responses may show truncation message for long content (this is normal)\n- Configuration test shows green success message\n\n**üìÅ Sample Test Files**: Browse tests/test\\_inputs/ folder for additional sample images and audio files to test multimodal capabilities.\n\n## Integration with Existing Applications\n\nThis section provides guidance for integrating AI capabilities into your existing Flask applications. Note that this requires additional Azure resource setup and dependency management.\n\n### Prerequisites for Integration\n\n- Azure AI Foundry endpoint with model deployments:\n- Chat/reasoning/image model (e.g., gpt-4o-mini)\n- Audio model (e.g., gpt-4o-mini-audio-preview)\n\n### Step 1: Set Up Azure Resources\n\n**Configure App Service Managed Identity for Azure AI Foundry:**\n- # Enable system-assigned managed identity for your App Service\naz webapp identity assign --name --resource-group\n\n# Grant required roles to your App Service for Azure AI Foundry access\naz role assignment create \\ --role \"Cognitive Services OpenAI User\" \\ --assignee \\ --scope\n\n# Grant AI Developer role for Azure AI Foundry project access\naz role assignment create \\ --role \"Azure AI Developer\" \\ --assignee \\ --scope\n\n### Step 2: Copy and Merge Files\n\n**Copy the AIPlaygroundCode folder:**\n- cp -r AIPlaygroundCode/ /path/to/your-existing-app/\n\n**Merge Dependencies (Important!):**\n\n- **requirements.txt:** Merge the dependencies from this sample's requirements.txt with your existing requirements file\n- **wsgi.py:** If you have an existing wsgi.py, ensure it properly references your Flask app instance\n- **app.py routes:** Copy the AI-related routes from the sample app.py to your existing Flask application\n\n**Example requirements.txt merge:**\n- # Your existing dependencies\nflask==2.3.3\n# ... your other dependencies\n\n# Add these AI-related dependencies from the sample\nazure-identity==1.15.0 openai==1.35.13 pillow==10.0.0 pydub==0.25.1\n\n### Step 3: Update App Service Configuration\n\n**Add AI configuration as App Service environment variables:**\n- # Add Azure AI Foundry configuration as App Service environment variables\naz webapp config appsettings set --name --resource-group --settings \\ AZURE\\_INFERENCE\\_ENDPOINT=\"https://your-project-name.region.models.ai.azure.com/models\" \\ AZURE\\_AI\\_CHAT\\_DEPLOYMENT\\_NAME=\"gpt-4o-mini\" \\ AZURE\\_AI\\_AUDIO\\_DEPLOYMENT\\_NAME=\"gpt-4o-mini-audio-preview\" \\ AZURE\\_CLIENT\\_ID=\"system-assigned-managed-identity\"\n\n### Step 4: Add AI Settings Route to Your Flask App\n\nAdd the settings route to your existing Flask application:\n- # Add these imports to your existing app.py\nfrom AIPlaygroundCode.config import get\\_model\\_config, update\\_model\\_config, is\\_configured\n\n# Add AI configuration routes\n@app.route('/settings') def settings(): from flask import render\\_template config = get\\_model\\_config() return render\\_template('AIPlaygroundCode/templates/settings.html', config=config)\n\n@app.route('/settings', methods=['POST']) def update\\_settings():\n# Copy the complete settings update logic from the sample app.py\n# This includes form handling, validation, and configuration updates\npass\n\n### Step 5: Add AI Interface to Your Application\n\nIntegrate the AI chat interface into your existing application pages by copying specific sections from AIPlaygroundCode/templates/retail\\_home.html:\n\n**Look for these markers in retail\\_home.html and copy to your templates:**\n\n1. **HTML Structure**(copy the section marked with):\n- 1. **CSS Styles**(copy the section marked with/\\* AI Chat Styles Start \\*/):\n- 1. **JavaScript Functions**(copy the section marked with// AI Chat JavaScript Start):\n- **Integration Steps:**\n\n- Copy each marked section from retail\\_home.html to your main application template\n- Ensure the chat button appears on your pages (floating bottom-right)\n- Test the chat interface opens and can send messages\n- Verify file upload functionality works for multimodal features\n\n#### What You Get After Integration:\n\n- **New Route:** /settings for AI configuration\n- **Settings Page:** Self-service configuration interface for Azure AI Foundry endpoints\n- **AI Chat Interface:** Integrated chat functionality within your application pages\n- **Secure Configuration:** Managed Identity authentication with Azure AI Foundry (no API keys required)\n\n## Resource Clean-up\n\nTo prevent incurring unnecessary charges, it's important to clean up your Azure resources after completing your work with the application.\n\n### When to Clean Up\n\n- After you have finished testing or demonstrating the application\n- If the application is no longer needed or you have transitioned to a different project\n- When you have completed development and are ready to decommission the application\n\n### Removing Azure Resources\n\nTo delete all associated resources and shut down the application, execute the following command:\n- azd down\n\nPlease note that this process may take up to 10 minutes to complete.\n\n**Alternative:** You can delete the resource group directly from the Azure Portal to clean up resources.\n\n## Guidance\n\n### Costs\n\nPricing varies per region and usage, so it isn't possible to predict exact costs for your usage. The majority of Azure resources used in this infrastructure are on usage-based pricing tiers.\n\nYou can try the [Azure pricing calculator](https://azure.microsoft.com/pricing/calculator) for the resources:\n\n**Core Resources (always deployed):**\n\n- **Azure App Service:** Basic B2 tier with 3.5 GB RAM, 10 GB storage. [Pricing](https://azure.microsoft.com/pricing/details/app-service/windows/)\n\n**Azure AI Foundry Resources (deployed when \"No\" is chosen for existing endpoint):**\n\n- **Azure AI Services:** Multi-service account with consumption-based pricing for model usage (tokens). [Pricing](https://azure.microsoft.com/pricing/details/cognitive-services/openai-service/)\n- **Azure AI Hub:** Management layer for AI projects (minimal cost)\n- **Azure Storage Account:** Standard LRS for AI project data and model artifacts (minimal cost). [Pricing](https://azure.microsoft.com/pricing/details/storage/)\n\n**Cost-saving tip:** Choose \"Yes\" when prompted about existing Azure AI Foundry endpoint to reuse existing resources and avoid duplicate charges.\n\n**Cost Management:** To avoid unnecessary costs, remember to clean up your resources when no longer needed by running azd down or deleting the resource group in the Azure Portal.\n\n### Security Guidelines\n\nThis template uses [Managed Identity](https://learn.microsoft.com/entra/identity/managed-identities-azure-resources/overview) for secure authentication between Azure services.\n\n**Additional Security Measures to Consider:**\n\n- Enable [Microsoft Defender for Cloud](https://learn.microsoft.com/azure/defender-for-cloud/) to secure your Azure resources\n- Implement network security with [Virtual Networks](https://learn.microsoft.com/azure/app-service/networking-features) for App Service\n- Configure [Azure Web Application Firewall](https://learn.microsoft.com/azure/web-application-firewall/) for additional protection\n- Enable [GitHub secret scanning](https://docs.github.com/code-security/secret-scanning/about-secret-scanning) in your repository\n\n**Important Security Notice** This template has been built to showcase Azure AI services and tools. We strongly recommend implementing additional security features before using this code in production environments.\n\n## Support and Feedback\n\n- **Issues:** Report bugs or request features via [GitHub Issues](https://github.com/Azure-Samples/azure-app-service-ai-scenarios-integrated-sample/issues)\n- **Questions:** Use [GitHub Discussions](https://github.com/Azure-Samples/azure-app-service-ai-scenarios-integrated-sample/discussions) for implementation questions\n- **Rate the Sample:** Star the [repository](https://github.com/Azure-Samples/azure-app-service-ai-scenarios-integrated-sample) if this helped your project\n\n## References\n\n### **Implementation Guides**\n\n- **[GitHub Repository](https://github.com/Azure-Samples/azure-app-service-ai-scenarios-integrated-sample)** - Complete implementation guide and source code\n- **[Project Structure](https://github.com/Azure-Samples/azure-app-service-ai-scenarios-integrated-sample/blob/main/docs/PROJECT_STRUCTURE.md)** - Learn the high-level constructs and architecture\n- **[Configuration Guide](https://github.com/Azure-Samples/azure-app-service-ai-scenarios-integrated-sample/blob/main/docs/CONFIGURATION_GUIDE.md)** - Understand configuration options and environment setup\n- **[Testing Guide](https://github.com/Azure-Samples/azure-app-service-ai-scenarios-integrated-sample/blob/main/docs/TESTING_GUIDE.md)** - Learn how to test the application locally and on Azure\n- **[FAQ & Troubleshooting](https://github.com/Azure-Samples/azure-app-service-ai-scenarios-integrated-sample/blob/main/docs/FAQ_and_troubleshooting.md)** - Frequently asked questions and troubleshooting guide\n\n### **Azure AI Foundry Documentation**\n\n- **[Chat Completions](https://learn.microsoft.com/en-us/azure/ai-foundry/foundry-models/how-to/use-chat-completions?tabs=python)** - Basic conversational AI implementation\n- **[Reasoning Models](https://learn.microsoft.com/en-us/azure/ai-foundry/foundry-models/how-to/use-chat-reasoning?tabs=openai&pivots=programming-language-python)** - Advanced reasoning capabilities\n- **[Multimodal AI](https://learn.microsoft.com/en-us/azure/ai-foundry/foundry-models/how-to/use-chat-multi-modal?pivots=programming-language-python)** - Image and audio processing\n- **[Structured Outputs](https://learn.microsoft.com/en-us/azure/ai-foundry/foundry-models/how-to/use-structured-outputs?pivots=programming-language-python)** - JSON schema validation",
  "Author": "Nitesh_Jain",
  "ProcessedDate": "2025-11-28 11:04:36",
  "FeedLevelAuthor": "rss.livelink.threads-in-node",
  "FeedUrl": "https://techcommunity.microsoft.com/t5/s/gxcuf89792/rss/Category?category.id=Azure",
  "EnhancedContent": "This sample application demonstrates how to implement various AI scenarios on Azure App Service using Azure AI Foundry. It provides production-ready code that you can integrate into your existing Flask applications by copying the¬†AIPlaygroundCode¬†package and following the integration steps.\n\n**Ideal for:**¬†Developers looking to add AI capabilities to existing Flask applications, learn Azure AI Foundry integration patterns, and implement enterprise-grade AI features with minimal setup effort.\n\n## Key Scenarios Covered\n\n**Conversational AI**: Natural language processing with context awareness and session management **Reasoning Models**: Advanced problem-solving capabilities with step-by-step analytical thinking **Structured Output**: JSON-formatted responses with schema validation for system integration **Multimodal Processing**: Image analysis and audio transcription using vision and audio models **Enterprise Chat**: Retail-optimized AI assistant with customer service and business intelligence scenarios\n\n## Quick Start - Azure Deployment (Recommended)\n\n### Prerequisites\n\n- [Azure CLI](https://docs.microsoft.com/en-us/cli/azure/install-azure-cli)¬†installed\n- [Azure Developer CLI (azd)](https://docs.microsoft.com/en-us/azure/developer/azure-developer-cli/install-azd)¬†installed\n- Azure subscription with contributor access\n- **Optional:**¬†[Azure AI Foundry](https://ai.azure.com)¬†access with existing model deployments if you want to use existing endpoints:\n- **Chat/Reasoning/Image model:**¬†gpt-4o-mini¬†or similar for conversational AI, reasoning, and image analysis\n- **Audio model:**¬†gpt-4o-mini-audio-preview¬†or similar for audio transcription and processing\n- **Model Compatibility:**¬†Use recommended models (gpt-4o-mini,¬†gpt-35-turbo) to avoid deployment errors. Advanced models like¬†gpt-4o¬†may not be available in all regions\n\n### One-Command Deployment\n\n1. **Clone and Deploy**\n\n``` git clone https://github.com/Azure-Samples/azure-app-service-ai-scenarios-integrated-sample.git cd azure-app-service-ai-scenarios-integrated-sample azd up ```\n\n### What to Expect During Deployment\n\nWhen you run¬†azd up, you'll see these prompts:\n\n1. Enter a unique environment name:¬†‚Üí¬†myai-demo\n2. **Subscription Selection**¬†‚Üí Use arrow keys to select\n3. **Resource Group**¬†‚Üí Create new or use existing\n4. Select a location to create the resource group in:¬†e.g.¬†East US\n5. Choose new (create AI services) or existing [new/existing]:¬†e.g.¬†existing\n6. Enter your project endpoint URL:¬†e.g.¬†https://your-project.services.ai.azure.com/models\n7. Enter your deployment name (gpt-4o-mini, gpt-4, gpt-35-turbo):¬†e.g.¬†gpt-4o-mini\n8. Enter your audio deployment name (gpt-4o-mini-audio-preview):¬†e.g.¬†gpt-4o-mini-audio-preview\n9. Select an Azure location to use:¬†e.g.¬†East US\n\n**Automatic steps**: Package building, RBAC setup, provisioning, deployment\n\n**Expected deployment time**: 4-5 minutes for complete provisioning and deployment\n\n1. **Azure AI Foundry Integration During Deployment**\nDuringazd up, you'll be prompted to configure AI setup:\n\n**Prompt: \"Do you have an existing Azure AI Foundry endpoint?\"**\n\n- **Answer \"existing\":**¬†If you have existing Azure AI Foundry resources\n- You'll be asked to provide your endpoint URL (e.g.,¬†https://your-project.services.ai.azure.com/models)\n- Managed Identity role permissions will be automatically configured on your endpoint\n- You'll specify your existing model deployment names (chat model name e.g. gpt-4o-mini and audio model name e.g. gpt-4o-mini-audio-preview)\n- **Answer \"new\":**¬†Creates new Azure AI Foundry resources automatically\n- Provisions new Azure AI Foundry project with required dependencies\n- Deploys chat and audio models with configurable names (defaults:¬†gpt-4o-mini¬†and¬†gpt-4o-mini-audio-preview)\n- Configures Managed Identity integration and updates all required settings\n\n**Configuration is automatic**¬†- all environment variables and permissions are set up during deployment!\n\n**Note:**¬†You no longer need to manually configure AI settings or manage API keys - everything is handled automatically through Managed Identity integration.\n\n1. **Test Your Application**\n\n- Click \"üß™ Test Config\" to verify connection, then start using AI scenarios!\n- Refer to Usage Examples section below to test manually with sample scenarios\n\n### What Gets Deployed\n\n- **Azure App Service**¬†(Basic B2 SKU) with Python 3.11\n- **Azure AI Foundry resources**¬†(if \"new\" was chosen for existing endpoint):\n- AI Hub with cognitive services multi-service account\n- AI Project workspace with model deployments (gpt-4o-mini,¬†gpt-4o-mini-audio-preview)\n- Storage account for AI project data and model artifacts\n- **Managed Identity Configuration**¬†(automatic for both new and existing endpoints):\n- System-assigned managed identity enabled on App Service\n- \"Cognitive Services OpenAI User\" role assigned to access AI endpoints\n- \"AI Developer\" role assigned for Azure AI Foundry project access\n- All necessary environment variables configured automatically in App Service\n\n## Local Development Setup\n\n### Prerequisites\n\n- **Python 3.8+**\n- Check version:¬†python --version\n- Download from: https://python.org/downloads/\n- **Azure AI Foundry**¬†with deployed models\n- üìñ¬†**Setup Guide**:¬†[Create and deploy models in Azure AI Foundry](https://learn.microsoft.com/en-us/azure/ai-foundry/how-to/create-projects)\n- **Required models**:¬†gpt-4o-mini¬†(chat/reasoning/image) and¬†gpt-4o-mini-audio-preview¬†(audio)\n- *Alternative: Use¬†azd up¬†deployment method above for automatic setup*\n\n### Step-by-Step Installation & Setup\n\n#### Step 1: Install and Launch Application\n\n1. **Install Dependencies**\n\n``` pip install -r requirements.txt ```\n\n1. **Launch Application**\n\n``` python app.py ```\n\n**Verify Application is Running**\n\n- Open http://localhost:5000 in your browser\n- You should see the application homepage\n\n#### Step 2: Configure AI Settings\n\n1. **Open Settings Page**\n\n- - Navigate to http://localhost:5000/settings\n\n1. **Fill in Configuration Fields**\n\n- - **Azure AI Foundry Endpoint:**¬†https://your-project.services.ai.azure.com/models\n- **API Key:**¬†Your Azure AI Foundry API key¬†*(Note: For production deployment, Managed Identity is automatically configured)*\n- **Chat Model Name:**¬†Your deployed chat model name (e.g.,¬†gpt-4o-mini)\n- **Audio Model Name:**¬†Your audio model deployment (e.g.,¬†gpt-4o-mini-audio-preview)\n\n1. **Save and Test Configuration**\n\n- - Click¬†**Save**¬†to store your settings\n- Click¬†**\"üß™ Test Config\"**¬†to verify connection\n- Wait for success confirmation message\n\n#### Step 3: Test Core Features\n\nRefer to the¬†**Test Core Features**¬†section below for detailed testing instructions with sample scenarios.\n\n**‚úÖ Success Indicators:**\n\n- Configuration test shows success message\n- Application loads at http://localhost:5000\n- Chat interface is accessible and functional\n\n## Test Core Features\n\n*Note: These tests work for both local development and Azure deployment setups.*\n\n### Step-by-Step Testing Guide\n\n#### 1. Access Chat Interface\n\n- Go to http://localhost:5000\n- Click the floating AI chat button (bottom-right corner)\n- Verify the chat popup opens correctly\n\n#### 2. Test Basic Conversational AI\n\n**Test these exact messages**¬†(copy and paste):\n\n1. **Identity Test**:\n- **Message**:¬†\"Who are you and what can you help with?\"\n- **Expected**: AI identifies as Enterprise AI Assistant, explains capabilities\n2. **Product Inquiry Test**:\n- **Message**:¬†\"Tell me about features and price for Pro Gaming X1\"\n- **Expected**: Relevant product information response\n3. **Customer Service Test**:\n- **Message**:¬†\"What is the return policy and how do I process a customer refund?\"\n- **Expected**: Helpful customer service guidance\n\n#### 3. Test Multimodal Features\n\n**Image Analysis Testing**:\n\n1. **Type message**:¬†\"Analyze this laptop and tell me its specifications\"\n2. **Click üìé button**¬†to upload file\n3. **Select file**:¬†tests/test\\_inputs/laptop.jpeg\n4. **Send message**\n5. **Expected**: AI describes laptop specifications from the image\n\n**Audio Processing Testing**:\n\n1. **Type message**:¬†\"Transcribe this customer service call\"\n2. **Click üìé button**¬†to upload file\n3. **Select file**:¬†tests/test\\_inputs/test\\_customer\\_service\\_audio.mp3\n4. **Send message**\n5. **Expected**: AI provides transcription of the audio content\n\n#### 4. Test Advanced Reasoning Capabilities\n\n**Complex Business Analysis Testing**: **Message**:¬†\"Zava's sales have dropped 15% this quarter. Walk me through a systematic approach to identify root causes and develop an action plan.\" **Expected**: Structured analytical approach with step-by-step reasoning process\n\n**‚úÖ Success Indicators:**\n\n- All chat responses are relevant and helpful\n- Image analysis identifies laptop features accurately\n- Audio transcription provides readable text from audio file\n- Reasoning responses show structured analytical thinking\n- No error messages in chat interface\n- File uploads complete successfully\n- Responses may show truncation message for long content (this is normal)\n- Configuration test shows green success message\n\n**üìÅ Sample Test Files**: Browse¬†tests/test\\_inputs/¬†folder for additional sample images and audio files to test multimodal capabilities.\n\n## Integration with Existing Applications\n\nThis section provides guidance for integrating AI capabilities into your existing Flask applications. Note that this requires additional Azure resource setup and dependency management.\n\n### Prerequisites for Integration\n\n- Azure AI Foundry endpoint with model deployments:\n- Chat/reasoning/image model (e.g.,¬†gpt-4o-mini)\n- Audio model (e.g.,¬†gpt-4o-mini-audio-preview)\n\n### Step 1: Set Up Azure Resources\n\n**Configure App Service Managed Identity for Azure AI Foundry:**\n\n```\n# Enable system-assigned managed identity for your App Service\naz webapp identity assign --name <your-app-name> --resource-group <your-rg>\n\n# Grant required roles to your App Service for Azure AI Foundry access\naz role assignment create \\ --role \"Cognitive Services OpenAI User\" \\ --assignee <managed-identity-principal-id> \\ --scope <your-ai-foundry-resource-id>\n\n# Grant AI Developer role for Azure AI Foundry project access\naz role assignment create \\ --role \"Azure AI Developer\" \\ --assignee <managed-identity-principal-id> \\ --scope <your-ai-foundry-resource-id> ```\n\n### Step 2: Copy and Merge Files\n\n**Copy the AIPlaygroundCode folder:**\n\n``` cp -r AIPlaygroundCode/ /path/to/your-existing-app/ ```\n\n**Merge Dependencies (Important!):**\n\n- **requirements.txt:**¬†Merge the dependencies from this sample's¬†requirements.txt¬†with your existing requirements file\n- **wsgi.py:**¬†If you have an existing¬†wsgi.py, ensure it properly references your Flask app instance\n- **app.py routes:**¬†Copy the AI-related routes from the sample¬†app.py¬†to your existing Flask application\n\n**Example requirements.txt merge:**\n\n```\n# Your existing dependencies\nflask==2.3.3\n# ... your other dependencies\n\n# Add these AI-related dependencies from the sample\nazure-identity==1.15.0 openai==1.35.13 pillow==10.0.0 pydub==0.25.1 ```\n\n### Step 3: Update App Service Configuration\n\n**Add AI configuration as App Service environment variables:**\n\n```\n# Add Azure AI Foundry configuration as App Service environment variables\naz webapp config appsettings set --name <your-app-name> --resource-group <your-rg> --settings \\ AZURE_INFERENCE_ENDPOINT=\"https://your-project-name.region.models.ai.azure.com/models\" \\ AZURE_AI_CHAT_DEPLOYMENT_NAME=\"gpt-4o-mini\" \\ AZURE_AI_AUDIO_DEPLOYMENT_NAME=\"gpt-4o-mini-audio-preview\" \\ AZURE_CLIENT_ID=\"system-assigned-managed-identity\" ```\n\n### Step 4: Add AI Settings Route to Your Flask App\n\nAdd the settings route to your existing Flask application:\n\n```\n# Add these imports to your existing app.py\nfrom AIPlaygroundCode.config import get_model_config, update_model_config, is_configured\n\n# Add AI configuration routes\n@app.route('/settings') def settings(): from flask import render_template config = get_model_config() return render_template('AIPlaygroundCode/templates/settings.html', config=config)\n\n@app.route('/settings', methods=['POST']) def update_settings():\n# Copy the complete settings update logic from the sample app.py\n# This includes form handling, validation, and configuration updates\npass ```\n\n### Step 5: Add AI Interface to Your Application\n\nIntegrate the AI chat interface into your existing application pages by copying specific sections from¬†AIPlaygroundCode/templates/retail\\_home.html:\n\n**Look for these markers in retail\\_home.html and copy to your templates:**\n\n1. **HTML Structure**(copy the section marked with&lt;!-- AI Chat Interface Start --&gt;):\n\n``` <!-- AI Chat Interface Start --> <div id=\"chat-popup\" class=\"chat-popup\"> <!-- Complete chat popup structure --> </div> <!-- AI Chat Interface End --> ```\n\n1. **CSS Styles**(copy the section marked with/\\* AI Chat Styles Start \\*/):\n\n``` <style> /* AI Chat Styles Start */ .chat-popup { /* ... */ } /* AI Chat Styles End */ </style> ```\n\n1. **JavaScript Functions**(copy the section marked with// AI Chat JavaScript Start):\n\n``` <script> // AI Chat JavaScript Start function toggleChat() { /* ... */ } // AI Chat JavaScript End </script> ```\n\n**Integration Steps:**\n\n- Copy each marked section from¬†retail\\_home.html¬†to your main application template\n- Ensure the chat button appears on your pages (floating bottom-right)\n- Test the chat interface opens and can send messages\n- Verify file upload functionality works for multimodal features\n\n#### What You Get After Integration:\n\n- **New Route:**¬†/settings¬†for AI configuration\n- **Settings Page:**¬†Self-service configuration interface for Azure AI Foundry endpoints\n- **AI Chat Interface:**¬†Integrated chat functionality within your application pages\n- **Secure Configuration:**¬†Managed Identity authentication with Azure AI Foundry (no API keys required)\n\n## Resource Clean-up\n\nTo prevent incurring unnecessary charges, it's important to clean up your Azure resources after completing your work with the application.\n\n### When to Clean Up\n\n- After you have finished testing or demonstrating the application\n- If the application is no longer needed or you have transitioned to a different project\n- When you have completed development and are ready to decommission the application\n\n### Removing Azure Resources\n\nTo delete all associated resources and shut down the application, execute the following command:\n\n``` azd down ```\n\nPlease note that this process may take up to 10 minutes to complete.\n\n**Alternative:**¬†You can delete the resource group directly from the Azure Portal to clean up resources.\n\n## Guidance\n\n### Costs\n\nPricing varies per region and usage, so it isn't possible to predict exact costs for your usage. The majority of Azure resources used in this infrastructure are on usage-based pricing tiers.\n\nYou can try the¬†[Azure pricing calculator](https://azure.microsoft.com/pricing/calculator)¬†for the resources:\n\n**Core Resources (always deployed):**\n\n- **Azure App Service:**¬†Basic B2 tier with 3.5 GB RAM, 10 GB storage.¬†[Pricing](https://azure.microsoft.com/pricing/details/app-service/windows/)\n\n**Azure AI Foundry Resources (deployed when \"No\" is chosen for existing endpoint):**\n\n- **Azure AI Services:**¬†Multi-service account with consumption-based pricing for model usage (tokens).¬†[Pricing](https://azure.microsoft.com/pricing/details/cognitive-services/openai-service/)\n- **Azure AI Hub:**¬†Management layer for AI projects (minimal cost)\n- **Azure Storage Account:**¬†Standard LRS for AI project data and model artifacts (minimal cost).¬†[Pricing](https://azure.microsoft.com/pricing/details/storage/)\n\n**Cost-saving tip:**¬†Choose \"Yes\" when prompted about existing Azure AI Foundry endpoint to reuse existing resources and avoid duplicate charges.\n\n**Cost Management:**¬†To avoid unnecessary costs, remember to clean up your resources when no longer needed by running¬†azd down¬†or deleting the resource group in the Azure Portal.\n\n### Security Guidelines\n\nThis template uses¬†[Managed Identity](https://learn.microsoft.com/entra/identity/managed-identities-azure-resources/overview)¬†for secure authentication between Azure services.\n\n**Additional Security Measures to Consider:**\n\n- Enable¬†[Microsoft Defender for Cloud](https://learn.microsoft.com/azure/defender-for-cloud/)¬†to secure your Azure resources\n- Implement network security with¬†[Virtual Networks](https://learn.microsoft.com/azure/app-service/networking-features)¬†for App Service\n- Configure¬†[Azure Web Application Firewall](https://learn.microsoft.com/azure/web-application-firewall/)¬†for additional protection\n- Enable¬†[GitHub secret scanning](https://docs.github.com/code-security/secret-scanning/about-secret-scanning)¬†in your repository\n\n**Important Security Notice** This template has been built to showcase Azure AI services and tools. We strongly recommend implementing additional security features before using this code in production environments.\n\n## Support and Feedback\n\n- **Issues:**¬†Report bugs or request features via¬†[GitHub Issues](https://github.com/Azure-Samples/azure-app-service-ai-scenarios-integrated-sample/issues)\n- **Questions:**¬†Use¬†[GitHub Discussions](https://github.com/Azure-Samples/azure-app-service-ai-scenarios-integrated-sample/discussions)¬†for implementation questions\n- **Rate the Sample:**¬†Star the¬†[repository](https://github.com/Azure-Samples/azure-app-service-ai-scenarios-integrated-sample)¬†if this helped your project\n\n## References\n\n### **Implementation Guides**\n\n- **[GitHub Repository](https://github.com/Azure-Samples/azure-app-service-ai-scenarios-integrated-sample)**¬†- Complete implementation guide and source code\n- **[Project Structure](https://github.com/Azure-Samples/azure-app-service-ai-scenarios-integrated-sample/blob/main/docs/PROJECT_STRUCTURE.md)**¬†- Learn the high-level constructs and architecture\n- **[Configuration Guide](https://github.com/Azure-Samples/azure-app-service-ai-scenarios-integrated-sample/blob/main/docs/CONFIGURATION_GUIDE.md)**¬†- Understand configuration options and environment setup\n- **[Testing Guide](https://github.com/Azure-Samples/azure-app-service-ai-scenarios-integrated-sample/blob/main/docs/TESTING_GUIDE.md)**¬†- Learn how to test the application locally and on Azure\n- **[FAQ & Troubleshooting](https://github.com/Azure-Samples/azure-app-service-ai-scenarios-integrated-sample/blob/main/docs/FAQ_and_troubleshooting.md)**¬†- Frequently asked questions and troubleshooting guide\n\n### **Azure AI Foundry Documentation**\n\n- **[Chat Completions](https://learn.microsoft.com/en-us/azure/ai-foundry/foundry-models/how-to/use-chat-completions?tabs=python)**¬†- Basic conversational AI implementation\n- **[Reasoning Models](https://learn.microsoft.com/en-us/azure/ai-foundry/foundry-models/how-to/use-chat-reasoning?tabs=openai&amp;pivots=programming-language-python)**¬†- Advanced reasoning capabilities\n- **[Multimodal AI](https://learn.microsoft.com/en-us/azure/ai-foundry/foundry-models/how-to/use-chat-multi-modal?pivots=programming-language-python)**¬†- Image and audio processing\n- **[Structured Outputs](https://learn.microsoft.com/en-us/azure/ai-foundry/foundry-models/how-to/use-structured-outputs?pivots=programming-language-python)** - JSON schema validation\n\nUpdated Nov 28, 2025\n\nVersion 1.0\n\n[azure app service](/tag/azure%20app%20service?nodeId=board%3AAppsonAzureBlog)\n\n[python](/tag/python?nodeId=board%3AAppsonAzureBlog)\n\n[web apps](/tag/web%20apps?nodeId=board%3AAppsonAzureBlog)\n\n[!\\[Nitesh_Jain&#x27;s avatar\\](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/dS0yNTM1MTUyLWZSbnBaag?image-coordinates=0%2C38%2C383%2C421&amp;image-dimensions=50x50)](/users/nitesh_jain/2535152) [Nitesh_Jain](/users/nitesh_jain/2535152) ![Icon for Microsoft rank](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/cmstNC05WEo0blc?image-dimensions=100x16&amp;constrain-image=true)Microsoft\n\nJoined June 20, 2024\n\n[View Profile](/users/nitesh_jain/2535152)\n\n/category/azure/blog/appsonazureblog [Apps on Azure Blog](/category/azure/blog/appsonazureblog) Follow this blog board to get notified when there's new activity"
}
