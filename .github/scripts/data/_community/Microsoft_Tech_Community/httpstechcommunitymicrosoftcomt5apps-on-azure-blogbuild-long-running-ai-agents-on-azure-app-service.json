{
  "EnhancedContent": "## Learn how to build intelligent AI agents using Microsoft Agent Framework and Azure App Service with async patterns for complex, long-running workflows.\n\nThe AI landscape is evolving rapidly, and with the introduction of [Microsoft Agent Framework](https://learn.microsoft.com/en-us/agent-framework/overview/agent-framework-overview), developers now have a powerful platform for building sophisticated AI agents that go far beyond simple chat completions. These agents can execute complex, multi-step workflows with persistent state, conversation threads, and structured execution‚Äîcapabilities that are essential for production AI applications.\n\nToday, we're excited to share how **Azure App Service**¬†provides an excellent platform for running Agent Framework workloads, especially those involving long-running operations. Let's explore why App Service is a great choice and walk through a practical example.\n\n## The Challenge: Long-Running Agent Framework Flows\n\nAgent Framework enables AI agents to perform complex tasks that can take significant time to complete:\n\n- **Multi-turn reasoning**: Iterative calls to large language models (LLMs) where each response informs the next prompt\n- **Tool integration**: Function calling and external API interactions for real-time data\n- **Complex processing**: Budget calculations, content optimization, multi-phase generation\n- **Persistent context**: Maintaining conversation state across multiple interactions\n\nThese workflows often take **30 seconds to several minutes** to complete‚Äîfar too long for synchronous HTTP request handling. Traditional web applications run into several constraints:\n\n**‚è±Ô∏è Timeout Limitations**: HTTP requests have timeout constraints (typically 30-230 seconds)\n\n**‚ö†Ô∏è Connection Issues**: Clients may disconnect due to network interruptions or browser navigation\n\n**üìà Scalability Concerns**: Long-running requests block worker threads and don't survive app restarts\n\n**üéØ Poor User Experience**: Users see endless loading spinners with no progress feedback\n\n## The Solution: Async Pattern with App Service\n\nAzure App Service provides a robust solution through the **asynchronous request-reply pattern** combined with background processing:\n\n1. **API immediately returns**¬†(202 Accepted) with a task ID\n2. **Background worker**¬†processes the Agent Framework workflow\n3. **Client polls for status**¬†with real-time progress updates\n4. **Durable state storage**¬†(Cosmos DB) maintains task status and results\n\nThis pattern ensures:\n\n‚úÖ No HTTP timeouts‚ÄîAPI responds in milliseconds\n\n‚úÖ Resilient to restarts‚Äîstate survives deployments and scale events\n\n‚úÖ Progress tracking‚Äîusers see real-time updates (10%, 45%, 100%)\n\n‚úÖ Better scalability‚Äîbackground workers process independently\n\n## Sample Application: AI Travel Planner\n\nTo demonstrate this pattern, we've built a **Travel Planner** application that uses Agent Framework to generate detailed, multi-day travel itineraries. The agent performs complex reasoning including:\n\n- Researching destination attractions and activities\n- Optimizing daily schedules based on location proximity\n- Calculating detailed budget breakdowns\n- Generating personalized travel tips and recommendations\n\nThe entire application runs on a **single P0v4 App Service** with both the API and background worker combined‚Äîshowcasing App Service's flexibility for hosting diverse workload patterns in one deployment.\n\n### Key Architecture Components\n\n**Azure App Service (P0v4 Premium)**\n\n- Hosts both REST API and background worker in a single app\n- \"Always On\" feature keeps background worker running continuously\n- Managed identity for secure, credential-less authentication\n\n**Azure Service Bus**\n\n- Decouples API from long-running Agent Framework processing\n- Reliable message delivery with automatic retries\n- Dead letter queue for error handling\n\n**Azure Cosmos DB**\n\n- Stores task status with real-time progress updates\n- Automatic 24-hour TTL for cleanup\n- Rich query capabilities for complex itinerary data\n\n**Azure AI Foundry**\n\n- Hosts persistent agents with conversation threads\n- Structured execution with Agent Framework runtime\n- GPT-4o model for intelligent travel planning\n\n## Why Choose App Service for Agent Framework Workloads?\n\n### Alternative Architectures\n\nWhile there are several ways to run long-running AI workloads on Azure, each has different trade-offs:\n\n**Azure Durable Functions**\n\n‚úÖ Built-in orchestration for complex workflows\n\n‚úÖ Automatic state management and retries\n\n‚ö†Ô∏è Requires function-based programming model\n\n‚ö†Ô∏è Additional learning curve for orchestrations\n\n**Service Bus + Background Jobs (VMs/Container Apps)**\n\n‚úÖ Full control over processing environment\n\n‚úÖ Well-suited for very long-running processes (hours)\n\n‚ö†Ô∏è More infrastructure to manage (scaling, monitoring, updates)\n\n‚ö†Ô∏è Higher operational complexity\n\n**Azure Container Apps**\n\n‚úÖ Kubernetes-based flexibility without cluster management\n\n‚úÖ Advanced scaling options and environment control\n\n‚ö†Ô∏è Container image management required\n\n‚ö†Ô∏è More complex deployment pipeline\n\n### Why App Service Excels\n\n**üöÄ Simplicity & Speed**\n\n- Simple deployment‚Äîno container images or orchestrations needed\n- Combined API + background worker in one app reduces operational overhead\n- Built-in CI/CD with GitHub Actions, Azure DevOps, or deployment slots\n\n**üí∞ Cost-Effective**\n\n- Single (for example P0v4 Premium instance (~$100/month)) handles both API and worker and you can even scale down if needed\n- No separate infrastructure for background processing\n- Predictable monthly costs with no container registry or additional services\n\n**üîí Enterprise-Ready**\n\n- Managed identity with Azure AD authentication built-in\n- Net integration for private endpoints to Cosmos DB, Service Bus, AI Foundry\n- Custom domains, SSL certificates, and deployment slots out of the box\n\n**üìä Familiar Tooling**\n\n- Same monitoring, logging, and debugging tools developers already know\n- Application Insights integration for distributed tracing\n- Log streaming and remote debugging capabilities\n\n**üîÑ Adaptable to Change**\n\n- As Agent Framework evolves, App Service adapts seamlessly\n- Deploy new SDK versions with standard app deployment\n- No infrastructure changes required for framework updates\n\n### Rapid Innovation Support\n\nThe AI landscape is changing at an unprecedented pace. New models, frameworks, and capabilities are released constantly. **Azure App Service's managed platform ensures your applications can adapt quickly** without infrastructure rewrites:\n\n- **Framework Updates**: Deploy new Agent Framework SDK versions like any application update\n- **Model Upgrades**: Switch between GPT-4, GPT-4o, or future models with configuration changes\n- **Scaling Patterns**: Start with combined API+worker, split into separate apps as needs grow\n- **New Capabilities**: Integrate emerging AI services without changing hosting infrastructure\n\nApp Service handles the platform complexity so you can focus on building great AI experiences.\n\n## Visibility into Agent Framework Execution\n\nOne of the powerful features of using Azure AI Foundry with Agent Framework is the ability to **inspect agents and conversation threads directly in the Azure portal**. This provides valuable visibility into what's happening during execution.\n\n### Viewing Agents and Threads in Azure AI Foundry\n\nWhen you submit a travel plan request, the application creates an agent in Azure AI Foundry. You can navigate to your AI Foundry project in the Azure portal to see:\n\n**Agents**\n\n- The application creates an agent for each request\n- **Important**: Agents are \\*\\*automatically deleted\\*\\* after the itinerary is generated to keep your project clean\n- **Tip**: You'll need to be quick! Navigate to Azure AI Foundry right after submitting a request to see the agent in action\n- Once processing completes, the agent is removed as part of the cleanup process\n\n**Conversation Threads**\n\n- Unlike agents, **threads persist**¬†even after the agent completes\n- You can view the complete conversation history at any time\n- See the exact prompts sent to the model and the responses generated\n- Useful for debugging, understanding agent behavior, and improving prompts\n\nThe ephemeral nature of agents (created per request, deleted after completion) keeps your Azure AI Foundry project clean while the persistent threads give you full traceability of every interaction.\n\n## Get Started Today\n\nThe complete Travel Planner application is available as a reference implementation so you can quickly get started building your own apps with Agent Framework on App Service.\n\n**üîó GitHub Repository**: [https://github.com/Azure-Samples/app-service-agent-framework-travel-agent-dotnet](https://github.com/Azure-Samples/app-service-agent-framework-travel-agent-dotnet)\n\nThe repo includes:\n\n- Complete .NET 9 source code with Agent Framework integration\n- Infrastructure as Code (Bicep) for automated deployment\n- Web UI with real-time progress tracking\n- Comprehensive README with deployment instructions\n\n**Deploy in minutes:**\n\n``` git clone https://github.com/Azure-Samples/app-service-agent-framework-travel-agent-dotnet.git cd app-service-agent-framework-travel-agent-dotnet azd auth login azd up ```\n\n## Key Takeaways\n\n‚úÖ **Agent Framework**¬†enables sophisticated AI agents beyond simple chat completions\n\n‚úÖ **Long-running workflows**¬†(30s-minutes) require async patterns to avoid timeouts\n\n‚úÖ **App Service**¬†provides a simple, cost-effective platform for these workloads\n\n‚úÖ **Async request-reply**¬†pattern with Service Bus + Cosmos DB ensures reliability\n\n‚úÖ **Rapid innovation** in AI is supported by App Service's adaptable platform\n\nWhether you're building travel planners, document processors, research assistants, or other AI-powered applications, Azure App Service gives you the flexibility and reliability you need‚Äîwithout the complexity of container orchestration or function programming models.\n\n## Learn More\n\n- [Microsoft Agent Framework Documentation](https://learn.microsoft.com/en-us/agent-framework/overview/agent-framework-overview)\n- [Azure App Service Documentation](https://learn.microsoft.com/azure/app-service/)\n- [Async Request-Reply Pattern](https://learn.microsoft.com/azure/architecture/patterns/async-request-reply)\n- [Sample Application GitHub Repo](https://github.com/Azure-Samples/app-service-agent-framework-travel-agent-dotnet)\n\n## What's Next? Build on This Foundation\n\nThis Travel Planner is just the starting point‚Äîa foundation to help you understand the patterns and architecture. **Agent Framework is designed to grow with your needs**, making it easy to add sophisticated capabilities with minimal effort:\n\n**üõ†Ô∏è Add Tool Calling**\n\nConnect your agent to real-time APIs for weather, flight prices, hotel availability, and actual booking systems. Agent Framework's built-in tool calling makes this straightforward.\n\n**ü§ù Implement Multi-Agent Systems**\n\nCreate specialized agents (flight expert, hotel specialist, activity planner) that collaborate to build comprehensive travel plans. Agent Framework handles the orchestration.\n\n**üß† Enhance with RAG**\n\nAdd retrieval-augmented generation to give your agent deep knowledge of destinations, local customs, and insider tips from your own content library.\n\n**üìä Expand Functionality**\n\n- Real-time pricing and availability\n- Interactive refinement based on user feedback\n- Personalized recommendations from past trips\n- Multi-language support for global users\n\nThe beauty of Agent Framework is that these advanced features integrate seamlessly into the pattern we've built. Start with this sample, explore the [Agent Framework documentation](https://learn.microsoft.com/en-us/agent-framework/overview/agent-framework-overview), and unlock powerful AI capabilities for your applications!\n\n**Have you built AI agents on App Service?** We'd love to hear about your experience! Share your thoughts in the comments below.\n\n**Questions about Agent Framework on App Service?**¬†Drop a comment and our team will help you get started.\n\nUpdated Oct 21, 2025\n\nVersion 2.0\n\n[.net](/tag/.net?nodeId=board%3AAppsonAzureBlog)\n\n[azure app service](/tag/azure%20app%20service?nodeId=board%3AAppsonAzureBlog)\n\n[modern apps](/tag/modern%20apps?nodeId=board%3AAppsonAzureBlog)\n\n[web apps](/tag/web%20apps?nodeId=board%3AAppsonAzureBlog)\n\n[!\\[jordanselig&#x27;s avatar\\](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/dS0xMTg1ODUyLTQwNTU5Mmk4NTY0MjQ3RTE3NURDNzJC?image-dimensions=50x50)](/users/jordanselig/1185852) [jordanselig](/users/jordanselig/1185852) ![Icon for Microsoft rank](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/cmstNC05WEo0blc?image-dimensions=100x16&amp;constrain-image=true)Microsoft\n\nJoined October 14, 2021\n\n[View Profile](/users/jordanselig/1185852)\n\n/category/azure/blog/appsonazureblog [Apps on Azure Blog](/category/azure/blog/appsonazureblog) Follow this blog board to get notified when there's new activity",
  "Title": "Build Long-Running AI Agents on Azure App Service with Microsoft Agent Framework",
  "PubDate": "2025-10-21T17:04:22+00:00",
  "FeedUrl": "https://techcommunity.microsoft.com/t5/s/gxcuf89792/rss/Category?category.id=Azure",
  "FeedName": "Microsoft Tech Community",
  "Author": "jordanselig",
  "Link": "https://techcommunity.microsoft.com/t5/apps-on-azure-blog/build-long-running-ai-agents-on-azure-app-service-with-microsoft/ba-p/4463159",
  "Tags": [],
  "ProcessedDate": "2025-10-21 17:04:39",
  "OutputDir": "_community",
  "Description": "The AI landscape is evolving rapidly, and with the introduction of [Microsoft Agent Framework](https://learn.microsoft.com/en-us/agent-framework/overview/agent-framework-overview), developers now have a powerful platform for building sophisticated AI agents that go far beyond simple chat completions. These agents can execute complex, multi-step workflows with persistent state, conversation threads, and structured execution‚Äîcapabilities that are essential for production AI applications.\n\nToday, we're excited to share how **Azure App Service** provides an excellent platform for running Agent Framework workloads, especially those involving long-running operations. Let's explore why App Service is a great choice and walk through a practical example.\n\n## The Challenge: Long-Running Agent Framework Flows\n\nAgent Framework enables AI agents to perform complex tasks that can take significant time to complete:\n\n- **Multi-turn reasoning**: Iterative calls to large language models (LLMs) where each response informs the next prompt\n- **Tool integration**: Function calling and external API interactions for real-time data\n- **Complex processing**: Budget calculations, content optimization, multi-phase generation\n- **Persistent context**: Maintaining conversation state across multiple interactions\n\nThese workflows often take **30 seconds to several minutes** to complete‚Äîfar too long for synchronous HTTP request handling. Traditional web applications run into several constraints:\n\n**‚è±Ô∏è Timeout Limitations**: HTTP requests have timeout constraints (typically 30-230 seconds)\n\n**‚ö†Ô∏è Connection Issues**: Clients may disconnect due to network interruptions or browser navigation\n\n**üìà Scalability Concerns**: Long-running requests block worker threads and don't survive app restarts\n\n**üéØ Poor User Experience**: Users see endless loading spinners with no progress feedback\n\n## The Solution: Async Pattern with App Service\n\nAzure App Service provides a robust solution through the **asynchronous request-reply pattern** combined with background processing:\n\n1. **API immediately returns** (202 Accepted) with a task ID\n2. **Background worker** processes the Agent Framework workflow\n3. **Client polls for status** with real-time progress updates\n4. **Durable state storage** (Cosmos DB) maintains task status and results\n\nThis pattern ensures:\n\n‚úÖ No HTTP timeouts‚ÄîAPI responds in milliseconds\n\n‚úÖ Resilient to restarts‚Äîstate survives deployments and scale events\n\n‚úÖ Progress tracking‚Äîusers see real-time updates (10%, 45%, 100%)\n\n‚úÖ Better scalability‚Äîbackground workers process independently\n\n## Sample Application: AI Travel Planner\n\nTo demonstrate this pattern, we've built a **Travel Planner** application that uses Agent Framework to generate detailed, multi-day travel itineraries. The agent performs complex reasoning including:\n\n- Researching destination attractions and activities\n- Optimizing daily schedules based on location proximity\n- Calculating detailed budget breakdowns\n- Generating personalized travel tips and recommendations\n\nThe entire application runs on a **single P0v4 App Service** with both the API and background worker combined‚Äîshowcasing App Service's flexibility for hosting diverse workload patterns in one deployment.\n\n### Key Architecture Components\n\n**Azure App Service (P0v4 Premium)**\n\n- Hosts both REST API and background worker in a single app\n- \"Always On\" feature keeps background worker running continuously\n- Managed identity for secure, credential-less authentication\n\n**Azure Service Bus**\n\n- Decouples API from long-running Agent Framework processing\n- Reliable message delivery with automatic retries\n- Dead letter queue for error handling\n\n**Azure Cosmos DB**\n\n- Stores task status with real-time progress updates\n- Automatic 24-hour TTL for cleanup\n- Rich query capabilities for complex itinerary data\n\n**Azure AI Foundry**\n\n- Hosts persistent agents with conversation threads\n- Structured execution with Agent Framework runtime\n- GPT-4o model for intelligent travel planning\n\n## Why Choose App Service for Agent Framework Workloads?\n\n### Alternative Architectures\n\nWhile there are several ways to run long-running AI workloads on Azure, each has different trade-offs:\n\n**Azure Durable Functions**\n\n‚úÖ Built-in orchestration for complex workflows\n\n‚úÖ Automatic state management and retries\n\n‚ö†Ô∏è Requires function-based programming model\n\n‚ö†Ô∏è Additional learning curve for orchestrations\n\n**Service Bus + Background Jobs (VMs/Container Apps)**\n\n‚úÖ Full control over processing environment\n\n‚úÖ Well-suited for very long-running processes (hours)\n\n‚ö†Ô∏è More infrastructure to manage (scaling, monitoring, updates)\n\n‚ö†Ô∏è Higher operational complexity\n\n**Azure Container Apps**\n\n‚úÖ Kubernetes-based flexibility without cluster management\n\n‚úÖ Advanced scaling options and environment control\n\n‚ö†Ô∏è Container image management required\n\n‚ö†Ô∏è More complex deployment pipeline\n\n### Why App Service Excels\n\n**üöÄ Simplicity & Speed**\n\n- Simple deployment‚Äîno container images or orchestrations needed\n- Combined API + background worker in one app reduces operational overhead\n- Built-in CI/CD with GitHub Actions, Azure DevOps, or deployment slots\n\n**üí∞ Cost-Effective**\n\n- Single (for example P0v4 Premium instance (~$100/month)) handles both API and worker and you can even scale down if needed\n- No separate infrastructure for background processing\n- Predictable monthly costs with no container registry or additional services\n\n**üîí Enterprise-Ready**\n\n- Managed identity with Azure AD authentication built-in\n- Net integration for private endpoints to Cosmos DB, Service Bus, AI Foundry\n- Custom domains, SSL certificates, and deployment slots out of the box\n\n**üìä Familiar Tooling**\n\n- Same monitoring, logging, and debugging tools developers already know\n- Application Insights integration for distributed tracing\n- Log streaming and remote debugging capabilities\n\n**üîÑ Adaptable to Change**\n\n- As Agent Framework evolves, App Service adapts seamlessly\n- Deploy new SDK versions with standard app deployment\n- No infrastructure changes required for framework updates\n\n### Rapid Innovation Support\n\nThe AI landscape is changing at an unprecedented pace. New models, frameworks, and capabilities are released constantly. **Azure App Service's managed platform ensures your applications can adapt quickly** without infrastructure rewrites:\n\n- **Framework Updates**: Deploy new Agent Framework SDK versions like any application update\n- **Model Upgrades**: Switch between GPT-4, GPT-4o, or future models with configuration changes\n- **Scaling Patterns**: Start with combined API+worker, split into separate apps as needs grow\n- **New Capabilities**: Integrate emerging AI services without changing hosting infrastructure\n\nApp Service handles the platform complexity so you can focus on building great AI experiences.\n\n## Visibility into Agent Framework Execution\n\nOne of the powerful features of using Azure AI Foundry with Agent Framework is the ability to **inspect agents and conversation threads directly in the Azure portal**. This provides valuable visibility into what's happening during execution.\n\n### Viewing Agents and Threads in Azure AI Foundry\n\nWhen you submit a travel plan request, the application creates an agent in Azure AI Foundry. You can navigate to your AI Foundry project in the Azure portal to see:\n\n**Agents**\n\n- The application creates an agent for each request\n- **Important**: Agents are \\*\\*automatically deleted\\*\\* after the itinerary is generated to keep your project clean\n- **Tip**: You'll need to be quick! Navigate to Azure AI Foundry right after submitting a request to see the agent in action\n- Once processing completes, the agent is removed as part of the cleanup process\n\n**Conversation Threads**\n\n- Unlike agents, **threads persist** even after the agent completes\n- You can view the complete conversation history at any time\n- See the exact prompts sent to the model and the responses generated\n- Useful for debugging, understanding agent behavior, and improving prompts\n\nThe ephemeral nature of agents (created per request, deleted after completion) keeps your Azure AI Foundry project clean while the persistent threads give you full traceability of every interaction.\n\n## Get Started Today\n\nThe complete Travel Planner application is available as a reference implementation so you can quickly get started building your own apps with Agent Framework on App Service.\n\n**üîó GitHub Repository**: [https://github.com/Azure-Samples/app-service-agent-framework-travel-agent-dotnet](https://github.com/Azure-Samples/app-service-agent-framework-travel-agent-dotnet)\n\nThe repo includes:\n\n- Complete .NET 9 source code with Agent Framework integration\n- Infrastructure as Code (Bicep) for automated deployment\n- Web UI with real-time progress tracking\n- Comprehensive README with deployment instructions\n\n**Deploy in minutes:**\n\n- git clone https://github.com/Azure-Samples/app-service-agent-framework-travel-agent-dotnet.git\ncd app-service-agent-framework-travel-agent-dotnet azd auth login azd up\n\n## Key Takeaways\n\n‚úÖ **Agent Framework** enables sophisticated AI agents beyond simple chat completions\n\n‚úÖ **Long-running workflows** (30s-minutes) require async patterns to avoid timeouts\n\n‚úÖ **App Service** provides a simple, cost-effective platform for these workloads\n\n‚úÖ **Async request-reply** pattern with Service Bus + Cosmos DB ensures reliability\n\n‚úÖ **Rapid innovation** in AI is supported by App Service's adaptable platform\n\nWhether you're building travel planners, document processors, research assistants, or other AI-powered applications, Azure App Service gives you the flexibility and reliability you need‚Äîwithout the complexity of container orchestration or function programming models.\n\n## Learn More\n\n- [Microsoft Agent Framework Documentation](https://learn.microsoft.com/en-us/agent-framework/overview/agent-framework-overview)\n- [Azure App Service Documentation](https://learn.microsoft.com/azure/app-service/)\n- [Async Request-Reply Pattern](https://learn.microsoft.com/azure/architecture/patterns/async-request-reply)\n- [Sample Application GitHub Repo](https://github.com/Azure-Samples/app-service-agent-framework-travel-agent-dotnet)\n\n## What's Next? Build on This Foundation\n\nThis Travel Planner is just the starting point‚Äîa foundation to help you understand the patterns and architecture. **Agent Framework is designed to grow with your needs**, making it easy to add sophisticated capabilities with minimal effort:\n\n**üõ†Ô∏è Add Tool Calling**\n\nConnect your agent to real-time APIs for weather, flight prices, hotel availability, and actual booking systems. Agent Framework's built-in tool calling makes this straightforward.\n\n**ü§ù Implement Multi-Agent Systems**\n\nCreate specialized agents (flight expert, hotel specialist, activity planner) that collaborate to build comprehensive travel plans. Agent Framework handles the orchestration.\n\n**üß† Enhance with RAG**\n\nAdd retrieval-augmented generation to give your agent deep knowledge of destinations, local customs, and insider tips from your own content library.\n\n**üìä Expand Functionality**\n\n- Real-time pricing and availability\n- Interactive refinement based on user feedback\n- Personalized recommendations from past trips\n- Multi-language support for global users\n\nThe beauty of Agent Framework is that these advanced features integrate seamlessly into the pattern we've built. Start with this sample, explore the [Agent Framework documentation](https://learn.microsoft.com/en-us/agent-framework/overview/agent-framework-overview), and unlock powerful AI capabilities for your applications!\n\n**Have you built AI agents on App Service?** We'd love to hear about your experience! Share your thoughts in the comments below.\n\n**Questions about Agent Framework on App Service?** Drop a comment and our team will help you get started.",
  "FeedLevelAuthor": "rss.livelink.threads-in-node"
}
