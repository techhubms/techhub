{
  "OutputDir": "_community",
  "FeedName": "Microsoft Tech Community",
  "Author": "praveensri",
  "Description": "[K3s](https://k3s.io/)is a lightweight Kubernetes distribution, certified by the **Cloud Native Computing Foundation (CNCF)** and originally developed by **Rancher**. It is optimized for **on-premises environments with limited resources**, making it ideal for edge computing and hybrid scenarios. Unlike a full Kubernetes distribution, K3s reduces overhead while maintaining full Kubernetes API compatibility.\n\nThis makes K3s a perfect choice for running **Azure Logic Apps Standard** close to your **data sources** (e.g., on-prem SQL Server, local file shares) without the heavy infrastructure requirements of a full Kubernetes cluster. There are 5 steps which are followed to setup the Hybrid Logic Apps including infrastructure which is illustrated in the following diagram. Most of these 5 steps are same as discussed in the Hybrid Logic Apps doc except the K3s Setup part [Set up your own infrastructure for Standard logic app workflows - Azure Logic Apps | Microsoft Learn](https://learn.microsoft.com/en-us/azure/logic-apps/set-up-standard-workflows-hybrid-deployment-requirements).\n\n![]()\n\n**Step 1: Prepare K3s Cluster**\n\n- Docker desktop setup - In this case, the host machine is Windows 11 so decided to user Docker with WSL2 to setup the containers.\n\nInstall the docker desktop using WSL2 [Docker Desktop: The #1 Containerization Tool for Developers | Docker and make sure we select WSL2](https://www.docker.com/products/docker-desktop/)\n\n![]()\n\n- Install K3s on your infrastructure and create single node cluster using k3d.\n\n- #Install choco , kubectl and Helm\n\nSet-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1')) powershell choco install kubernetes-cli -y choco install kubernetes-helm -y choco install k3d -y\n\n# open in new powershell window powershell k3d cluster create # deleting the default load balancer Traefik as it conflicts with 80 and 443 port - we can configure the load balancer to other ports if needed\nkubectl delete svc traefik -n kube-system kubectl delete deployment traefik -n kube-system\n\nNext two steps are same as given [Set up your own infrastructure for Standard logic app workflows - Azure Logic Apps | Microsoft Learn](https://learn.microsoft.com/en-us/azure/logic-apps/set-up-standard-workflows-hybrid-deployment-requirements#connect-kubernetes-cluster-to-azure-arc)\n\n**Step 2: Connect Kubernetes cluster to Azure Arc**\n\n**Step 3: Setup Azure Container Apps extension and environment**\n\nYou need to skip the core DNS setup required for Azure Local[as given in Update CoreDNS](https://learn.microsoft.com/en-us/azure/logic-apps/set-up-standard-workflows-hybrid-deployment-requirements#update-coredns-for-a-kubernetes-cluster-in-azure-local)\n\n**Step 4: Storage Configuration: SQL and SMB**\n\nSQL Database (Runtime Store): Hybrid Logic Apps use SQL database for runtime operations and run history. In this scenario I used on-premise SQL server using SQL Authentication. I setup the SQL Server 2022 on the Windows host machine, enabled SQL server authentication and added new SQL admin user. Please follow the [link](https://learn.microsoft.com/en-us/azure/logic-apps/set-up-standard-workflows-hybrid-deployment-requirements#create-sql-server-storage-provider)for more details.. The SQL connection string can be validated using following PowerShell script\n- $connectionString = \"Server=;Initial Catalog=;Persist Security Info=False;User ID=;Password=;MultipleActiveResultSets=False;Encrypt=True;TrustServerCertificate=True;Connection Timeout=30;\"\n\ntry { $connection = New-Object System.Data.SqlClient.SqlConnection $connection.ConnectionString = $connectionString $connection.Open() Write-Host \"✅ Connection successful\" $connection.Close() } catch { Write-Host \"❌ Connection failed: $($\\_.Exception.Message)\" }\n\nSMB is used as local file share on Windows host machine; it is advised to use a new user for the Windows SMB share\n- $Username = \"k3suser\"\n$Password = ConvertTo-SecureString \"\" -AsPlainText -Force $FullName = \"K3s user\" $Description = \"Created via PowerShell\"\n# Create the user\nNew-LocalUser -Name $Username -Password $Password -FullName $FullName -Description $Description Add-LocalGroupMember -Group \"Users\" -Member $Username\n\nOnce the above user is created you can use Windows hosted machine to create Artifacts folder and allow read and write access. Please follow the [link](https://learn.microsoft.com/en-us/azure/logic-apps/set-up-standard-workflows-hybrid-deployment-requirements#set-up-your-smb-file-share-on-windows) for more details\n\n**Step 5: Logic Apps (Hybrid) creation**\n\nWith all prerequisites and infrastructure in place for creating Hybrid Logic Apps, the next step is to build the Logic Apps using the specified connection string and SMB share path. This can be accomplished through the Azure Portal, as outlined below.\n\n![]()\n\nNow you can create Logic Apps workflows using the designer and execute the Logic Apps workflow.\n\n![]()",
  "FeedLevelAuthor": "rss.livelink.threads-in-node",
  "Tags": [],
  "EnhancedContent": "## Explore how Hybrid Logic Apps run effortlessly on K3s—delivering the power of Hybrid Logic Apps without the complexity and heavy infrastructure demands of a full Kubernetes cluster!\n\n[K3s](https://k3s.io/)is a lightweight Kubernetes distribution, certified by the **Cloud Native Computing Foundation (CNCF)** and originally developed by **Rancher**. It is optimized for **on-premises environments with limited resources**, making it ideal for edge computing and hybrid scenarios. Unlike a full Kubernetes distribution, K3s reduces overhead while maintaining full Kubernetes API compatibility.\n\nThis makes K3s a perfect choice for running **Azure Logic Apps Standard** close to your **data sources** (e.g., on-prem SQL Server, local file shares) without the heavy infrastructure requirements of a full Kubernetes cluster. There are 5 steps which are followed to setup the Hybrid Logic Apps including infrastructure which is illustrated in the following diagram.  Most of these 5 steps are same as discussed in the Hybrid Logic Apps doc except the K3s Setup part [Set up your own infrastructure for Standard logic app workflows - Azure Logic Apps | Microsoft Learn](https://learn.microsoft.com/en-us/azure/logic-apps/set-up-standard-workflows-hybrid-deployment-requirements).\n\n**Step 1: Prepare K3s Cluster**\n\n- Docker desktop setup - In this case, the host machine is Windows 11 so decided to user Docker with WSL2 to setup the containers.\n\nInstall the docker desktop using WSL2 [Docker Desktop: The #1 Containerization Tool for Developers | Docker and make sure we select WSL2](https://www.docker.com/products/docker-desktop/)\n\n- Install K3s on your infrastructure and create single node cluster using k3d.\n\n``` #Install choco , kubectl and Helm\n\nSet-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1')) powershell choco install kubernetes-cli -y choco install kubernetes-helm -y choco install k3d -y\n\n# open in new powershell window powershell k3d cluster create # deleting the default load balancer Traefik as it conflicts with 80 and 443 port - we can configure the load balancer to other ports if needed\nkubectl delete svc traefik -n kube-system kubectl delete deployment traefik -n kube-system ```\n\nNext two steps are same as given [Set up your own infrastructure for Standard logic app workflows - Azure Logic Apps | Microsoft Learn](https://learn.microsoft.com/en-us/azure/logic-apps/set-up-standard-workflows-hybrid-deployment-requirements#connect-kubernetes-cluster-to-azure-arc)\n\n**Step 2: Connect Kubernetes cluster to Azure Arc**\n\n**Step 3: Setup Azure Container Apps extension and environment**\n\nYou need to skip the core DNS setup required for Azure Local[as given in Update CoreDNS](https://learn.microsoft.com/en-us/azure/logic-apps/set-up-standard-workflows-hybrid-deployment-requirements#update-coredns-for-a-kubernetes-cluster-in-azure-local)\n\n**Step 4: Storage Configuration: SQL and SMB**\n\nSQL Database (Runtime Store):  Hybrid Logic Apps use SQL database for runtime operations and run history. In this scenario I used on-premise SQL server using SQL Authentication.  I setup the SQL Server 2022 on the Windows host machine, enabled SQL server authentication and added new SQL admin user. Please follow the [link](https://learn.microsoft.com/en-us/azure/logic-apps/set-up-standard-workflows-hybrid-deployment-requirements#create-sql-server-storage-provider)for more details.. The SQL connection string can be validated using following PowerShell script\n\n``` $connectionString = \"Server=<server IP address>;Initial Catalog=<databaseName>;Persist Security Info=False;User ID=<sqluser>;Password=<password>;MultipleActiveResultSets=False;Encrypt=True;TrustServerCertificate=True;Connection Timeout=30;\"\n\ntry { $connection = New-Object System.Data.SqlClient.SqlConnection $connection.ConnectionString = $connectionString $connection.Open() Write-Host \"✅ Connection successful\" $connection.Close() } catch { Write-Host \"❌ Connection failed: $($_.Exception.Message)\" } ```\n\nSMB is used as local file share on Windows host machine; it is advised to use a new user for the Windows SMB share\n\n``` $Username = \"k3suser\" $Password = ConvertTo-SecureString \"<password complex>\" -AsPlainText -Force $FullName = \"K3s user\" $Description = \"Created via PowerShell\"\n# Create the user\nNew-LocalUser -Name $Username -Password $Password -FullName $FullName -Description $Description Add-LocalGroupMember -Group \"Users\" -Member $Username ```\n\nOnce the above user is created you can use Windows hosted machine to create Artifacts folder and allow read and write access. Please follow the [link](https://learn.microsoft.com/en-us/azure/logic-apps/set-up-standard-workflows-hybrid-deployment-requirements#set-up-your-smb-file-share-on-windows) for more details\n\n**Step 5: Logic Apps (Hybrid) creation**\n\nWith all prerequisites and infrastructure in place for creating Hybrid Logic Apps, the next step is to build the Logic Apps using the specified connection string and SMB share path. This can be accomplished through the Azure Portal, as outlined below.\n\nNow you can create Logic Apps workflows using the designer and execute the Logic Apps workflow.\n\nUpdated Aug 27, 2025\n\nVersion 1.0\n\n[biztalk](/tag/biztalk?nodeId=board%3AIntegrationsonAzureBlog)\n\n[biztalk migration](/tag/biztalk%20migration?nodeId=board%3AIntegrationsonAzureBlog)\n\n[biztalk modernization](/tag/biztalk%20modernization?nodeId=board%3AIntegrationsonAzureBlog)\n\n[enterprise integration](/tag/enterprise%20integration?nodeId=board%3AIntegrationsonAzureBlog)\n\n[logic apps](/tag/logic%20apps?nodeId=board%3AIntegrationsonAzureBlog)\n\n[logic apps standard](/tag/logic%20apps%20standard?nodeId=board%3AIntegrationsonAzureBlog)\n\n[!\\[praveensri&#x27;s avatar\\](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/dS02ODcxODMtMjI3ODUxaTIzQTRDQzQwQjNDMkEyREI?image-dimensions=50x50)](/users/praveensri/687183) [praveensri](/users/praveensri/687183) ![Icon for Microsoft rank](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/cmstNC05WEo0blc?image-dimensions=100x16&amp;constrain-image=true)Microsoft\n\nJoined June 03, 2020\n\n[View Profile](/users/praveensri/687183)\n\n/category/azure/blog/integrationsonazureblog [Azure Integration Services Blog](/category/azure/blog/integrationsonazureblog) Follow this blog board to get notified when there's new activity",
  "ProcessedDate": "2025-08-27 19:10:53",
  "FeedUrl": "https://techcommunity.microsoft.com/t5/s/gxcuf89792/rss/Category?category.id=Azure",
  "Link": "https://techcommunity.microsoft.com/t5/azure-integration-services-blog/hybrid-logic-apps-deployment-on-rancher-k3s-kubernetes-cluster/ba-p/4448557",
  "Title": "Hybrid Logic Apps deployment on Rancher K3s Kubernetes cluster",
  "PubDate": "2025-08-27T18:22:42+00:00"
}
