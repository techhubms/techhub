{
  "Tags": [],
  "Author": "TulikaC",
  "Link": "https://techcommunity.microsoft.com/t5/apps-on-azure-blog/part-iii-otel-sidecar-extension-on-azure-app-service-for-linux/ba-p/4469589",
  "FeedUrl": "https://techcommunity.microsoft.com/t5/s/gxcuf89792/rss/Category?category.id=Azure",
  "FeedLevelAuthor": "rss.livelink.threads-in-node",
  "Description": "Building on [**Part II**](https://techcommunity.microsoft.com/blog/appsonazureblog/part-ii-otel-sidecar-extension-on-azure-app-service-for-linux---elastic-apm-setu/4469576) (and [**Part I**](https://techcommunity.microsoft.com/blog/appsonazureblog/part-i-otel-sidecar-extension-on-azure-app-service-for-linux---intro--php-walkth/4469514/)), here’s a concise matrix for PHP, Python, Node.js, and .NET, plus the key app settings and quick troubleshooting steps.\n\n| **Lang doc** | **OTEL libraries** | **AppSettings** | **Startup command example** | **Sample repo** | | --- | --- | --- | --- | --- | | [PHP](https://opentelemetry.io/docs/zero-code/php/) | ```<br>Composer autoloader (vendor/autoload.php); PECL ext opentelemetry via php.ini (extension=opentelemetry.so); Composer plugins (e.g., Slim, PSR-18).<br>``` | ```<br>Main: OTEL_PHP_AUTOLOAD_ENABLED=true, SCM_DO_BUILD_DURING_DEPLOYMENT=true, OTEL_EXPORTER_OTLP_ENDPOINT=http://127.0.0.1:4318 Sidecar: map OTEL_PHP_AUTOLOAD_ENABLED<br>``` | ```<br>cp /home/site/wwwroot/default /etc/nginx/sites-enabled/default && nginx -s reload && bash /home/site/wwwroot/startup.sh (startup.sh: pecl install opentelemetry; add extension=opentelemetry.so; php-fpm)<br>``` | [PHP Sample](https://github.com/Azure-Samples/sidecar-samples/tree/main/otel-sidecar/php) | | [Python](https://opentelemetry.io/docs/zero-code/python/) | ```<br>Via opentelemetry-instrument wrapper; auto-patches Flask/requests; installed with pip; run app through opentelemetry-instrument.<br>``` | ```<br>Main: OTEL_TRACES_EXPORTER=otlp, OTEL_METRICS_EXPORTER=otlp, OTEL_LOGS_EXPORTER=otlp, OTEL_PYTHON_LOGGING_AAUTO_INSTRUMENTATION_ENABLED=true, SCM_DO_BUILD_DURING_DEPLOYMENT=true Sidecar: map OTEL_PYTHON_LOGGING_AUTO_INSTRUMENTATION_ENABLED<br>``` | ```<br>bash startup.sh (wait for pip install -r requirements.txt; then exec opentelemetry-instrument --traces_exporter otlp --metrics_exporter otlp flask run --host=0.0.0.0 --port=8000)<br>``` | [Python Sample](https://github.com/Azure-Samples/sidecar-samples/tree/main/otel-sidecar/python) | | [Node](https://opentelemetry.io/docs/zero-code/js/) | ```<br>npm: @opentelemetry/sdk-node, @opentelemetry/auto-instrumentations-node, @opentelemetry/exporter-trace-otlp-http; init in tracing.js; preload via --require or NODE_OPTIONS.<br>``` | ```<br>Main: OTEL_TRACES_EXPORTER=otlp, OTEL_METRICS_EXPORTER=otlp, OTEL_LOGS_EXPORTER=otlp, SCM_DO_BUILD_DURING_DEPLOYMENT=true<br>``` | ```<br>node --require ./tracing.js .js (or set NODE_OPTIONS=--require ./tracing.js and use normal start)<br>``` | [Node Sample](https://github.com/Azure-Samples/sidecar-samples/tree/main/otel-sidecar/nodejs) | | [Dotnet](https://opentelemetry.io/docs/zero-code/dotnet/) | ```<br>NuGet packages (OpenTelemetry.Extensions.Hosting, OpenTelemetry.Instrumentation.AspNetCore, OpenTelemetry.Instrumentation.Http, OpenTelemetry.Exporter.OpenTelemetryProtocol); configure in Program.cs via AddOpenTelemetry() (ASP.NET Core + HttpClient).<br>``` | ```<br>Main: OTEL_DOTNET_AUTO_TRACES_ENABLED=true, OTEL_DOTNET_AUTO_METRICS_ENABLED=true, OTEL_DOTNET_AUTO_LOGS_ENABLED=true<br>``` | ```<br>No custom startup command needed<br>``` | [.NET Sample](https://github.com/Azure-Samples/sidecar-samples/tree/main/otel-sidecar/dotnet) |\n\n#### **Common App Settings added by default**\n\n**Azure Monitor (Application Insights)**\n\n- APPLICATIONINSIGHTS\\_CONNECTION\\_STRING =\nOTEL\\_EXPORTER = azuremonitor OTEL\\_EXPORTER\\_OTLP\\_ENDPOINT = http://127.0.0.1:4318 OTEL\\_SERVICE\\_NAME =\n\n**Elastic APM**\n- ELASTIC\\_APM\\_ENDPOINT = https://\nELASTIC\\_APM\\_SECRET\\_TOKEN = OTEL\\_EXPORTER = elastic OTEL\\_EXPORTER\\_OTLP\\_ENDPOINT = http://127.0.0.1:4318 OTEL\\_SERVICE\\_NAME =\n\n*Notes:*\n\n- These live on the **main app**; the sidecar extension reads what it needs and forwards data to the chosen backend.\n- Keep :4318 for OTLP/HTTP (default). Use :4317 only if you switch to OTLP/gRPC across your stack.\n- Set a meaningful OTEL\\_SERVICE\\_NAME (e.g., myapp-api) to make traces easy to find.\n\n#### **Sample repo (code & containers)**\n\nWe’ve published a repo with working samples for **PHP, Node.js, Python, and .NET** showing both **code-based** and **container-based** setups using the OTEL sidecar extensions. Use it as your starting point: [https://github.com/Azure-Samples/sidecar-samples/tree/main/otel-sidecar](https://github.com/Azure-Samples/sidecar-samples/tree/main/otel-sidecar)\n\n#### **Troubleshooting**\n\n**No telemetry appearing**\n\n- **Sidecar status:** Deployment Center → **Containers** → confirm the sidecar shows **Running**.\n- **Settings check:** Environment variables → confirm\nOTEL\\_EXPORTER\\_OTLP\\_ENDPOINT=http://127.0.0.1:4318 and your backend creds (e.g., APPLICATIONINSIGHTS\\_CONNECTION\\_STRING **or** ELASTIC\\_APM\\_ENDPOINT/ELASTIC\\_APM\\_SECRET\\_TOKEN).\n- **Logs:** Monitoring → **Log stream** → view the **sidecar** container logs for errors or “Successfully exported” messages.\n- **Debug logs:** Add OTEL\\_TELEMETRY\\_LOG\\_LEVEL=debug in **App settings**, Apply, then re-check Log stream.\n\n**Sidecar fails to start**\n\n- **Requirements:** Confirm your plan has sufficient resources (e.g., P0v3 or higher).\n- **Required settings present:**\n- Azure Monitor: APPLICATIONINSIGHTS\\_CONNECTION\\_STRING\n- Elastic: ELASTIC\\_APM\\_ENDPOINT, ELASTIC\\_APM\\_SECRET\\_TOKEN\n- **Startup errors:** Monitoring → **Log stream** → check sidecar startup logs for config issues.\n\n**High memory usage**\n\n- **Reduce volume:** Enable sampling, filter health checks/noisy endpoints, lower log verbosity.\n- **Scale up:** Settings → **Scale up (App Service plan)** → choose a higher tier.\n\n#### **Conclusion & resources**\n\nWith the OpenTelemetry sidecar extensions for Azure Monitor and Elastic APM, App Service for Linux makes end-to-end observability a drop-in add-on for both code and container apps. Grab the sample repo, wire up your connection string or token, and give it a try.\n\n- **Sidecar overview (App Service):** [https://learn.microsoft.com/azure/app-service/overview-sidecar](https://learn.microsoft.com/azure/app-service/overview-sidecar)\n- **Sidecar extensions intro (App Service team):** [https://azure.github.io/AppService/2025/03/19/Sidecar-extensions.html](https://azure.github.io/AppService/2025/03/19/Sidecar-extensions.html)\n- **OpenTelemetry docs:** [https://opentelemetry.io/docs/](https://opentelemetry.io/docs/)\n- **Elastic Observability APM docs:** [https://www.elastic.co/guide/en/observability/current/apm.html](https://www.elastic.co/guide/en/observability/current/apm.html)",
  "EnhancedContent": "Building on [**Part II**](https://techcommunity.microsoft.com/blog/appsonazureblog/part-ii-otel-sidecar-extension-on-azure-app-service-for-linux---elastic-apm-setu/4469576) (and [**Part I**](https://techcommunity.microsoft.com/blog/appsonazureblog/part-i-otel-sidecar-extension-on-azure-app-service-for-linux---intro--php-walkth/4469514/)), here’s a concise matrix for PHP, Python, Node.js, and .NET, plus the key app settings and quick troubleshooting steps.\n\n| **Lang doc** | **OTEL libraries** | **AppSettings** | **Startup command example** | **Sample repo** | | --- | --- | --- | --- | --- | | [PHP](https://opentelemetry.io/docs/zero-code/php/) | ```<br>Composer autoloader (vendor/autoload.php); PECL ext opentelemetry via php.ini (extension=opentelemetry.so); Composer plugins (e.g., Slim, PSR-18).<br>``` | ```<br>Main: OTEL_PHP_AUTOLOAD_ENABLED=true, SCM_DO_BUILD_DURING_DEPLOYMENT=true, OTEL_EXPORTER_OTLP_ENDPOINT=http://127.0.0.1:4318 Sidecar: map OTEL_PHP_AUTOLOAD_ENABLED<br>``` | ```<br>cp /home/site/wwwroot/default /etc/nginx/sites-enabled/default && nginx -s reload && bash /home/site/wwwroot/startup.sh (startup.sh: pecl install opentelemetry; add extension=opentelemetry.so; php-fpm)<br>``` | [PHP Sample](https://github.com/Azure-Samples/sidecar-samples/tree/main/otel-sidecar/php) | | [Python](https://opentelemetry.io/docs/zero-code/python/) | ```<br>Via opentelemetry-instrument wrapper; auto-patches Flask/requests; installed with pip; run app through opentelemetry-instrument.<br>``` | ```<br>Main: OTEL_TRACES_EXPORTER=otlp, OTEL_METRICS_EXPORTER=otlp, OTEL_LOGS_EXPORTER=otlp, OTEL_PYTHON_LOGGING_AAUTO_INSTRUMENTATION_ENABLED=true, SCM_DO_BUILD_DURING_DEPLOYMENT=true Sidecar: map OTEL_PYTHON_LOGGING_AUTO_INSTRUMENTATION_ENABLED<br>``` | ```<br>bash startup.sh (wait for pip install -r requirements.txt; then exec opentelemetry-instrument --traces_exporter otlp --metrics_exporter otlp flask run --host=0.0.0.0 --port=8000)<br>``` | [Python Sample](https://github.com/Azure-Samples/sidecar-samples/tree/main/otel-sidecar/python) | | [Node](https://opentelemetry.io/docs/zero-code/js/) | ```<br>npm: @opentelemetry/sdk-node, @opentelemetry/auto-instrumentations-node, @opentelemetry/exporter-trace-otlp-http; init in tracing.js; preload via --require or NODE_OPTIONS.<br>``` | ```<br>Main: OTEL_TRACES_EXPORTER=otlp, OTEL_METRICS_EXPORTER=otlp, OTEL_LOGS_EXPORTER=otlp, SCM_DO_BUILD_DURING_DEPLOYMENT=true<br>``` | ```<br>node --require ./tracing.js <your-app>.js (or set NODE_OPTIONS=--require ./tracing.js and use normal start)<br>``` | [Node Sample](https://github.com/Azure-Samples/sidecar-samples/tree/main/otel-sidecar/nodejs) | | [Dotnet](https://opentelemetry.io/docs/zero-code/dotnet/) | ```<br>NuGet packages (OpenTelemetry.Extensions.Hosting, OpenTelemetry.Instrumentation.AspNetCore, OpenTelemetry.Instrumentation.Http, OpenTelemetry.Exporter.OpenTelemetryProtocol); configure in Program.cs via AddOpenTelemetry() (ASP.NET Core + HttpClient).<br>``` | ```<br>Main: OTEL_DOTNET_AUTO_TRACES_ENABLED=true, OTEL_DOTNET_AUTO_METRICS_ENABLED=true, OTEL_DOTNET_AUTO_LOGS_ENABLED=true<br>``` | ```<br>No custom startup command needed<br>``` | [.NET Sample](https://github.com/Azure-Samples/sidecar-samples/tree/main/otel-sidecar/dotnet) |\n\n#### **Common App Settings added by default**\n\n**Azure Monitor (Application Insights)**\n\n``` APPLICATIONINSIGHTS_CONNECTION_STRING = <your-application-insights-connection-string> OTEL_EXPORTER = azuremonitor OTEL_EXPORTER_OTLP_ENDPOINT = http://127.0.0.1:4318 OTEL_SERVICE_NAME = <your-app-name> ```\n\n**Elastic APM**\n\n``` ELASTIC_APM_ENDPOINT = https://<your-elastic-endpoint> ELASTIC_APM_SECRET_TOKEN = <your-elastic-token> OTEL_EXPORTER = elastic OTEL_EXPORTER_OTLP_ENDPOINT = http://127.0.0.1:4318 OTEL_SERVICE_NAME = <your-app-name> ```\n\n*Notes:*\n\n- These live on the **main app**; the sidecar extension reads what it needs and forwards data to the chosen backend.\n- Keep :4318 for OTLP/HTTP (default). Use :4317 only if you switch to OTLP/gRPC across your stack.\n- Set a meaningful OTEL\\_SERVICE\\_NAME (e.g., myapp-api) to make traces easy to find.\n\n#### **Sample repo (code & containers)**\n\nWe’ve published a repo with working samples for **PHP, Node.js, Python, and .NET** showing both **code-based** and **container-based** setups using the OTEL sidecar extensions. Use it as your starting point: [https://github.com/Azure-Samples/sidecar-samples/tree/main/otel-sidecar](https://github.com/Azure-Samples/sidecar-samples/tree/main/otel-sidecar)\n\n#### **Troubleshooting**\n\n**No telemetry appearing**\n\n- **Sidecar status:** Deployment Center → **Containers** → confirm the sidecar shows **Running**.\n- **Settings check:** Environment variables → confirm\nOTEL\\_EXPORTER\\_OTLP\\_ENDPOINT=http://127.0.0.1:4318 and your backend creds (e.g., APPLICATIONINSIGHTS\\_CONNECTION\\_STRING **or** ELASTIC\\_APM\\_ENDPOINT/ELASTIC\\_APM\\_SECRET\\_TOKEN).\n- **Logs:** Monitoring → **Log stream** → view the **sidecar** container logs for errors or “Successfully exported” messages.\n- **Debug logs:** Add OTEL\\_TELEMETRY\\_LOG\\_LEVEL=debug in **App settings**, Apply, then re-check Log stream.\n\n**Sidecar fails to start**\n\n- **Requirements:** Confirm your plan has sufficient resources (e.g., P0v3 or higher).\n- **Required settings present:**\n- Azure Monitor: APPLICATIONINSIGHTS\\_CONNECTION\\_STRING\n- Elastic: ELASTIC\\_APM\\_ENDPOINT, ELASTIC\\_APM\\_SECRET\\_TOKEN\n- **Startup errors:** Monitoring → **Log stream** → check sidecar startup logs for config issues.\n\n**High memory usage**\n\n- **Reduce volume:** Enable sampling, filter health checks/noisy endpoints, lower log verbosity.\n- **Scale up:** Settings → **Scale up (App Service plan)** → choose a higher tier.\n\n#### **Conclusion & resources**\n\nWith the OpenTelemetry sidecar extensions for Azure Monitor and Elastic APM, App Service for Linux makes end-to-end observability a drop-in add-on for both code and container apps. Grab the sample repo, wire up your connection string or token, and give it a try.\n\n- **Sidecar overview (App Service):** [https://learn.microsoft.com/azure/app-service/overview-sidecar](https://learn.microsoft.com/azure/app-service/overview-sidecar)\n- **Sidecar extensions intro (App Service team):** [https://azure.github.io/AppService/2025/03/19/Sidecar-extensions.html](https://azure.github.io/AppService/2025/03/19/Sidecar-extensions.html)\n- **OpenTelemetry docs:** [https://opentelemetry.io/docs/](https://opentelemetry.io/docs/)\n- **Elastic Observability APM docs:** [https://www.elastic.co/guide/en/observability/current/apm.html](https://www.elastic.co/guide/en/observability/current/apm.html)\n\nUpdated Nov 13, 2025\n\nVersion 2.0\n\n[azure app service](/tag/azure%20app%20service?nodeId=board%3AAppsonAzureBlog)\n\n[!\\[TulikaC&#x27;s avatar\\](https://techcommunity.microsoft.com/t5/s/gxcuf89792/m_assets/avatars/default/avatar-1.svg?image-dimensions=50x50)](/users/tulikac/1661700) [TulikaC](/users/tulikac/1661700) ![Icon for Microsoft rank](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/cmstNC05WEo0blc?image-dimensions=100x16&amp;constrain-image=true)Microsoft\n\nJoined December 21, 2022\n\n[View Profile](/users/tulikac/1661700)\n\n/category/azure/blog/appsonazureblog [Apps on Azure Blog](/category/azure/blog/appsonazureblog) Follow this blog board to get notified when there's new activity",
  "OutputDir": "_community",
  "FeedName": "Microsoft Tech Community",
  "PubDate": "2025-11-13T10:17:50+00:00",
  "ProcessedDate": "2025-11-13 11:04:25",
  "Title": "Part III: OTEL sidecar extension on Azure App Service for Linux - Language cheat-sheet"
}
