# Tech Hub Development Agent

## Overview

Tech Hub is a Jekyll-based static site for Microsoft technology content, featuring automated RSS feed processing, AI-powered content generation, and a sophisticated tag-based filtering system.

## Tech Stack

- **Static Site Generator**: Jekyll 4.3+
- **Template Engine**: Liquid
- **Styling**: SCSS (Sass)
- **Client-Side**: Vanilla JavaScript (ES6+)
- **Backend Processing**: PowerShell 7+
- **Testing**:
  - Ruby: RSpec
  - JavaScript: Jest with jsdom
  - PowerShell: Pester v5
  - E2E: Playwright
- **AI Integration**: Azure OpenAI / GitHub Models
- **CI/CD**: GitHub Actions

## Repository Structure

```text
/
├── _plugins/          # Jekyll Ruby plugins (see _plugins/AGENTS.md)
├── assets/js/         # Client-side JavaScript (see assets/js/AGENTS.md)
├── _sass/             # SCSS styling (see _sass/AGENTS.md)
├── scripts/           # PowerShell automation (see scripts/AGENTS.md)
├── rss/               # RSS feed XML files (see rss/AGENTS.md)
├── docs/              # Documentation (see docs/AGENTS.md)
├── spec/              # All tests (see spec/AGENTS.md)
├── _data/             # Jekyll data files and RSS cache
├── _includes/         # Liquid template partials
├── _layouts/          # Liquid page layouts
└── _*/                # Content collections (_posts, _news, _videos, etc.)
```

## Critical Development Rules

### Code Quality

- Always test real implementation, never duplicate logic in tests
- Add tests when creating or changing functionality
- Follow existing patterns and conventions in each language
- Use meaningful variable names and proper error handling
- Prefer clarity over cleverness

### Path References

- Workspace root in devcontainer: `/workspaces/techhub/`
- Always use absolute paths when working with repository files
- PowerShell scripts reference: `scripts/` directory
- RSS feed files: `rss/` directory
- Data files: `_data/` directory

### Documentation

- Update documentation when changing behavior
- Keep documentation in sync with code
- Follow [writing-style-guidelines](docs/writing-style-guidelines.md) for all text
- See [documentation-guidelines](docs/documentation-guidelines.md) for structure

### Testing

- Test frameworks: RSpec (Ruby), Jest (JavaScript), Pester (PowerShell), Playwright (E2E)
- Run tests before committing changes
- See [spec/AGENTS.md](spec/AGENTS.md) for comprehensive testing strategy

### Dependencies

- Install workspace dependencies in `.devcontainer/post-create.sh`
- Check `.github/workflows/` when updating post-create script
- Never install dependencies in PowerShell scripts or other runtime contexts

## Key Concepts

### Section Architecture

The site is organized into multiple sections, each representing a distinct topic area:

| Section | URL | Category | Description |
|---------|-----|----------|-------------|
| Everything | `/all` | All | Comprehensive hub for all content |
| AI | `/ai` | AI | General AI-related content |
| GitHub Copilot | `/github-copilot` | GitHub Copilot | Dedicated GitHub Copilot content |
| ML | `/ml` | ML | Machine learning and data science |
| Azure | `/azure` | Azure | Microsoft cloud platform content |
| .NET | `/coding` | Coding | .NET ecosystem and development |
| DevOps | `/devops` | DevOps | Development lifecycle and automation |
| Security | `/security` | Security | Microsoft security landscape |

Each section contains:

- **Index page**: Auto-generated overview with RSS feed link
- **RSS Feed**: Dedicated feed at `/rss/{section}.xml`
- **Collections**: Various content types (news, blogs, videos, etc.)
- **Custom pages**: Manually created pages specific to the section

**Note**: Only `ai/` and `github-copilot/` have physical directories with custom pages. Other sections are auto-generated by Jekyll plugins from `_data/sections.json`.

### Collections System

Collections represent different content types, defined in `_config.yml`:

| Collection | Directory | Description |
|------------|-----------|-------------|
| posts | `_posts/` | Blog posts and technical articles |
| news | `_news/` | Official announcements and product updates |
| videos | `_videos/` | YouTube content and video tutorials |
| community | `_community/` | Microsoft Tech community posts |
| events | `_events/` | Official events and community meetups |
| roundups | `_roundups/` | Curated content summaries (shown on homepage) |

**Special**: `_videos/ghc-features/` subfolder contains GitHub Copilot feature demos that auto-populate `/github-copilot/features.md`.

### Configuration

**`_data/sections.json`** - Single source of truth for section configuration:

```json
{
  "section-key": {
    "title": "Section Display Name",
    "url": "/section-path",
    "category": "Category Name",
    "collections": [
      { "title": "Collection Title", "page": "collection-type", "custom": false }
    ]
  }
}
```

- `custom: false`: Pages generated automatically by plugin
- `custom: true`: Manually created pages

**Global Standards**:

- **Timezone**: All date operations use `Europe/Brussels` timezone
- **Data Access**: Always use `site.data.sections` in Liquid templates

### Plugin System

**`_plugins/section_pages_generator.rb`** - Core plugin that creates pages from `sections.json`:

1. Reads `_data/sections.json`
2. Generates section index pages automatically
3. Creates collection pages for entries marked `custom: false`

**Other Plugins**:

- `tag_filters.rb`: Filtering functionality and tag processing
- `date_filters.rb`: Date formatting and date-based filtering
- `string_filters.rb`: String processing and validation
- `youtube.rb`: YouTube integration features

### Filtering System

- Tag-based modular system across sections, collections, and content
- Pre-calculated relationships for performance
- Client-side real-time filtering
- See [filtering-system](docs/filtering-system.md)

### RSS Processing

- Automated hourly downloads from configured feeds
- AI-powered content transformation to markdown
- Collection-aware prioritization
- See [content-management](docs/content-management.md#rss-feed-processing)

### Available RSS Feeds

The site provides RSS feeds for all sections and collections. Source feed templates are in the `rss/` directory.

**Section RSS Feeds** (each section has its own feed):

- **Everything**: `/rss/feed.xml` - All content across all sections
- **AI**: `/rss/ai.xml` - AI-related content
- **GitHub Copilot**: `/rss/github-copilot.xml` - GitHub Copilot content
- **ML**: `/rss/ml.xml` - Machine learning content
- **Azure**: `/rss/azure.xml` - Azure cloud platform content
- **Coding**: `/rss/coding.xml` - .NET and coding content
- **DevOps**: `/rss/devops.xml` - DevOps and automation content
- **Security**: `/rss/security.xml` - Security content

**Collection RSS Feeds**:

- **Roundups**: `/rss/roundups.xml` - Weekly content roundups

## Common Commands

### Testing

```bash
# All tests
./scripts/run-all-tests.ps1

# Specific test suites
./scripts/run-powershell-tests.ps1
./scripts/run-javascript-tests.ps1
./scripts/run-plugin-tests.ps1
./scripts/run-e2e-tests.ps1
```

### Jekyll Development

```bash
# Start Jekyll server
./scripts/jekyll-start.ps1

# Stop Jekyll server
./scripts/jekyll-stop.ps1
```

### RSS Processing

```bash
# Download RSS feeds
./scripts/content-processing/download-rss-feeds.ps1 -WorkspaceDirectory .

# Process RSS to markdown
./scripts/content-processing/process-rss-to-markdown.ps1 "owner/repo" "token" -WorkspaceDirectory .
```

## Domain-Specific Guidelines

For specialized development in specific areas:

- **PowerShell Development**: See [scripts/AGENTS.md](scripts/AGENTS.md)
- **Ruby Plugin Development**: See [_plugins/AGENTS.md](_plugins/AGENTS.md)
- **JavaScript Development**: See [assets/js/AGENTS.md](assets/js/AGENTS.md)
- **Styling (SCSS)**: See [_sass/AGENTS.md](_sass/AGENTS.md)
- **RSS Feed Management**: See [rss/AGENTS.md](rss/AGENTS.md)
- **Documentation**: See [docs/AGENTS.md](docs/AGENTS.md)
- **Testing**: See [spec/AGENTS.md](spec/AGENTS.md)

## Resources

### Essential Documentation

Read these before making changes:

- [README.md](README.md) - Project introduction and quick start
- [content-management.md](docs/content-management.md) - Content creation and organization
- [jekyll-development.md](docs/jekyll-development.md) - Jekyll-specific patterns
- [performance-guidelines.md](docs/performance-guidelines.md) - Performance optimization

### Full Documentation Index

- [datetime-processing.md](docs/datetime-processing.md) - Date handling and timezone configuration
- [filtering-system.md](docs/filtering-system.md) - Complete filtering implementation
- [markdown-guidelines.md](docs/markdown-guidelines.md) - Markdown structure for AI models
- [terminology.md](docs/terminology.md) - Project vocabulary and concepts
- [writing-style-guidelines.md](docs/writing-style-guidelines.md) - Content writing standards

## Architectural Principles

1. **Configuration-Driven**: All sections and collections defined in `_data/sections.json`
2. **Dynamic Generation**: Pages created automatically from configuration
3. **Modular Design**: New sections added by updating `sections.json`
4. **Consistent Structure**: Plugin ensures uniform page generation
5. **Content Separation**: Clear distinction between generated and custom pages

### Data Flow

1. Content creators add files to collection directories (`_news/`, `_videos/`, etc.)
2. `sections.json` defines which collections appear in which sections
3. `section_pages_generator.rb` reads configuration and creates pages
4. Jekyll processes all content and generates the static site
5. Generated pages use data from `site.data.sections` for navigation and display

## Never Do

- Never invent or fabricate information
- Never use unverifiable content
- Never leave documentation out of sync with code
- Never add wrapper methods in production code just for tests
- Never make code backwards compatible unless explicitly requested
- Never add comments describing what you changed
- Never start responses with "Sure!" or "You're right!"
