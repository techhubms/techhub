@page "/{sectionName}"
@using TechHub.Web.Services
@using static TechHub.Web.Services.SectionHelper
@inject SectionCache SectionCache
@inject NavigationManager Navigation

<PageTitle>@GetSectionDisplayName(SectionName) - Tech Hub</PageTitle>

<HeadContent>
    <link rel="alternate" type="application/rss+xml" title="Tech Hub - @GetSectionDisplayName(SectionName) - RSS Feed"
        href="@($"/{SectionName}/feed.xml")" />
</HeadContent>

<Header SectionName="@SectionName" />

<div class="page-with-sidebar">
    <aside class="sidebar">
        <SidebarRssLinks Links="@(new[] { new SidebarRssLinks.RssLink("RSS Feed", $"/{SectionName}/feed.xml") })" />
    </aside>

    <main class="page-main-content">
        <ContentItemsGrid SectionName="@SectionName" CollectionName="all" />
    </main>
</div>

@code {
    [Parameter]
    public string SectionName { get; set; } = null!;

    protected override void OnInitialized()
    {
        // Verify section exists, redirect to 404 if not
        if (SectionCache.GetSectionByName(SectionName) == null)
        {
            Navigation.NavigateTo("/not-found");
        }
    }
}