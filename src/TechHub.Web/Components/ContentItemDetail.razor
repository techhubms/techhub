@using TechHub.Core.Models

@if (!string.IsNullOrWhiteSpace(Item.RenderedHtml))
{
    <article id="@Id" class="article-body" tabindex="@(string.IsNullOrWhiteSpace(Id) ? null : "-1")">
        <div class="content-detail-header">
            <h1 class="page-h1" tabindex="-1">@Item.Title</h1>

            <div class="article-metadata">
                <time datetime="@FormatDateIso(Item.DateEpoch)">@FormatDate(Item.DateEpoch)</time>
                @if (!string.IsNullOrWhiteSpace(Item.Author))
                {
                    <span class="metadata-separator">â€¢</span>
                    <span class="author">@Item.Author</span>
                }
            </div>
        </div>
        @((MarkupString)Item.RenderedHtml)
    </article>
}

@code {
    [Parameter, EditorRequired]
    public TechHub.Core.Models.ContentItemDetail Item { get; set; } = null!;

    [Parameter]
    public string? Id { get; set; }

    private string FormatDate(long epochSeconds)
    {
        if (epochSeconds == 0) return string.Empty;

        var dateTime = DateTimeOffset.FromUnixTimeSeconds(epochSeconds);
        return dateTime.ToString("MMMM d, yyyy");
    }

    private static string FormatDateIso(long epochSeconds) =>
        DateTimeOffset.FromUnixTimeSeconds(epochSeconds).ToString("yyyy-MM-dd");
}