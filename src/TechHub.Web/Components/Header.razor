@using TechHub.Core.Models
@using TechHub.Web.Services
@inject SectionCache SectionCache

@* 
   Header Component - Complete site header structure
   
   Usage:
     With section name (section/collection pages):
       <Header SectionName="ai" />
     
     With custom banner content (home page):
       <Header>
           <SectionBanner Title="..." Description="..." />
       </Header>
     
     Without section/banner (about, error pages):
       <Header />
*@

<header>
    <NavHeader />

    @if (!string.IsNullOrEmpty(SectionName))
    {
        var sectionData = SectionCache.GetSectionByName(SectionName);
        if (sectionData != null)
        {
            <SectionBanner Section="@sectionData" RssFeedUrl="@RssFeedUrl" />
            <SubNav Section="@sectionData" />
        }
        else
        {
            <SubNav />
        }
    }
    else if (ChildContent != null)
    {
        @ChildContent
        <SubNav Sections="@SectionCache.Sections" />
    }
    else
    {
        <SubNav Sections="@SectionCache.Sections" />
    }
</header>

@code {
    [Parameter]
    public string? SectionName { get; set; }

    /// <summary>
    /// Optional RSS feed URL. Passed through to SectionBanner for mobile RSS icon.
    /// </summary>
    [Parameter]
    public string? RssFeedUrl { get; set; }

    [Parameter]
    public RenderFragment? ChildContent { get; set; }
}