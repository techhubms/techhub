{
  "Link": "https://techcommunity.microsoft.com/t5/apps-on-azure-blog/from-quot-maybe-next-quarter-quot-to-quot-running-before-lunch/ba-p/4495736",
  "FeedUrl": "https://techcommunity.microsoft.com/t5/s/gxcuf89792/rss/Category?category.id=Azure",
  "Author": "Jan-Kalis",
  "PubDate": "2026-02-18T23:19:26+00:00",
  "Description": "In early 2025, we wanted to modernize Jon Galloway's [MVC Music Store](https://github.com/jongalloway/MvcMusicStore) â€” a classic ASP.NET MVC 5 app running on .NET Framework 4.8 with Entity Framework 6. The goal was straightforward: address vulnerabilities, enable managed identity, and deploy to Azure Container Apps and Azure SQL. No more plaintext connection strings. No more passwords in config files.\n\n![]()\n\nWe hit a wall immediately.\n\nEntity Framework on .NET Framework did not support Azure.Identity or DefaultAzureCredential. We just could not add a NuGet package and call it done â€” weâ€™d need EF Core, which means modern .NET - and rewriting the data layer, the identity system, the startup pipeline, the views. The engineering team estimated **one week** of dedicated developer work. As a product manager without extensive .NET modernization experience, I wasn't able to complete it quickly on my own, so the project was placed in the backlog.\n\nThis was before the GitHub Copilot \"Agent\" mode, the **GitHub Copilot app modernization** (a specialized agent with skills for modernization) existed but only offered **assessment** â€” it could tell you *what* needed to change, but couldn't make the end to end changes for you.\n\nFast-forward one year. The full modernization agent is available. I sat down with the same app and the same goal. **A few hours later, it was running on .NET 10 on Azure Container Apps with managed identity, Key Vault integration, and zero plaintext credentials.** Thank you [GitHub Copilot app modernization](https://aka.ms/ghcp-appmod)!\n\nAnd while we were on it â€“ GitHub Copilot helped to modernize the experience as well, built more tests and generated more synthetic data for testing.\n\n![]()\n\n**Why Azure Container Apps?**\n\n[Azure Container Apps](https://aka.ms/aca/start) is an ideal deployment target for this modernized MVC Music Store application because it provides a serverless, fully managed container hosting environment. It abstracts away infrastructure management while natively supporting the key security and operational features this project required. It pairs naturally with infrastructure-as-code deployments, and its per-second billing on a consumption plan keeps costs minimal for a lightweight web app like this, eliminating the overhead of managing Kubernetes clusters while still giving you the container portability that modern .NET apps benefit from.\n\nThat is why I asked Copilot to modernize to Azure Container Apps - here's how it went -\n\n**Phase 1: Assessment**\n\nGitHub Copilot App Modernization started by analyzing the codebase and producing a detailed assessment:\n\n- **Framework gap analysis** â€” .NET Framework 4.0 â†’ .NET 10, identifying every breaking change\n- **Dependency inventory** â€” Entity Framework 6 (not EF Core), MVC 5 references, System.Web dependencies\n- **Security findings** â€” plaintext SQL connection strings in Web.config, no managed identity support\n- **API surface changes** â€” Global.asax â†’ Program.cs minimal hosting, System.Web.Mvc â†’ Microsoft.AspNetCore.Mvc\n\nThe assessment is not a generic checklist. It reads your code â€” your controllers, your DbContext, your views â€” and maps a concrete modernization path. For this app, the key finding was clear: EF 6 on .NET Framework cannot support DefaultAzureCredential. The *entire* data layer needs to move to EF Core on modern .NET to unlock passwordless authentication.\n\n![]()\n\n**Phase 2: Code & Dependency Modernization**\n\nThis is where last year's experience ended and this year's began. The agent performed the actual modernization:\n\n**Project structure:**\n\n- .csproj converted from legacy XML format to SDK-style targeting net10.0\n- Global.asax replaced with Program.cs using minimal hosting\n- packages.config â†’ NuGet PackageReference entries\n\n**Data layer (the hard part):**\n\n- Entity Framework 6 â†’ EF Core with Microsoft.EntityFrameworkCore.SqlServer\n- DbContext rewritten with OnModelCreating fluent configuration\n- System.Data.Entity â†’ Microsoft.EntityFrameworkCore namespace throughout\n- EF Core modernization generated from scratch\n- Database seeding moved to a proper DbSeeder pattern with MigrateAsync()\n\n**Identity:**\n\n- ASP.NET Membership â†’ ASP.NET Core Identity with ApplicationUser, ApplicationDbContext\n- Cookie authentication configured through ConfigureApplicationCookie\n\n**Security (the whole trigger for this modernization):**\n\n- Azure.Identity + DefaultAzureCredential integrated in Program.cs\n- Azure Key Vault configuration provider added via Azure.Extensions.AspNetCore.Configuration.Secrets\n- Connection strings use Authentication=Active Directory Default â€” no passwords anywhere\n- Application Insights wired through OpenTelemetry\n\n**Views:**\n\n- Razor views updated from MVC 5 helpers to ASP.NET Core Tag Helpers and conventions\n- \\_Layout.cshtml and all partials migrated\n\nThe code changes touched every layer of the application. This is not a find-and-replace â€” it's a structural rewrite that maintains functional equivalence.\n\n**Phase 3: Local Testing**\n\nAfter modernization, the app builds, runs locally, and connects to a local SQL Server (or SQL in a container). EF Core modernizations apply cleanly, the seed data loads, and you can browse albums, add to cart, and check out. The identity system works. The Key Vault integration gracefully skips when KeyVaultName isn't configured â€” meaning local dev and Azure use the same Program.cs with zero code branches.\n\n**Phase 4: AZD UP and Deployment to Azure**\n\nThe agent also generates the deployment infrastructure:\n\n- **azure.yaml** â€” AZD service definition pointing to the Dockerfile, targeting Azure Container Apps\n- **Dockerfile** â€” Multi-stage build using mcr.microsoft.com/dotnet/sdk:10.0 and aspnet:10.0\n- **infra/main.bicep** â€” Full IaaC including:\n- Azure Container Apps with system + user-assigned managed identity\n- Azure SQL Server with **Azure AD-only authentication** (no SQL auth)\n- Azure Key Vault with RBAC, Secrets Officer role for the managed identity\n- Container Registry with ACR Pull role assignment\n- Application Insights + Log Analytics\n- All connection strings injected as Container App secrets â€” using Active Directory Default, not passwords\n\nOne command:\n\n**AZD UP**\n\nProvisions everything, builds the container, pushes to ACR, deploys to Container Apps. The app starts, runs MigrateAsync() on first boot, seeds the database, and serves traffic. Managed identity handles all auth to SQL and Key Vault. No credentials stored anywhere.\n\n**What Changed in a Year**\n\n| | **Early 2025** | **Now** | | --- | --- | --- | | **Assessment** | Available | Available | | **Automated code modernization** | Semi-manual | âœ… Full modernization agent | | **Infrastructure generation** | Semi-manual | âœ… Bicep + AZD generated | | **Time to complete** | Weeks | âœ… Hours |\n\nThe technology didn't just improve incrementally. The gap between \"assessment\" and \"done\" collapsed. A year ago, knowing *what* to do and *being able to do it* were very different things. Now they're the same step.\n\n**Who This Is For**\n\nIf you have a .NET Framework app sitting on a backlog because \"the modernization is too expensive\" â€” revisit that assumption. The process changed. [GitHub Copilot app modernization](https://aka.ms/ghcp-appmod) helps you rewrite your data layer, generates your infrastructure, and gets you to azd up. It can help you generate tests to increase your code coverage. If you have some feature requests â€“ or â€“ if you want to further optimize the code for scale â€“ bring your requirements or logs or profile traces, you can take care of all of that during the modernization process.\n\nMVC Music Store went from .NET Framework 4.0 with Entity Framework 6 and plaintext SQL credentials to .NET 10 on Azure Container Apps with managed identity, Key Vault, and zero secrets in code. In an afternoon.\n\nThat backlog item might be a lunch break now ðŸ˜Š. Really. Find your legacy apps and try it yourself.\n\n**Next steps**\n\n1. Modernize your .Net or Java apps with GitHub Copilot app modernization â€“ [https://aka.ms/ghcp-appmod](https://aka.ms/ghcp-appmod)\n2. Open your legacy application in Visual Studio or Visual Studio Code to start the process\n3. Deploy to Azure Container Apps [https://aka.ms/aca/start](https://aka.ms/aca/start)",
  "FeedName": "Microsoft Tech Community",
  "ProcessedDate": "2026-02-19 00:08:58",
  "EnhancedContent": "## The GitHub Copilot app modernization didn't just improve incrementally. The gap between \"assessment\" and \"done\" collapsed. A year ago, knowing what to do and being able to do it were very different things. Now they're almost the same step.\n\nIn early 2025, we wanted to modernize Jon Galloway'sÂ [MVC Music Store](https://github.com/jongalloway/MvcMusicStore)Â â€” a classic ASP.NET MVC 5 app running on .NET Framework 4.8 with Entity Framework 6. The goal was straightforward: address vulnerabilities, enable managed identity, and deploy to Azure Container Apps and Azure SQL. No more plaintext connection strings. No more passwords in config files.\n\nWe hit a wall immediately.\n\nEntity Framework on .NET Framework did not support Azure.Identity or DefaultAzureCredential. We just could not add a NuGet package and call it done â€” weâ€™d need EF Core, which means modern .NET - and rewriting the data layer, the identity system, the startup pipeline, the views. The engineering team estimatedÂ **one week** of dedicated developer work. As a product manager without extensive .NET modernization experience, I wasn't able to complete it quickly on my own, so the project was placed in the backlog.\n\nThis was before the GitHub Copilot \"Agent\" mode, the **GitHub Copilot app modernization** (a specialized agent with skills for modernization) existed but only offered **assessment**Â â€” it could tell youÂ *what* needed to change, but couldn't make the end to end changes for you.\n\nFast-forward one year. The full modernization agent is available. I sat down with the same app and the same goal.Â **A few hours later, it was running on .NET 10 on Azure Container Apps with managed identity, Key Vault integration, and zero plaintext credentials.** Thank you [GitHub Copilot app modernization](https://aka.ms/ghcp-appmod)!\n\nAnd while we were on it â€“ GitHub Copilot helped to modernize the experience as well, built more tests and generated more synthetic data for testing.\n\n**Why Azure Container Apps?**\n\n[Azure Container Apps](https://aka.ms/aca/start) is an ideal deployment target for this modernized MVC Music Store application because it provides a serverless, fully managed container hosting environment. It abstracts away infrastructure management while natively supporting the key security and operational features this project required. It pairs naturally with infrastructure-as-code deployments, and its per-second billing on a consumption plan keeps costs minimal for a lightweight web app like this, eliminating the overhead of managing Kubernetes clusters while still giving you the container portability that modern .NET apps benefit from.\n\nThat is why I asked Copilot to modernize to Azure Container Apps - here's how it went -\n\n**Phase 1: Assessment**\n\nGitHub Copilot App Modernization started by analyzing the codebase and producing a detailed assessment:\n\n- **Framework gap analysis**Â â€” .NET Framework 4.0 â†’ .NET 10, identifying every breaking change\n- **Dependency inventory**Â â€” Entity Framework 6 (not EF Core), MVC 5 references, System.Web dependencies\n- **Security findings**Â â€” plaintext SQL connection strings inÂ Web.config, no managed identity support\n- **API surface changes**Â â€”Â Global.asaxÂ â†’Â Program.csÂ minimal hosting,Â System.Web.MvcÂ â†’Â Microsoft.AspNetCore.Mvc\n\nThe assessment is not a generic checklist. It reads your code â€” your controllers, your DbContext, your views â€” and maps a concrete modernization path. For this app, the key finding was clear: EF 6 on .NET Framework cannot support DefaultAzureCredential. TheÂ *entire*Â data layer needs to move to EF Core on modern .NET to unlock passwordless authentication.\n\n**Phase 2: Code & Dependency Modernization**\n\nThis is where last year's experience ended and this year's began. The agent performed the actual modernization:\n\n**Project structure:**\n\n- .csprojÂ converted from legacy XML format to SDK-style targetingÂ net10.0\n- Global.asaxÂ replaced withÂ Program.csÂ using minimal hosting\n- packages.configÂ â†’ NuGetÂ PackageReferenceÂ entries\n\n**Data layer (the hard part):**\n\n- Entity Framework 6 â†’ EF Core withÂ Microsoft.EntityFrameworkCore.SqlServer\n- DbContextÂ rewritten withÂ OnModelCreatingÂ fluent configuration\n- System.Data.EntityÂ â†’Â Microsoft.EntityFrameworkCoreÂ namespace throughout\n- EF Core modernization generated from scratch\n- Database seeding moved to a properÂ DbSeederÂ pattern withÂ MigrateAsync()\n\n**Identity:**\n\n- ASP.NET Membership â†’ ASP.NET Core Identity withÂ ApplicationUser,Â ApplicationDbContext\n- Cookie authentication configured throughÂ ConfigureApplicationCookie\n\n**Security (the whole trigger for this modernization):**\n\n- Azure.IdentityÂ +Â DefaultAzureCredentialÂ integrated inÂ Program.cs\n- Azure Key Vault configuration provider added viaÂ Azure.Extensions.AspNetCore.Configuration.Secrets\n- Connection strings useÂ Authentication=Active Directory DefaultÂ â€” no passwords anywhere\n- Application Insights wired through OpenTelemetry\n\n**Views:**\n\n- Razor views updated from MVC 5 helpers to ASP.NET Core Tag Helpers and conventions\n- \\_Layout.cshtmlÂ and all partials migrated\n\nThe code changes touched every layer of the application. This is not a find-and-replace â€” it's a structural rewrite that maintains functional equivalence.\n\n**Phase 3: Local Testing**\n\nAfter modernization, the app builds, runs locally, and connects to a local SQL Server (or SQL in a container). EF Core modernizations apply cleanly, the seed data loads, and you can browse albums, add to cart, and check out. The identity system works. The Key Vault integration gracefully skips when KeyVaultName isn't configured â€” meaning local dev and Azure use the same Program.cs with zero code branches.\n\n**Phase 4:Â AZD UPÂ and Deployment to Azure**\n\nThe agent also generates the deployment infrastructure:\n\n- **azure.yaml**Â â€” AZD service definition pointing to theÂ Dockerfile, targeting Azure Container Apps\n- **Dockerfile**Â â€” Multi-stage build usingÂ mcr.microsoft.com/dotnet/sdk:10.0Â andÂ aspnet:10.0\n- **infra/main.bicep**Â â€” Full IaaC including:\n- Azure Container Apps with system + user-assigned managed identity\n- Azure SQL Server withÂ **Azure AD-only authentication**Â (no SQL auth)\n- Azure Key Vault with RBAC, Secrets Officer role for the managed identity\n- Container Registry with ACR Pull role assignment\n- Application Insights + Log Analytics\n- All connection strings injected as Container App secrets â€” usingÂ Active Directory Default, not passwords\n\nOne command:\n\n**AZD UP**\n\nProvisions everything, builds the container, pushes to ACR, deploys to Container Apps. The app starts, runsÂ MigrateAsync()Â on first boot, seeds the database, and serves traffic. Managed identity handles all auth to SQL and Key Vault. No credentials stored anywhere.\n\n**What Changed in a Year**\n\n| | **Early 2025** | **Now** | | --- | --- | --- | | **Assessment** | Available | Available | | **Automated code modernization** | Semi-manual | âœ… Full modernization agent | | **Infrastructure generation** | Semi-manual | âœ… Bicep + AZD generated | | **Time to complete** | Weeks | âœ… Hours |\n\nThe technology didn't just improve incrementally. The gap between \"assessment\" and \"done\" collapsed. A year ago, knowing *what*Â to do andÂ *being able to do it*Â were very different things. Now they're the same step.\n\n**Who This Is For**\n\nIf you have a .NET Framework app sitting on a backlog because \"the modernization is too expensive\" â€” revisit that assumption. The process changed.Â [GitHub Copilot app modernization](https://aka.ms/ghcp-appmod) helps you rewrite your data layer, generates your infrastructure, and gets you to azd up. It can help you generate tests to increase your code coverage. If you have some feature requests â€“ or â€“ if you want to further optimize the code for scale â€“ bring your requirements or logs or profile traces, you can take care of all of that during the modernization process.\n\nMVC Music Store went from .NET Framework 4.0 with Entity Framework 6 and plaintext SQL credentials to .NET 10 on Azure Container Apps with managed identity, Key Vault, and zero secrets in code. In an afternoon.\n\nThat backlog item might be a lunch break now ðŸ˜Š. Really. Find your legacy apps and try it yourself.\n\n**Next steps**\n\n1. Modernize your .Net or Java apps with GitHub Copilot app modernization â€“ [https://aka.ms/ghcp-appmod](https://aka.ms/ghcp-appmod)\n2. Open your legacy application in Visual Studio or Visual Studio Code to start the process\n3. Deploy to Azure Container Apps [https://aka.ms/aca/start](https://aka.ms/aca/start)\n\nUpdated Feb 18, 2026\n\nVersion 1.0\n\n[.net](/tag/.net?nodeId=board%3AAppsonAzureBlog)\n\n[.net core](/tag/.net%20core?nodeId=board%3AAppsonAzureBlog)\n\n[application modernization](/tag/application%20modernization?nodeId=board%3AAppsonAzureBlog)\n\n[azure container apps](/tag/azure%20container%20apps?nodeId=board%3AAppsonAzureBlog)\n\n[cloud native](/tag/cloud%20native?nodeId=board%3AAppsonAzureBlog)\n\n[!\\[Jan-Kalis&#x27;s avatar\\](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/dS0xMTg1OS01MzA5MjFpMTg0NjZDMzMzMEY0Mzc3Qw?image-dimensions=50x50)](/users/jan-kalis/11859) [Jan-Kalis](/users/jan-kalis/11859) ![Icon for Microsoft rank](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/cmstNC05WEo0blc?image-dimensions=100x16&amp;constrain-image=true)Microsoft\n\nJoined September 13, 2016\n\n[View Profile](/users/jan-kalis/11859)\n\n/category/azure/blog/appsonazureblog [Apps on Azure Blog](/category/azure/blog/appsonazureblog) Follow this blog board to get notified when there's new activity",
  "Title": "From \"Maybe Next Quarter\" to \"Running Before Lunch\" on Container Apps - Modernizing Legacy .NET App",
  "FeedLevelAuthor": "rss.livelink.threads-in-node",
  "Tags": [],
  "OutputDir": "_community"
}
