{
  "Tags": [],
  "PubDate": "2026-01-16T00:05:44+00:00",
  "Link": "https://techcommunity.microsoft.com/t5/azure-architecture-blog/deploy-postgresql-on-azure-vms-with-azure-netapp-files/ba-p/4486114",
  "Author": "GeertVanTeylingen",
  "Description": "# Table of Contents\n\nIntroduction\n\nWhy PostgreSQL on Azure NetApp Files?\n\nPerformance That Scales\n\nAzure NetApp Files Service Levels\n\nThe Problem: Manual Deployment Complexity\n\nWhat Teams Face Today\n\nThe Solution: Infrastructure as Code Templates\n\nOne Deployment, Three Workflows\n\nTerraform (Declarative Infrastructure)\n\nARM Templates (Azure Native)\n\nPowerShell (Script-Based Automation)\n\nWhat Gets Deployed\n\nReal-World Impact: From Hours to Minutes\n\nBefore: Manual Deployment\n\nAfter: Automated Deployment\n\nKey Features\n\nZero Manual Configuration\n\nSecurity by Default\n\nProduction-Ready\n\nMulti-Environment Support deployment capability\n\nDeployment Flexible Deployable options\n\nGetting Started\n\nPrerequisites\n\nQuick Start: Deploy in 5 Steps\n\nUse Cases\n\nDevelopment & Testing\n\nProduction Workloads\n\nAI/ML Workloads\n\nDatabase Migrations\n\nFuture Considerations\n\nConclusion\n\nReady to get started?\n\nContribute\n\nLearn more\n\n# Introduction\n\nPostgreSQL is a leading open-source cloud database for web apps and AI/ML workloads. Deploying it on Azure VMs with high storage performance should be straightforward.\n\n**The challenge:** Deploying PostgreSQL on Azure VMs with Azure NetApp Files involves multiple steps provisioning infrastructure, configuring storage, setting up NFS mounts, installing and initializing PostgreSQL, and ensuring consistent environments across development, testing, and production. Each step must meet strict security and performance standards, and manual processes increase the risk of errors and configuration drift.\n\n**The solution:** We've created production-ready Infrastructure as Code (IaC) templates that automate the entire deployment, from networking to database initialization, ensuring your PostgreSQL data lives on high-performance Azure NetApp Files storage from day one.\n\n![]()\n\n**Co-authors:**\n\n- [Prabu Arjunan](https://www.linkedin.com/in/prabu-arjunan/), Azure NetApp Files Product Manager\n- [Asutosh Panda](https://www.linkedin.com/in/asutosh-panda-a2892a7b/), Azure NetApp Files Technical Marketing Engineer\n\n# Why PostgreSQL on Azure NetApp Files?\n\n## Performance That Scales\n\nAzure NetApp Files delivers consistent, sub-millisecond latency and high throughput exactly what database workloads demand. Unlike standard Azure disk storage, Azure NetApp Files provides:\n\n- **Predictable Performance:** No \"noisy neighbor\" issues or performance variability\n- **Independent Scaling:** Scale storage capacity and performance independently of compute\n- **Enterprise Features:** Built-in snapshots, cross-region replication, and backup integration\n\n## Azure NetApp Files Service Levels\n\nChoose the right performance tier for your workload:\n\n| **Service Level** | **Performance** | **Use Case** | | --- | --- | --- | | **Standard** | Up to 16 MiB/s per TB | Development, testing, low I/O workloads | | **Premium** | Up to 64 MiB/s per TB | Production databases, moderate I/O | | **Ultra** | Up to 128 MiB/s per TB | High-performance databases, analytics | | **Flexible** | Independent throughput and capacity. Minimum 128 MiB/s per pool, scaling up to 5 × per TiB of pool size (Manual QoS only) | Ultimate flexibility and cost optimization, enabling customers to dial performance up or down independently of capacity. |\n\n**The Storage Advantage**\n\nWhen PostgreSQL data directories live on Azure NetApp Files volumes, you get:\n\n- **Faster I/O:** Optimized for database workloads with consistent low latency\n- **Instant Snapshots:** Point-in-time recovery without impacting performance\n- **Seamless Scaling:** Grow storage without downtime or data migration\n- **Cost Efficiency:** Pay only for what you use with flexible service levels\n\n# The Problem: Manual Deployment Complexity\n\n## What Teams Face Today\n\nDeploying PostgreSQL on Azure VMs with Azure NetApp Files typically involves:\n\n1. **Infrastructure Provisioning** (2-3 hours)\n○ Create virtual networks and subnets ○ Provision VMs with appropriate sizing ○ Set up network security groups and routing\n2. **Storage Configuration** (1-2 hours)\n○ Create Azure NetApp Files account, capacity pool, and volumes ○ Configure NFS export policies ○ Validate subnet delegations\n3. **PostgreSQL Installation** (1-2 hours)\n○ Install PostgreSQL packages ○ Configure NFS client and mount Azure NetApp Files volumes ○ Initialize data directory on Azure NetApp Files storage ○ Configure PostgreSQL settings and security\n4. **Database Setup** (30-60 minutes)\n○ Create databases and users ○ Configure authentication ○ Test connectivity and performance\n5. **Repeat for Each Environment** (multiply by 3-5 environments)\n\n**Total Time:** 6-10 hours per environment, with high risk of configuration drift and human error.\n\n# The Solution: Infrastructure as Code Templates\n\n## One Deployment, Three Workflows\n\nWe've built comprehensive IaC templates that support your team's preferred workflow:\n\n### Terraform (Declarative Infrastructure)\n\nPerfect for teams already using Terraform for multi-cloud or complex infrastructure.\n\n``` module \"postgresql_vm_Azure NetApp Files\" { source = \"./terraform/db/postgresql-vm-Azure NetApp Files\" postgresql_version = \"15\" postgresql_admin_password = var.pg_admin_password database_name = \"production_db\" database_user = \"app_user\" database_password = var.db_password netapp_service_level = \"Premium\" netapp_volume_size = 500} ```\n\n### ARM Templates (Azure Native)\n\nDeploy directly from Azure Portal with the \"Deploy to Azure\" button, or integrate into Azure DevOps pipelines.\n\n### PowerShell (Script-Based Automation)\n\nIdeal for Windows-centric teams or existing PowerShell automation frameworks.\n\n## What Gets Deployed\n\nThe templates provision a complete, production-ready PostgreSQL environment:\n\n**Networking Infrastructure**\n\n- Virtual network with dedicated subnets for VMs and Azure NetApp Files\n- Network security groups with PostgreSQL and SSH access rules\n- Optional public IP for remote access\n\n**Azure NetApp Files Storage**\n\n- Azure NetApp Files account and capacity pool\n- NFSv3 volume with optimized export policies\n- Automatic mount point configuration\n\n**PostgreSQL Database Server**\n\n- Ubuntu 22.04 LTS VM with PostgreSQL 14, 15, or 16\n- Automated installation and configuration\n- Data directory initialized on Azure NetApp Files volume\n- Database and user creation\n- Security hardening (password authentication, network access)\n\n**Outputs & Validation**\n\n- Connection strings and commands\n- Resource IDs for integration\n- Validation tests to confirm deployment\n\n![]()\n\n![]()\n\n# Real-World Impact: From Hours to Minutes\n\n## Before: Manual Deployment\n\n**Scenario:** A development team needs a PostgreSQL database for a new microservice.\n\n**Timeline:**\n\n- Day 1: Infrastructure team provisions VM and Azure NetApp Files(4 hours)\n- Day 2: Database team configures PostgreSQL (3 hours)\n- Day 3: Troubleshooting and validation (2 hours)\n- **Total: 9 hours over 3 days**\n\n**Risks:**\n\n- Configuration inconsistencies between environments\n- Security misconfigurations\n- Performance issues discovered late in the process\n\n## After: Automated Deployment\n\n**Scenario:** Same team, using IaC templates.\n\n**Timeline:**\n\n- Hour 1: Review template parameters (15 minutes)\n- Hour 1: Deploy infrastructure (30 minutes)\n- Hour 1: Validate and hand off (15 minutes)\n- **Total: 1 hour, same day**\n\n**Benefits:**\n\n- Consistent configuration across all environments\n- Security best practices built-in\n- Performance optimized from the start\n- Repeatable for future deployments\n\n# Key Features\n\n## Zero Manual Configuration\n\nEverything is automated from VM provisioning to PostgreSQL initialization. No SSH sessions, no manual mount commands, no configuration file editing.\n\n## Security by Default\n\n- **Network Security:** NSG rules restrict access to PostgreSQL port (5432) and SSH (22) from authorized sources\n- **Authentication:** PostgreSQL configured with password-based authentication (md5) for secure access\n- **Credential Management:** All passwords handled securely via Azure Key Vault or secure parameters (no hardcoded credentials)\n- **Network Isolation:** Optional private-only deployment (no public IP) for enhanced security\n- **Encryption:** Azure NetApp Files volumes support encryption at rest with Azure-managed keys\n- **Access Control:** Least-privilege network security group rules and PostgreSQL user permissions\n\n## Production-Ready\n\n- PostgreSQL data directory on Azure NetApp Files for optimal performance\n- Proper service configuration and auto-start\n- Logging and monitoring hooks\n- Resource tagging for cost management\n\n## Multi-Environment Support deployment capability\n\nDeploy the same template across development, test, staging, and production environments using environment‑specific parameters, ensuring consistency, repeatability, and reduced configuration drift.\n\n## Deployment Flexible Deployable options\n\nChoose between Terraform, ARM templates, or PowerShell based on your team’s expertise and existing tooling, enabling faster adoption and seamless integration with current workflows.\n\n# Getting Started\n\n## Prerequisites\n\n- Azure subscription with Azure NetApp Files enabled\n- Appropriate permissions (Contributor role or equivalent)\n- Terraform 1.0+ (if using Terraform)\n- Azure PowerShell modules (if using PowerShell)\n\n## Quick Start: Deploy in 5 Steps\n\n**Clone the Repository**\n\n``` git clone https://github.com/NetApp/azure-netapp-files-storage.gitcd azure-netapp-files-storage ```\n\n1. **Choose Your Tool**○ Terraform: terraform/db/postgresql-vm-Azure NetApp Files/\n○ ARM Template: arm-templates/db/postgresql-vm-Azure NetApp Files/ ○ PowerShell: powershell/db/postgresql-vm-Azure NetApp Files/\n\n1. **Configure Parameters**○ PostgreSQL version (14, 15, or 16)\n○ Database name and credentials ○ Azure NetApp Files service level and volume size ○ VM size and networking options\n\n1. **Deploy**○ Terraform: terraform apply\n○ ARM: Use \"Deploy to Azure\" button or az deployment group create ○ PowerShell: ./deploy-postgresql-vm-Azure NetApp Files.ps1\n\n1. **PostgreSQL Command**○ psql -h -p 5432 -U appuser -d mydb\n\n# Use Cases\n\nThe following sections will explore key scenarios for deploying PostgreSQL on Azure NetApp Files, focusing on both development and production environments. We'll highlight how these solutions address technical and economic requirements for rapid testing, operational consistency, and scaling with enterprise-grade storage. Each section outlines the practical benefits and considerations to help you choose the best approach for your specific workload needs.\n\n## Development & Testing\n\nSpin up isolated PostgreSQL environments for feature development, functional testing, and CI/CD pipelines using infrastructure‑as‑code. Each environment remains consistent with production in terms of storage performance, security posture, and configuration, reducing “works‑in‑dev but not in‑prod” issues.\n\n*Technical benefits*\n\n- Rapid environment provisioning using reusable templates.\n- Production‑like storage performance for realistic testing.\n- Instant cloning and snapshots for fast resets and parallel testing.\n- Isolated environments to safely test schema changes and new features.\n\n*Economic benefits*\n\n- Pay only while in use tear down environments when tests complete\n- Lower storage amplification using snapshots and writable clones\n- Reduced defect leakage lowers remediation costs later in production\n\n## Production Workloads\n\nDeploy mission‑critical PostgreSQL databases on Azure NetApp Files with confidence, backed by predictable performance, enterprise security, and operational consistency across environments. Infrastructure templates ensure every deployment follows best practices by design.\n\n*Technical benefits*\n\n- High throughput and low latency storage for sustained production loads\n- Built‑in snapshot and backup capabilities for fast recovery\n- Consistent infrastructure, networking, and security configurations\n- Seamless scaling to meet growing data and transaction demands\n\n*Economic benefits*\n\n- Optimized price‑performance through right‑sized service levels\n- Reduced operational overhead via automated, repeatable deployments\n- Minimized downtime risk, protecting revenue and SLAs\n\n## AI/ML Workloads\n\nPostgreSQL on Azure NetApp Files enables data‑intensive AI/ML workloads, including feature stores and vector databases. The templates can be easily extended to support pgvector for vector similarity search used in retrieval‑augmented generation (RAG) and recommendation systems.\n\n*Technical benefits*\n\n- High I/O throughput to handle embeddings, feature extraction, and training data\n- Low latency access for inference‑time similarity searches\n- Scalable architecture that supports growing AI datasets\n- Native integration with Azure AI and analytics services\n\n*Economic benefits*\n\n- Avoids costly data duplication across multiple systems\n- Scales storage and performance independently as AI workloads evolve\n- Accelerates model experimentation, reducing time‑to‑value\n\n## Database Migrations\n\nUse Azure NetApp Files‑backed PostgreSQL as a high‑performance migration target, enabling safe, low‑risk database modernization. Snapshot‑based workflows allow fast rollback and validation during migration phases.\n\n*Technical benefits*\n\n- High throughput speeds up bulk data transfers and cutovers\n- Snapshot‑based rollback enables safer migration iterations\n- Consistent performance during testing, validation, and production switchover\n\nSupports phased migrations with minimal service interruption\n\n*Economic benefits*\n\n- Reduced downtime lowers business disruption costs\n- Faster migrations shorten project timelines and labor spend\n- Built‑in rollback reduces risk of expensive recovery scenarios\n\n# Future Considerations\n\nFor high availability and backup requirements, consider:\n\n- **High Availability:** PostgreSQL streaming replication can be configured manually using multiple VM deployments\n- **Backup:** Leverage Azure NetApp Files's built-in snapshot capabilities for point-in-time recovery (see [https://learn.microsoft.com/azure/azure-netapp-files/snapshots-introduction](https://learn.microsoft.com/azure/azure-netapp-files/snapshots-introduction) for snapshot management)\n\n# Conclusion\n\nDeploying PostgreSQL on Azure VMs with Azure NetApp Files doesn't have to be a multi-day, error-prone process. With these Infrastructure as Code templates, you can provision a production-ready database environment in minutes, not hours with consistency, security, and performance built in.\n\nWhether you're a DevOps engineer automating infrastructure, a database administrator standardizing deployment, or a developer needing a quick database instance, these templates remove the complexity and let you focus on what matters: building great applications.\n\n# Ready to get started?\n\nHead to thehttps://github.com/NetApp/azure-netapp-files-storage[GitHub repository](https://github.com/NetApp/azure-netapp-files-storage) and deploy your first PostgreSQL instance on AZURE NETAPP FILES today.\n\n*Have questions or feedback? Reach out to us at 1P\\_ProductGrowth@netapp.com or open an issue on GitHub.*\n\n## Contribute\n\nWe welcome contributions! Found a bug? Have a feature request? Open an issue or submit a pull request on GitHub.\n\n# Learn more\n\n- **GitHub Repository:**[****](https://github.com/NetApp/azure-netapp-files-storage)[azure-netapp-files-storage](https://github.com/NetApp/azure-netapp-files-storage)\n- **Documentation:** Comprehensive README files in each template directory\n- **Azure NetApp Files:**https://learn.microsoft.com/azure/azure-netapp-files/[Official Documentation](https://learn.microsoft.com/azure/azure-netapp-files/)\n- **PostgreSQL:**https://www.postgresql.org/docs/[Official Documentation](https://www.postgresql.org/docs/)",
  "EnhancedContent": "## PostgreSQL is a popular open‑source cloud database for modern web applications and AI/ML workloads, and deploying it on Azure VMs with high‑performance storage should be simple. In practice, however, using Azure NetApp Files requires many coordinated steps—from provisioning networking and storage to configuring NFS, installing and initializing PostgreSQL, and maintaining consistent, secure, and high‑performance environments across development, test, and production. To address this complexity, we’ve built production‑ready Infrastructure as Code templates that fully automate the deployment, from infrastructure setup to database initialization, ensuring PostgreSQL runs on high‑performance Azure NetApp Files storage from day one.\n\n# Table of Contents\n\nIntroduction\n\nWhy PostgreSQL on Azure NetApp Files?\n\nPerformance That Scales\n\nAzure NetApp Files Service Levels\n\nThe Problem: Manual Deployment Complexity\n\nWhat Teams Face Today\n\nThe Solution: Infrastructure as Code Templates\n\nOne Deployment, Three Workflows\n\nTerraform (Declarative Infrastructure)\n\nARM Templates (Azure Native)\n\nPowerShell (Script-Based Automation)\n\nWhat Gets Deployed\n\nReal-World Impact: From Hours to Minutes\n\nBefore: Manual Deployment\n\nAfter: Automated Deployment\n\nKey Features\n\nZero Manual Configuration\n\nSecurity by Default\n\nProduction-Ready\n\nMulti-Environment Support deployment capability\n\nDeployment Flexible Deployable options\n\nGetting Started\n\nPrerequisites\n\nQuick Start: Deploy in 5 Steps\n\nUse Cases\n\nDevelopment & Testing\n\nProduction Workloads\n\nAI/ML Workloads\n\nDatabase Migrations\n\nFuture Considerations\n\nConclusion\n\nReady to get started?\n\nContribute\n\nLearn more\n\n# Introduction\n\nPostgreSQL is a leading open-source cloud database for web apps and AI/ML workloads. Deploying it on Azure VMs with high storage performance should be straightforward.\n\n**The challenge:** Deploying PostgreSQL on Azure VMs with Azure NetApp Files involves multiple steps provisioning infrastructure, configuring storage, setting up NFS mounts, installing and initializing PostgreSQL, and ensuring consistent environments across development, testing, and production. Each step must meet strict security and performance standards, and manual processes increase the risk of errors and configuration drift.\n\n**The solution:** We've created production-ready Infrastructure as Code (IaC) templates that automate the entire deployment, from networking to database initialization, ensuring your PostgreSQL data lives on high-performance Azure NetApp Files storage from day one.\n\n**Co-authors:**\n\n- [Prabu Arjunan](https://www.linkedin.com/in/prabu-arjunan/), Azure NetApp Files Product Manager\n- [Asutosh Panda](https://www.linkedin.com/in/asutosh-panda-a2892a7b/), Azure NetApp Files Technical Marketing Engineer\n\n# Why PostgreSQL on Azure NetApp Files?\n\n## Performance That Scales\n\nAzure NetApp Files delivers consistent, sub-millisecond latency and high throughput exactly what database workloads demand. Unlike standard Azure disk storage, Azure NetApp Files provides:\n\n- **Predictable Performance:** No \"noisy neighbor\" issues or performance variability\n- **Independent Scaling:** Scale storage capacity and performance independently of compute\n- **Enterprise Features:** Built-in snapshots, cross-region replication, and backup integration\n\n## Azure NetApp Files Service Levels\n\nChoose the right performance tier for your workload:\n\n| **Service Level** | **Performance** | **Use Case** | | --- | --- | --- | | **Standard** | Up to 16 MiB/s per TB | Development, testing, low I/O workloads | | **Premium** | Up to 64 MiB/s per TB | Production databases, moderate I/O | | **Ultra** | Up to 128 MiB/s per TB | High-performance databases, analytics | | **Flexible** | Independent throughput and capacity. Minimum 128 MiB/s per pool, scaling up to 5 × per TiB of pool size (Manual QoS only) | Ultimate flexibility and cost optimization, enabling customers to dial performance up or down independently of capacity. |\n\n**The Storage Advantage**\n\nWhen PostgreSQL data directories live on Azure NetApp Files volumes, you get:\n\n- **Faster I/O:** Optimized for database workloads with consistent low latency\n- **Instant Snapshots:** Point-in-time recovery without impacting performance\n- **Seamless Scaling:** Grow storage without downtime or data migration\n- **Cost Efficiency:** Pay only for what you use with flexible service levels\n\n# The Problem: Manual Deployment Complexity\n\n## What Teams Face Today\n\nDeploying PostgreSQL on Azure VMs with Azure NetApp Files typically involves:\n\n1. **Infrastructure Provisioning** (2-3 hours)\n○      Create virtual networks and subnets ○      Provision VMs with appropriate sizing ○      Set up network security groups and routing\n2. **Storage Configuration** (1-2 hours)\n○      Create Azure NetApp Files account, capacity pool, and volumes ○      Configure NFS export policies ○      Validate subnet delegations\n3. **PostgreSQL Installation** (1-2 hours)\n○      Install PostgreSQL packages ○      Configure NFS client and mount Azure NetApp Files volumes ○      Initialize data directory on Azure NetApp Files storage ○      Configure PostgreSQL settings and security\n4. **Database Setup** (30-60 minutes)\n○      Create databases and users ○      Configure authentication ○      Test connectivity and performance\n5. **Repeat for Each Environment** (multiply by 3-5 environments)\n\n**Total Time:** 6-10 hours per environment, with high risk of configuration drift and human error.\n\n# The Solution: Infrastructure as Code Templates\n\n## One Deployment, Three Workflows\n\nWe've built comprehensive IaC templates that support your team's preferred workflow:\n\n### Terraform (Declarative Infrastructure)\n\nPerfect for teams already using Terraform for multi-cloud or complex infrastructure.\n\n``` module \"postgresql_vm_Azure NetApp Files\" { source = \"./terraform/db/postgresql-vm-Azure NetApp Files\"  postgresql_version        = \"15\" postgresql_admin_password = var.pg_admin_password database_name            = \"production_db\" database_user            = \"app_user\" database_password        = var.db_password netapp_service_level = \"Premium\" netapp_volume_size   = 500} ```\n\n### ARM Templates (Azure Native)\n\nDeploy directly from Azure Portal with the \"Deploy to Azure\" button, or integrate into Azure DevOps pipelines.\n\n### PowerShell (Script-Based Automation)\n\nIdeal for Windows-centric teams or existing PowerShell automation frameworks.\n\n## What Gets Deployed\n\nThe templates provision a complete, production-ready PostgreSQL environment:\n\n**Networking Infrastructure**\n\n- Virtual network with dedicated subnets for VMs and Azure NetApp Files\n- Network security groups with PostgreSQL and SSH access rules\n- Optional public IP for remote access\n\n**Azure NetApp Files Storage**\n\n- Azure NetApp Files account and capacity pool\n- NFSv3 volume with optimized export policies\n- Automatic mount point configuration\n\n**PostgreSQL Database Server**\n\n- Ubuntu 22.04 LTS VM with PostgreSQL 14, 15, or 16\n- Automated installation and configuration\n- Data directory initialized on Azure NetApp Files volume\n- Database and user creation\n- Security hardening (password authentication, network access)\n\n**Outputs & Validation**\n\n- Connection strings and commands\n- Resource IDs for integration\n- Validation tests to confirm deployment\n\n# Real-World Impact: From Hours to Minutes\n\n## Before: Manual Deployment\n\n**Scenario:** A development team needs a PostgreSQL database for a new microservice.\n\n**Timeline:**\n\n- Day 1: Infrastructure team provisions VM and Azure NetApp Files(4 hours)\n- Day 2: Database team configures PostgreSQL (3 hours)\n- Day 3: Troubleshooting and validation (2 hours)\n- **Total: 9 hours over 3 days**\n\n**Risks:**\n\n- Configuration inconsistencies between environments\n- Security misconfigurations\n- Performance issues discovered late in the process\n\n## After: Automated Deployment\n\n**Scenario:** Same team, using IaC templates.\n\n**Timeline:**\n\n- Hour 1: Review template parameters (15 minutes)\n- Hour 1: Deploy infrastructure (30 minutes)\n- Hour 1: Validate and hand off (15 minutes)\n- **Total: 1 hour, same day**\n\n**Benefits:**\n\n- Consistent configuration across all environments\n- Security best practices built-in\n- Performance optimized from the start\n- Repeatable for future deployments\n\n# Key Features\n\n## Zero Manual Configuration\n\nEverything is automated from VM provisioning to PostgreSQL initialization. No SSH sessions, no manual mount commands, no configuration file editing.\n\n## Security by Default\n\n- **Network Security:** NSG rules restrict access to PostgreSQL port (5432) and SSH (22) from authorized sources\n- **Authentication:** PostgreSQL configured with password-based authentication (md5) for secure access\n- **Credential Management:** All passwords handled securely via Azure Key Vault or secure parameters (no hardcoded credentials)\n- **Network Isolation:** Optional private-only deployment (no public IP) for enhanced security\n- **Encryption:** Azure NetApp Files volumes support encryption at rest with Azure-managed keys\n- **Access Control:** Least-privilege network security group rules and PostgreSQL user permissions\n\n## Production-Ready\n\n- PostgreSQL data directory on Azure NetApp Files for optimal performance\n- Proper service configuration and auto-start\n- Logging and monitoring hooks\n- Resource tagging for cost management\n\n## Multi-Environment Support deployment capability\n\nDeploy the same template across development, test, staging, and production environments using environment‑specific parameters, ensuring consistency, repeatability, and reduced configuration drift.\n\n## Deployment Flexible Deployable options\n\nChoose between Terraform, ARM templates, or PowerShell based on your team’s expertise and existing tooling, enabling faster adoption and seamless integration with current workflows.\n\n# Getting Started\n\n## Prerequisites\n\n- Azure subscription with Azure NetApp Files enabled\n- Appropriate permissions (Contributor role or equivalent)\n- Terraform 1.0+ (if using Terraform)\n- Azure PowerShell modules (if using PowerShell)\n\n## Quick Start: Deploy in 5 Steps\n\n**Clone the Repository**\n\n``` git clone https://github.com/NetApp/azure-netapp-files-storage.gitcd azure-netapp-files-storage ```\n\n1. **Choose Your Tool**○      Terraform: terraform/db/postgresql-vm-Azure NetApp Files/\n○      ARM Template: arm-templates/db/postgresql-vm-Azure NetApp Files/ ○      PowerShell: powershell/db/postgresql-vm-Azure NetApp Files/\n\n1. **Configure Parameters**○      PostgreSQL version (14, 15, or 16)\n○      Database name and credentials ○      Azure NetApp Files service level and volume size ○      VM size and networking options\n\n1. **Deploy**○      Terraform: terraform apply\n○      ARM: Use \"Deploy to Azure\" button or az deployment group create ○      PowerShell: ./deploy-postgresql-vm-Azure NetApp Files.ps1\n\n1. **PostgreSQL Command**○      psql -h &lt;vm\\_ip&gt; -p 5432 -U appuser -d mydb\n\n# Use Cases\n\nThe following sections will explore key scenarios for deploying PostgreSQL on Azure NetApp Files, focusing on both development and production environments. We'll highlight how these solutions address technical and economic requirements for rapid testing, operational consistency, and scaling with enterprise-grade storage. Each section outlines the practical benefits and considerations to help you choose the best approach for your specific workload needs.\n\n## Development & Testing\n\nSpin up isolated PostgreSQL environments for feature development, functional testing, and CI/CD pipelines using infrastructure‑as‑code. Each environment remains consistent with production in terms of storage performance, security posture, and configuration, reducing “works‑in‑dev but not in‑prod” issues.\n\n*Technical benefits*\n\n- Rapid environment provisioning using reusable templates.\n- Production‑like storage performance for realistic testing.\n- Instant cloning and snapshots for fast resets and parallel testing.\n- Isolated environments to safely test schema changes and new features.\n\n*Economic benefits*\n\n- Pay only while in use tear down environments when tests complete\n- Lower storage amplification using snapshots and writable clones\n- Reduced defect leakage lowers remediation costs later in production\n\n## Production Workloads\n\nDeploy mission‑critical PostgreSQL databases on Azure NetApp Files with confidence, backed by predictable performance, enterprise security, and operational consistency across environments. Infrastructure templates ensure every deployment follows best practices by design.\n\n*Technical benefits*\n\n- High throughput and low latency storage for sustained production loads\n- Built‑in snapshot and backup capabilities for fast recovery\n- Consistent infrastructure, networking, and security configurations\n- Seamless scaling to meet growing data and transaction demands\n\n*Economic benefits*\n\n- Optimized price‑performance through right‑sized service levels\n- Reduced operational overhead via automated, repeatable deployments\n- Minimized downtime risk, protecting revenue and SLAs\n\n## AI/ML Workloads\n\nPostgreSQL on Azure NetApp Files enables data‑intensive AI/ML workloads, including feature stores and vector databases. The templates can be easily extended to support pgvector for vector similarity search used in retrieval‑augmented generation (RAG) and recommendation systems.\n\n*Technical benefits*\n\n- High I/O throughput to handle embeddings, feature extraction, and training data\n- Low latency access for inference‑time similarity searches\n- Scalable architecture that supports growing AI datasets\n- Native integration with Azure AI and analytics services\n\n*Economic benefits*\n\n- Avoids costly data duplication across multiple systems\n- Scales storage and performance independently as AI workloads evolve\n- Accelerates model experimentation, reducing time‑to‑value\n\n## Database Migrations\n\nUse Azure NetApp Files‑backed PostgreSQL as a high‑performance migration target, enabling safe, low‑risk database modernization. Snapshot‑based workflows allow fast rollback and validation during migration phases.\n\n*Technical benefits*\n\n- High throughput speeds up bulk data transfers and cutovers\n- Snapshot‑based rollback enables safer migration iterations\n- Consistent performance during testing, validation, and production switchover\n\nSupports phased migrations with minimal service interruption\n\n*Economic benefits*\n\n- Reduced downtime lowers business disruption costs\n- Faster migrations shorten project timelines and labor spend\n- Built‑in rollback reduces risk of expensive recovery scenarios\n\n# Future Considerations\n\nFor high availability and backup requirements, consider:\n\n- **High Availability:** PostgreSQL streaming replication can be configured manually using multiple VM deployments\n- **Backup:** Leverage Azure NetApp Files's built-in snapshot capabilities for point-in-time recovery (see [https://learn.microsoft.com/azure/azure-netapp-files/snapshots-introduction](https://learn.microsoft.com/azure/azure-netapp-files/snapshots-introduction) for snapshot management)\n\n# Conclusion\n\nDeploying PostgreSQL on Azure VMs with Azure NetApp Files doesn't have to be a multi-day, error-prone process. With these Infrastructure as Code templates, you can provision a production-ready database environment in minutes, not hours with consistency, security, and performance built in.\n\nWhether you're a DevOps engineer automating infrastructure, a database administrator standardizing deployment, or a developer needing a quick database instance, these templates remove the complexity and let you focus on what matters: building great applications.\n\n# Ready to get started?\n\nHead to thehttps://github.com/NetApp/azure-netapp-files-storage[GitHub repository](https://github.com/NetApp/azure-netapp-files-storage) and deploy your first PostgreSQL instance on AZURE NETAPP FILES today.\n\n*Have questions or feedback? Reach out to us at 1P\\_ProductGrowth@netapp.com or open an issue on GitHub.*\n\n## Contribute\n\nWe welcome contributions! Found a bug? Have a feature request? Open an issue or submit a pull request on GitHub.\n\n# Learn more\n\n- **GitHub Repository:**[****](https://github.com/NetApp/azure-netapp-files-storage)[azure-netapp-files-storage](https://github.com/NetApp/azure-netapp-files-storage)\n- **Documentation:** Comprehensive README files in each template directory\n- **Azure NetApp Files:**https://learn.microsoft.com/azure/azure-netapp-files/[Official Documentation](https://learn.microsoft.com/azure/azure-netapp-files/)\n- **PostgreSQL:**https://www.postgresql.org/docs/[Official Documentation](https://www.postgresql.org/docs/)\n\nUpdated Jan 15, 2026\n\nVersion 1.0\n\n[application](/tag/application?nodeId=board%3AAzureArchitectureBlog)\n\n[apps & devops](/tag/apps%20%26%20devops?nodeId=board%3AAzureArchitectureBlog)\n\n[armchair architects](/tag/armchair%20architects?nodeId=board%3AAzureArchitectureBlog)\n\n[infrastructure](/tag/infrastructure?nodeId=board%3AAzureArchitectureBlog)\n\n[integration](/tag/integration?nodeId=board%3AAzureArchitectureBlog)\n\n[well architected](/tag/well%20architected?nodeId=board%3AAzureArchitectureBlog)\n\n[!\\[GeertVanTeylingen&#x27;s avatar\\](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/dS0yMjI4NTMtMzI1MjMwaTVERUE2NzdCRkJBNjkxQzg?image-dimensions=50x50)](/users/geertvanteylingen/222853) [GeertVanTeylingen](/users/geertvanteylingen/222853) ![Icon for Microsoft rank](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/cmstNC05WEo0blc?image-dimensions=100x16&amp;constrain-image=true)Microsoft\n\nJoined October 04, 2018\n\n[View Profile](/users/geertvanteylingen/222853)\n\n/category/azure/blog/azurearchitectureblog [Azure Architecture Blog](/category/azure/blog/azurearchitectureblog) Follow this blog board to get notified when there's new activity",
  "FeedLevelAuthor": "rss.livelink.threads-in-node",
  "Title": "Deploy PostgreSQL on Azure VMs with Azure NetApp Files: Production-Ready Infrastructure as Code",
  "FeedUrl": "https://techcommunity.microsoft.com/t5/s/gxcuf89792/rss/Category?category.id=Azure",
  "OutputDir": "_community",
  "FeedName": "Microsoft Tech Community",
  "ProcessedDate": "2026-01-16 01:30:57"
}
