{
  "Tags": [],
  "Title": "Issue with gMSA when installing Cloud Sync",
  "Description": "We are trying to install Cloud Sync to make use of the group writeback. However, we get the same error message every time we try to complete the installation\n\n- [ 8] [INFO ] GrantAllActiveDirectoryPermissions: Granting password writeback permissions on domain xxx for password writeback.\nGranting write permissions for 'user' attribute of (lockoutTime, pwdLastSet) object type on domain xxx for password writeback.\n\n[ 8] [ERROR] An exception occured while configuring permissions on gmsa. Exception System.ArgumentException: The specified name is not a forest, Active Directory domain controller, ADAM instance, or ADAM configuration set. Parameter name: context at System.DirectoryServices.ActiveDirectory.ActiveDirectorySchemaClass.FindByName(DirectoryContext context, String ldapDisplayName) at Microsoft.Online.DirSync.Common.DomainAccountUtility.GetSchemaGuid(Dictionary`2 schemaGuids, Forest forest, String ldapDisplayName, Boolean isProperty) at Microsoft.Online.Deployment.Framework.ActiveDirectory.ActiveDirectoryPermissionsHelper.GrantDesiredPermissionsToDomain(String domainFQDN, NetworkCredential domainAdminCredential, SecurityIdentifier sid, IDictionary`2 objectClassToAttributeMapping, ActiveDirectoryRights accessType, Boolean applyToAdminSDHolder) at Microsoft.Online.Deployment.Framework.ActiveDirectory.ActiveDirectoryPermissionsHelper.GrantPasswordWritebackPermissionsToDomain(String domainFQDN, NetworkCredential domainAdminCredential, SecurityIdentifier sid) at Microsoft.Online.Deployment.Framework.ActiveDirectory.ActiveDirectoryPermissionsHelper.GrantAllActiveDirectoryPermissions(String domainFQDN, NetworkCredential domainAdminCredential, String syncAccountName) at Microsoft.ActiveDirectory.SynchronizationAgent.Setup.Utility.ServiceAccountUtility.ApplyPermissionsToGMSA(WizardActiveDirectoryCredentials directoryCredentials)\n\nWe already tried:\n\n- created a new sync server from scratch\n- test the service account with \"test-ADServiceAccount\"\n- check the encryption settings of the GMSA (the account is being created in the AD)\n- removed an old orphaned GC\n- tried it with a custom GMSA (same error)\n- gave the server access to the GMSA via set-ADServiceAccount\n\nDid anyone else ever had this problem or know how to fix it?",
  "Author": "CheesePizza",
  "FeedLevelAuthor": "rss.livelink.threads-in-node",
  "OutputDir": "_community",
  "EnhancedContent": "We are trying to install Cloud Sync to make use of the group writeback. However, we get the same error message every time we try to complete the installation\n\nerror replaced domain with xxx [  8] [INFO ] GrantAllActiveDirectoryPermissions: Granting password writeback permissions on domain xxx for password writeback. Granting write permissions for 'user' attribute of (lockoutTime, pwdLastSet) object type on domain xxx for password writeback.\n\n[  8] [ERROR] An exception occured while configuring permissions on gmsa. Exception System.ArgumentException: The specified name is not a forest, Active Directory domain controller, ADAM instance, or ADAM configuration set. Parameter name: context at System.DirectoryServices.ActiveDirectory.ActiveDirectorySchemaClass.FindByName(DirectoryContext context, String ldapDisplayName) at Microsoft.Online.DirSync.Common.DomainAccountUtility.GetSchemaGuid(Dictionary`2 schemaGuids, Forest forest, String ldapDisplayName, Boolean isProperty) at Microsoft.Online.Deployment.Framework.ActiveDirectory.ActiveDirectoryPermissionsHelper.GrantDesiredPermissionsToDomain(String domainFQDN, NetworkCredential domainAdminCredential, SecurityIdentifier sid, IDictionary`2 objectClassToAttributeMapping, ActiveDirectoryRights accessType, Boolean applyToAdminSDHolder) at Microsoft.Online.Deployment.Framework.ActiveDirectory.ActiveDirectoryPermissionsHelper.GrantPasswordWritebackPermissionsToDomain(String domainFQDN, NetworkCredential domainAdminCredential, SecurityIdentifier sid) at Microsoft.Online.Deployment.Framework.ActiveDirectory.ActiveDirectoryPermissionsHelper.GrantAllActiveDirectoryPermissions(String domainFQDN, NetworkCredential domainAdminCredential, String syncAccountName) at Microsoft.ActiveDirectory.SynchronizationAgent.Setup.Utility.ServiceAccountUtility.ApplyPermissionsToGMSA(WizardActiveDirectoryCredentials directoryCredentials)\n\nWe already tried:\n\n- created a new sync server from scratch\n- test the service account with \"test-ADServiceAccount\"\n- check the encryption settings of the GMSA (the account is being created in the AD)\n- removed an old orphaned GC\n- tried it with a custom GMSA (same error)\n- gave the server access to the GMSA via set-ADServiceAccount\n\nDid anyone else ever had this problem or know how to fix it?",
  "FeedName": "Microsoft Tech Community",
  "ProcessedDate": "2026-01-05 19:05:03",
  "Link": "https://techcommunity.microsoft.com/t5/azure/issue-with-gmsa-when-installing-cloud-sync/m-p/4482486#M22398",
  "PubDate": "2026-01-02T13:05:17+00:00",
  "FeedUrl": "https://techcommunity.microsoft.com/t5/s/gxcuf89792/rss/Category?category.id=Azure"
}
