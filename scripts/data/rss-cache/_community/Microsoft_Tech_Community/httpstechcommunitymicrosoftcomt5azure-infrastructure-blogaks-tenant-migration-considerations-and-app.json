{
  "OutputDir": "_community",
  "FeedName": "Microsoft Tech Community",
  "Author": "SoumyaShet05",
  "Tags": [],
  "PubDate": "2026-02-05T11:11:56+00:00",
  "EnhancedContent": "**Introduction:**\n\nWhen an Azure subscription is shifted between directories (Azure AD tenants), the Azure Container Registry (ACR) cannot be directly transferred in its current state. This blog outlines the necessary steps to transition the ACR from one tenant to another tenant.\n\n**Prerequisites and Considerations:**\n\n1. **Placeholder Subscription in Target Tenant**\nA newly established subscription in the target tenant to temporarily host services being reconstructed.\n2. **User Managed Identity in Source Tenant**\nMust have ‘Contributor’ IAM permission on the source ACR resource.\n3. **Client Workstation**\nAzure Cloud Shell or PowerShell with the Az module installed.\n4. **Docker Content Trust (DCT)**\nMust be disabled in the source ACR (especially in source environments).\n\n**High-Level Approach**\n\n1. **Freeze Changes**\nSuspend any modifications to the source ACR until the migration is complete.\n2. **Documentation**\nRecord configuration settings and permissions of the source ACR.\n3. **New ACR Instance**\nCreate a new ACR in the placeholder subscription of the target tenant.\n4. **Configuration Matching**\nReplicate the source ACR configuration in the target ACR.\n5. **Content Transfer**\nMigrate repository images and content to the new ACR.\n6. **Testing**\nValidate application integration with the new ACR.\n7. **Deletion**\nRemove the original ACR on the day of subscription migration.\n8. **Post-Migration Setup**\nReconfigure roles and permissions in the target tenant.\n9. **Application Configuration**\nSet up RBAC for ACR, AKS, and other services as per application needs.\n10. **Application Testing**\nConduct thorough testing to ensure everything functions as expected.\n\n**High-Level Steps**\n\n1. Create Subscription B in the target tenant.\n2. Redeploy core non-migratable services in Subscription B.\n3. Ensure no direct Entra-based authentication or cross-tenant managed identities.\n4. Perform VNET peering between Subscription A (source) and Subscription B (target).\n5. Redirect the application to the new AKS cluster (including gateway, DB, storage).\n6. Test the application in a cross-tenant setup. Admins will need dual logins.\n7. Migrate Subscription A to the target tenant.\n8. Re-establish VNET peering between Subscription A and B (both now in target tenant).\n9. Final application testing.\n\n**Detailed steps to be performed in source and target tenant**\n\n**Source Tenant:**\n\n1. Login to azure portal, and Export ARM Template of ACR in source tenant.\n2. Download the exported template on the local Machine, this will serve as reference for configuration details in the source /target tenant for redeployment\n3. Now, create a User Managed Identity in source tenant. This Identity will be used to remotely access this repository from target tenant, and import ‘registry’ images.\n4. Assign the User Managed Identity contributor permissions on source ACR in source tenant\n5. Create windows Virtual machine in source tenant.\n6. Assign the User Managed Identity created in step #3 above in source tenant, contributor permissions on Virtual Machines created in source tenant.\n7. Login To Windows VM using Bastion or RDP and open Azue powershell in Administrator mode and install Azure PowerShell modules and get access token using below commands.\n1. *Install-Module -Name Az -Repository PSGallery -Force*\n2. *Connect-AzAccount -Identity -AccountId &lt;identity\\_ID&gt;*\n3. *Get-AzAccessToken #Get access token using managed identity*\n\n``` Note down the value of “accessToken”. Keep it safe as it is a credential that gives contributor access to source ACR. We must revoke contributor access on ACR after the steps mentioned in this guide are complete. ```\n\n1. Copy following script content to windows vm and save the file as export\\_source\\_images.ps1. Replace the highlighted variable with your ACR name.\n\n1. Now, Upload the output file “outputfile\\_for\\_acr\\_import\\_script.csv” to any of the storage account in source tenant. Run Below Command to Set Storage Context and upload outputfile\\_for\\_acr\\_import\\_script.csv file to Storage Account container.\n\n**Target Tenant:**\n\n1. In the placeholder subscription, proceed to set up a new Azure Container Registry, ensuring it mirrors the configuration of the original registry in the source directory. It’s important to note that the registry name must be distinct to maintain global uniqueness.\n2. Open cloud shell in target tenant.\n3. Import the “outputfile\\_for\\_acr\\_import\\_script.csv” in target tenant.\n4. Open the Editor in PowerShell and copy following PowerShell script, after replacing the highlighted items. Save it as import\\_images\\_from\\_source.ps1.\n\n1. Now, run above script using this command: .\\ import\\_images\\_from\\_source.ps1\n2. Verify from Azure Portal that all images in all repositories with tags have been migrated\n\n****\n\nUpdated Feb 05, 2026\n\nVersion 1.0\n\n[!\\[SoumyaShet05&#x27;s avatar\\](https://techcommunity.microsoft.com/t5/s/gxcuf89792/m_assets/avatars/default/avatar-10.svg?image-dimensions=50x50)](/users/soumyashet05/3024853) [SoumyaShet05](/users/soumyashet05/3024853) ![Icon for Microsoft rank](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/cmstNC05WEo0blc?image-dimensions=100x16&amp;constrain-image=true)Microsoft\n\nJoined May 07, 2025\n\n[View Profile](/users/soumyashet05/3024853)\n\n/category/azure/blog/azureinfrastructureblog [Azure Infrastructure Blog](/category/azure/blog/azureinfrastructureblog) Follow this blog board to get notified when there's new activity",
  "Description": "**Introduction:**\n\nWhen an Azure subscription is shifted between directories (Azure AD tenants), the Azure Container Registry (ACR) cannot be directly transferred in its current state. This blog outlines the necessary steps to transition the ACR from one tenant to another tenant.\n\n**Prerequisites and Considerations:**\n\n1. **Placeholder Subscription in Target Tenant**\nA newly established subscription in the target tenant to temporarily host services being reconstructed.\n2. **User Managed Identity in Source Tenant**\nMust have ‘Contributor’ IAM permission on the source ACR resource.\n3. **Client Workstation**\nAzure Cloud Shell or PowerShell with the Az module installed.\n4. **Docker Content Trust (DCT)**\nMust be disabled in the source ACR (especially in source environments).\n\n**High-Level Approach**\n\n1. **Freeze Changes**\nSuspend any modifications to the source ACR until the migration is complete.\n2. **Documentation**\nRecord configuration settings and permissions of the source ACR.\n3. **New ACR Instance**\nCreate a new ACR in the placeholder subscription of the target tenant.\n4. **Configuration Matching**\nReplicate the source ACR configuration in the target ACR.\n5. **Content Transfer**\nMigrate repository images and content to the new ACR.\n6. **Testing**\nValidate application integration with the new ACR.\n7. **Deletion**\nRemove the original ACR on the day of subscription migration.\n8. **Post-Migration Setup**\nReconfigure roles and permissions in the target tenant.\n9. **Application Configuration**\nSet up RBAC for ACR, AKS, and other services as per application needs.\n10. **Application Testing**\nConduct thorough testing to ensure everything functions as expected.\n\n**High-Level Steps**\n\n1. Create Subscription B in the target tenant.\n2. Redeploy core non-migratable services in Subscription B.\n3. Ensure no direct Entra-based authentication or cross-tenant managed identities.\n4. Perform VNET peering between Subscription A (source) and Subscription B (target).\n5. Redirect the application to the new AKS cluster (including gateway, DB, storage).\n6. Test the application in a cross-tenant setup. Admins will need dual logins.\n7. Migrate Subscription A to the target tenant.\n8. Re-establish VNET peering between Subscription A and B (both now in target tenant).\n9. Final application testing.\n\n![]()\n\n**Detailed steps to be performed in source and target tenant**\n\n**Source Tenant:**\n\n1. Login to azure portal, and Export ARM Template of ACR in source tenant.\n2. Download the exported template on the local Machine, this will serve as reference for configuration details in the source /target tenant for redeployment\n3. Now, create a User Managed Identity in source tenant. This Identity will be used to remotely access this repository from target tenant, and import ‘registry’ images.\n4. Assign the User Managed Identity contributor permissions on source ACR in source tenant\n5. Create windows Virtual machine in source tenant.\n6. Assign the User Managed Identity created in step #3 above in source tenant, contributor permissions on Virtual Machines created in source tenant.\n7. Login To Windows VM using Bastion or RDP and open Azue powershell in Administrator mode and install Azure PowerShell modules and get access token using below commands.\n1. *Install-Module -Name Az -Repository PSGallery -Force*\n2. *Connect-AzAccount -Identity -AccountId*\n3. *Get-AzAccessToken #Get access token using managed identity*\n\n``` Note down the value of “accessToken”. Keep it safe as it is a credential that gives contributor access to source ACR. We must revoke contributor access on ACR after the steps mentioned in this guide are complete. ```\n\n1. Copy following script content to windows vm and save the file as export\\_source\\_images.ps1. Replace the highlighted variable with your ACR name.\n\n![]()\n\n1. Now, Upload the output file “outputfile\\_for\\_acr\\_import\\_script.csv” to any of the storage account in source tenant. Run Below Command to Set Storage Context and upload outputfile\\_for\\_acr\\_import\\_script.csv file to Storage Account container.\n\n![]()\n\n**Target Tenant:**\n\n1. In the placeholder subscription, proceed to set up a new Azure Container Registry, ensuring it mirrors the configuration of the original registry in the source directory. It’s important to note that the registry name must be distinct to maintain global uniqueness.\n2. Open cloud shell in target tenant.\n3. Import the “outputfile\\_for\\_acr\\_import\\_script.csv” in target tenant.\n4. Open the Editor in PowerShell and copy following PowerShell script, after replacing the highlighted items. Save it as import\\_images\\_from\\_source.ps1.\n\n![]()\n\n1. Now, run above script using this command: .\\ import\\_images\\_from\\_source.ps1\n2. Verify from Azure Portal that all images in all repositories with tags have been migrated\n\n****",
  "FeedUrl": "https://techcommunity.microsoft.com/t5/s/gxcuf89792/rss/Category?category.id=Azure",
  "Title": "AKS Tenant Migration: Considerations and Approach",
  "Link": "https://techcommunity.microsoft.com/t5/azure-infrastructure-blog/aks-tenant-migration-considerations-and-approach/ba-p/4415198",
  "FeedLevelAuthor": "rss.livelink.threads-in-node",
  "ProcessedDate": "2026-02-05 11:13:16"
}
