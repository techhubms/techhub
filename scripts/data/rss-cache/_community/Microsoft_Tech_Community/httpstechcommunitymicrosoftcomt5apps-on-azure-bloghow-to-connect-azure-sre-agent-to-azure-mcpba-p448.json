{
  "Title": "How to Connect Azure SRE Agent to Azure MCP",
  "FeedName": "Microsoft Tech Community",
  "Link": "https://techcommunity.microsoft.com/t5/apps-on-azure-blog/how-to-connect-azure-sre-agent-to-azure-mcp/ba-p/4488905",
  "PubDate": "2026-01-23T20:35:55+00:00",
  "Tags": [],
  "Author": "dbandaru",
  "ProcessedDate": "2026-01-23 21:03:14",
  "FeedLevelAuthor": "rss.livelink.threads-in-node",
  "FeedUrl": "https://techcommunity.microsoft.com/t5/s/gxcuf89792/rss/Category?category.id=Azure",
  "OutputDir": "_community",
  "Description": "## Prerequisites\n\nBefore you begin, ensure you have:\n\n- An active Azure subscription\n- An Azure SRE Agent deployed and accessible\n\n## Step 1: Add an MCP Connector Using the Portal UI\n\nTo connect Azure MCP to your SRE Agent, you need to add an MCP connector through the Azure Portal. This connector tells the SRE Agent how to communicate with the Azure MCP server.\n\n**Navigate to the MCP Connectors section:**\n\n1. Open the Azure Portal and navigate to your SRE Agent resource\n2. In the left navigation menu, select **Connectors** under the Settings section\n3. Click **+ Add MCP Connector** to open the configuration panel\n\n![]()\n\n**Configure the connector settings:**\n\n1. **Name:** Enter a descriptive name for your connector (for example, \"Azure MCP Server\")\n2. **Connection Type:** Select **stdio** from the dropdown menu. This tells the agent to communicate with the MCP server through standard input/output\n3. **Arguments:** Enter the command arguments that will launch the Azure MCP server. Use the following format, with each argument separated by a comma:\n\n``` npx, -y, @azure/mcp, server, start ```\n\n**Customizing Tool Exposure:**\n\nYou can customize which tools Azure MCP exposes to your agent by adding optional arguments:\n\n- To expose only tools in the subscription namespace, add: `--namespace, subscription`\n- To expose all tools without the namespace wrapper, add: `--mode, all`\n\n## Step 2: Configure Managed Identity\n\nSelect a managed identity from the Managed Identity dropdown menu. Azure MCP will use this identity to make downstream API calls. The capabilities of Azure MCP are bounded by the permissions granted to this identity.\n\nAdd the following required environment variables:\n\n| Variable | Value | Purpose | | --- | --- | --- | | AZURE\\_CLIENT\\_ID | | Specifies which managed identity to use | | AZURE\\_TOKEN\\_CREDENTIALS | managedidentitycredential | Tells the server to only use managed identity |\n\nThe AZURE\\_CLIENT\\_ID must match the client ID of the managed identity selected in the dropdown. Consult the Azure MCP documentation for additional environment variables that can customize behavior.\n\n**Important:** You must assign the necessary Azure RBAC roles to this managed identity for it to perform the actions in its tool calls. For example, if you want the agent to list resources, grant the identity at least Reader access on the relevant subscriptions or resource groups.\n\n## Step 3: Create a Subagent Using Subagent Builder\n\nUse the Subagent Builder to create a subagent that leverages your MCP connector:\n\n1. Give the subagent a meaningful name (for example, \"Azure Resource Manager\")\n2. Provide helpful instructions on when and how to use its MCP tools\n3. Click \"Choose tools\" and add the previously configured MCP connector to the subagent's available tools\n\nExample instructions for your subagent:\n\n``` You are an Azure resource management assistant. Use the Azure MCP tools to:\n- List Azure subscriptions the user has access to\n- Query resources across subscriptions\n- Retrieve resource details and configurations\n\nAlways confirm the subscription context before performing operations. ```\n\n## Step 4: Test Your Configuration\n\nTest your configuration by calling an MCP tool in the subagent's playground:\n\n1. Open the subagent playground\n2. Ask a question that triggers an MCP tool call (for example, \"List my Azure subscriptions\")\n3. View the trace of the interaction to verify:\n- The tool call was made correctly\n- The tool response contains the expected data\n\n## Security Considerations\n\n### Managed Identity Access Control\n\nAzure MCP can only use managed identity when used with SRE Agent in this configuration. This design has an important security implication: if users are granted access to the SRE Agent, they effectively inherit the permissions of the agent's managed identity.\n\nThis can accidentally provide over-privileged access to users if:\n\n- The SRE Agent's managed identity has broad permissions across Azure resources\n- Users are granted access to the SRE Agent who should not have access to those resources\n\n**Best Practices:**\n\n1. Follow the principle of least privilege when assigning roles to the managed identity\n2. Scope permissions to specific resource groups rather than entire subscriptions when possible\n3. Regularly audit the managed identity's role assignments\n4. Consider creating separate SRE Agents with different managed identities for different user groups or use cases\n\n## Summary\n\nConnecting Azure SRE Agent to Azure MCP enables powerful Azure-native capabilities for your AI agent. By following the steps above, you can configure your agent to interact with Azure resources securely using managed identity authentication. Remember to carefully consider the security implications of the managed identity's permissions and implement appropriate access controls.\n\n## Additional Resources\n\n- [Azure MCP Documentation](https://github.com/Azure/azure-mcp)\n- [Azure SRE Agent Documentation](https://learn.microsoft.com/azure/sre-agent)\n- [Managed Identities for Azure Resources](https://learn.microsoft.com/azure/active-directory/managed-identities-azure-resources/)",
  "EnhancedContent": "## Azure MCP (Model Context Protocol) provides a powerful way to extend your Azure SRE Agent with Azure-native tools. This guide walks you through connecting your SRE Agent to Azure MCP, enabling your agent to perform Azure operations like listing subscriptions, querying resources, and managing infrastructure.\n\n## Prerequisites\n\nBefore you begin, ensure you have:\n\n- An active Azure subscription\n- An Azure SRE Agent deployed and accessible\n\n## Step 1: Add an MCP Connector Using the Portal UI\n\nTo connect Azure MCP to your SRE Agent, you need to add an MCP connector through the Azure Portal. This connector tells the SRE Agent how to communicate with the Azure MCP server.\n\n**Navigate to the MCP Connectors section:**\n\n1. Open the Azure Portal and navigate to your SRE Agent resource\n2. In the left navigation menu, select **Connectors** under the Settings section\n3. Click **+ Add MCP Connector** to open the configuration panel\n\n**Configure the connector settings:**\n\n1. **Name:** Enter a descriptive name for your connector (for example, \"Azure MCP Server\")\n2. **Connection Type:** Select **stdio** from the dropdown menu. This tells the agent to communicate with the MCP server through standard input/output\n3. **Arguments:** Enter the command arguments that will launch the Azure MCP server. Use the following format, with each argument separated by a comma:\n\n``` npx, -y, @azure/mcp, server, start ```\n\n**Customizing Tool Exposure:**\n\nYou can customize which tools Azure MCP exposes to your agent by adding optional arguments:\n\n- To expose only tools in the subscription namespace, add: `--namespace, subscription`\n- To expose all tools without the namespace wrapper, add: `--mode, all`\n\n## Step 2: Configure Managed Identity\n\nSelect a managed identity from the Managed Identity dropdown menu. Azure MCP will use this identity to make downstream API calls. The capabilities of Azure MCP are bounded by the permissions granted to this identity.\n\nAdd the following required environment variables:\n\n| Variable | Value | Purpose | | --- | --- | --- | | AZURE\\_CLIENT\\_ID | &lt;client-id-of-managed-identity&gt; | Specifies which managed identity to use | | AZURE\\_TOKEN\\_CREDENTIALS | managedidentitycredential | Tells the server to only use managed identity |\n\nThe AZURE\\_CLIENT\\_ID must match the client ID of the managed identity selected in the dropdown. Consult the Azure MCP documentation for additional environment variables that can customize behavior.\n\n**Important:** You must assign the necessary Azure RBAC roles to this managed identity for it to perform the actions in its tool calls. For example, if you want the agent to list resources, grant the identity at least Reader access on the relevant subscriptions or resource groups.\n\n## Step 3: Create a Subagent Using Subagent Builder\n\nUse the Subagent Builder to create a subagent that leverages your MCP connector:\n\n1. Give the subagent a meaningful name (for example, \"Azure Resource Manager\")\n2. Provide helpful instructions on when and how to use its MCP tools\n3. Click \"Choose tools\" and add the previously configured MCP connector to the subagent's available tools\n\nExample instructions for your subagent:\n\n``` You are an Azure resource management assistant. Use the Azure MCP tools to:\n- List Azure subscriptions the user has access to\n- Query resources across subscriptions\n- Retrieve resource details and configurations\n\nAlways confirm the subscription context before performing operations. ```\n\n## Step 4: Test Your Configuration\n\nTest your configuration by calling an MCP tool in the subagent's playground:\n\n1. Open the subagent playground\n2. Ask a question that triggers an MCP tool call (for example, \"List my Azure subscriptions\")\n3. View the trace of the interaction to verify:\n- The tool call was made correctly\n- The tool response contains the expected data\n\n## Security Considerations\n\n### Managed Identity Access Control\n\nAzure MCP can only use managed identity when used with SRE Agent in this configuration. This design has an important security implication: if users are granted access to the SRE Agent, they effectively inherit the permissions of the agent's managed identity.\n\nThis can accidentally provide over-privileged access to users if:\n\n- The SRE Agent's managed identity has broad permissions across Azure resources\n- Users are granted access to the SRE Agent who should not have access to those resources\n\n**Best Practices:**\n\n1. Follow the principle of least privilege when assigning roles to the managed identity\n2. Scope permissions to specific resource groups rather than entire subscriptions when possible\n3. Regularly audit the managed identity's role assignments\n4. Consider creating separate SRE Agents with different managed identities for different user groups or use cases\n\n## Summary\n\nConnecting Azure SRE Agent to Azure MCP enables powerful Azure-native capabilities for your AI agent. By following the steps above, you can configure your agent to interact with Azure resources securely using managed identity authentication. Remember to carefully consider the security implications of the managed identity's permissions and implement appropriate access controls.\n\n## Additional Resources\n\n- [Azure MCP Documentation](https://github.com/Azure/azure-mcp)\n- [Azure SRE Agent Documentation](https://learn.microsoft.com/azure/sre-agent)\n- [Managed Identities for Azure Resources](https://learn.microsoft.com/azure/active-directory/managed-identities-azure-resources/)\n\nUpdated Jan 23, 2026\n\nVersion 1.0\n\n[azure sre agent](/tag/azure%20sre%20agent?nodeId=board%3AAppsonAzureBlog)\n\n[!\\[dbandaru&#x27;s avatar\\](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/dS0xODc2Mjc5LTU4NDM2OWk2MjcxQjY2RTZCMEQzMDkw?image-dimensions=50x50)](/users/dbandaru/1876279) [dbandaru](/users/dbandaru/1876279) ![Icon for Microsoft rank](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/cmstNC05WEo0blc?image-dimensions=100x16&amp;constrain-image=true)Microsoft\n\nJoined May 24, 2023\n\n[View Profile](/users/dbandaru/1876279)\n\n/category/azure/blog/appsonazureblog [Apps on Azure Blog](/category/azure/blog/appsonazureblog) Follow this blog board to get notified when there's new activity"
}
