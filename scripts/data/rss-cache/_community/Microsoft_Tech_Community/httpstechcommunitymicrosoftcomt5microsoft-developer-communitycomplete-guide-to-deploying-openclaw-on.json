{
  "Author": "kinfey",
  "PubDate": "2026-02-06T08:00:00+00:00",
  "OutputDir": "_community",
  "Tags": [],
  "FeedName": "Microsoft Tech Community",
  "Link": "https://techcommunity.microsoft.com/t5/microsoft-developer-community/complete-guide-to-deploying-openclaw-on-azure-windows-11-virtual/ba-p/4492001",
  "ProcessedDate": "2026-02-06 08:09:44",
  "Title": "Complete Guide to Deploying OpenClaw on Azure Windows 11 Virtual Machine",
  "Description": "## 1. Introduction to OpenClaw\n\nOpenClaw is an open-source AI personal assistant platform that runs on your own devices and executes real-world tasks. Unlike traditional cloud-based AI assistants, OpenClaw emphasizes local deployment and privacy protection, giving you complete control over your data.\n\n### Key Features of OpenClaw\n\n- **Cross-Platform Support**: Runs on Windows, macOS, Linux, and other operating systems\n- **Multi-Channel Integration**: Interact with AI through messaging platforms like WhatsApp, Telegram, and Discord\n- **Task Automation**: Execute file operations, browser control, system commands, and more\n- **Persistent Memory**: AI remembers your preferences and contextual information\n- **Flexible AI Backends**: Supports multiple large language models including Anthropic Claude and OpenAI GPT\n\nOpenClaw is built on Node.js and can be quickly installed and deployed via npm.\n\n## 2. Security Advantages of Running OpenClaw on Azure VM\n\nDeploying OpenClaw on an Azure virtual machine instead of your personal computer offers significant security benefits:\n\n### 1. Environment Isolation\n\nAzure VMs provide a completely isolated runtime environment. Even if the AI agent exhibits abnormal behavior or is maliciously exploited, it won't affect your personal computer or local data. This isolation mechanism forms the foundation of a zero-trust security architecture.\n\n### 2. Network Security Controls\n\nThrough Azure Network Security Groups (NSGs), you can precisely control which IP addresses can access your virtual machine. The RDP rules configured in the deployment script allow you to securely connect to your Windows 11 VM via Remote Desktop while enabling further restrictions on access sources.\n\n### 3. Data Persistence and Backup\n\nAzure VM managed disks support automatic snapshots and backups. Even if the virtual machine encounters issues, your OpenClaw configuration and data remain safe.\n\n### 4. Elastic Resource Management\n\nYou can adjust VM specifications (memory, CPU) at any time based on actual needs, or stop the VM when not in use to save costs, maintaining maximum flexibility.\n\n### 5. Enterprise-Grade Authentication\n\nAzure supports integration with Azure Active Directory (Entra ID) for identity verification, allowing you to assign different access permissions to team members for granular access control.\n\n### 6. Audit and Compliance\n\nAzure provides detailed activity logs and audit trails, making it easy to trace any suspicious activity and meet enterprise compliance requirements.\n\n## 3. Deployment Steps Explained\n\nThis deployment script uses Azure CLI to automate the installation of OpenClaw and its dependencies on a Windows 11 virtual machine. Here are the detailed execution steps:\n\n### Prerequisites\n\nBefore running the script, ensure you have:\n\n1. **Install Azure CLI**\n\n- # Windows users can download the MSI installer\nhttps://aka.ms/installazurecliwindows\n\n# macOS users\nbrew install azure-cli\n\n# Linux users\ncurl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash\n\n2. **Log in to Azure Account**\n- az login\n\n3. **Prepare Deployment Script** Save the provided [deploy-windows11-vm.sh](https://gist.github.com/kinfey/2b059ff6684aa3d0dae80140a43426e2) script locally and grant execute permissions:\n- chmod +x deploy-windows11-vm.sh\n\n### Step 1: Configure Deployment Parameters\n\nThe script begins by defining key configuration variables that you can modify as needed:\n- RESOURCE\\_GROUP=\"Your Azure Resource Group Name\" # Resource group name\nVM\\_NAME=\"win11-openclaw-vm\" # Virtual machine name LOCATION=\"Your Azure Regison Name\" # Azure region ADMIN\\_USERNAME=\"Your Azure VM Administrator Name\" # Administrator username ADMIN\\_PASSWORD=\"our Azure VM Administrator Password\" # Administrator password (change to a strong password) VM\\_SIZE=\"Your Azure VM Size\" # VM size (4GB memory)\n\n**Security Recommendations**:\n\n- Always change ADMIN\\_PASSWORD to your own strong password\n- Passwords should contain uppercase and lowercase letters, numbers, and special characters\n- Never commit scripts containing real passwords to code repositories\n\n### Step 2: Check and Create Resource Group\n\nThe script first checks if the specified resource group exists, and creates it automatically if it doesn't:\n- echo \"Checking resource group $RESOURCE\\_GROUP...\"\naz group show --name $RESOURCE\\_GROUP &> /dev/null if [ $? -ne 0 ]; then echo \"Creating resource group $RESOURCE\\_GROUP...\" az group create --name $RESOURCE\\_GROUP --location $LOCATION fi\n\nA resource group is a logical container in Azure used to organize and manage related resources. All associated resources (VMs, networks, storage, etc.) will be created within this resource group.\n\n### Step 3: Create Windows 11 Virtual Machine\n\nThis is the core step, using the ***az vm create*** command to create a Windows 11 Pro virtual machine:\n- az vm create \\\n--resource-group $RESOURCE\\_GROUP \\ --name $VM\\_NAME \\ --image MicrosoftWindowsDesktop:windows-11:win11-24h2-pro:latest \\ --size $VM\\_SIZE \\ --admin-username $ADMIN\\_USERNAME \\ --admin-password $ADMIN\\_PASSWORD \\ --public-ip-sku Standard \\ --nsg-rule RDP\n\n**Parameter Explanations**:\n\n- --image: Uses the latest Windows 11 24H2 Professional edition image\n- --size: Standard\\_B2s provides 2 vCPUs and 4GB memory, suitable for running OpenClaw\n- --public-ip-sku Standard: Assigns a standard public IP\n- --nsg-rule RDP: Automatically creates network security group rules allowing RDP (port 3389) inbound traffic\n\n### Step 4: Retrieve Virtual Machine Public IP\n\nAfter VM creation completes, the script retrieves its public IP address:\n- PUBLIC\\_IP=$(az vm show -d -g $RESOURCE\\_GROUP -n $VM\\_NAME --query publicIps -o tsv)\necho \"VM Public IP: $PUBLIC\\_IP\"\n\nThis IP address will be used for subsequent RDP remote connections.\n\n### Step 5: Install Chocolatey Package Manager\n\nUsing ***az vm run-command*** to execute PowerShell scripts inside the VM, first installing Chocolatey:\n- az vm run-command invoke -g $RESOURCE\\_GROUP -n $VM\\_NAME --command-id RunPowerShellScript \\\n--scripts \"Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString( 'https://community.chocolatey.org/install.ps1'))\"\n\nChocolatey is a package manager for Windows, similar to apt or yum on Linux, simplifying subsequent software installations.\n\n### Step 6: Install Git\n\nGit is a dependency for many npm packages, especially those that need to download source code from GitHub for compilation:\n- az vm run-command invoke -g $RESOURCE\\_GROUP -n $VM\\_NAME --command-id RunPowerShellScript \\\n--scripts \"C:\\ProgramData\\chocolatey\\bin\\choco.exe install git -y\"\n\n### Step 7: Install CMake and Visual Studio Build Tools\n\nSome of OpenClaw's native modules require compilation, necessitating the installation of C++ build toolchain:\n- az vm run-command invoke -g $RESOURCE\\_GROUP -n $VM\\_NAME --command-id RunPowerShellScript \\\n--scripts \"C:\\ProgramData\\chocolatey\\bin\\choco.exe install cmake visualstudio2022buildtools visualstudio2022-workload-vctools -y\"\n\n**Component Descriptions**:\n\n- cmake: Cross-platform build system\n- visualstudio2022buildtools: VS 2022 Build Tools\n- visualstudio2022-workload-vctools: C++ development toolchain\n\n### Step 8: Install Node.js LTS\n\nInstall the Node.js Long Term Support version, which is the core runtime environment for OpenClaw:\n- az vm run-command invoke -g $RESOURCE\\_GROUP -n $VM\\_NAME --command-id RunPowerShellScript \\\n--scripts \"$env:Path = [System.Environment]::GetEnvironmentVariable('Path','Machine') + ';' + [System.Environment]::GetEnvironmentVariable('Path','User'); C:\\ProgramData\\chocolatey\\bin\\choco.exe install nodejs-lts -y\"\n\nThe script refreshes environment variables first to ensure Chocolatey is in the PATH, then installs Node.js LTS.\n\n### Step 9: Globally Install OpenClaw\n\nUse npm to globally install OpenClaw:\n- az vm run-command invoke -g $RESOURCE\\_GROUP -n $VM\\_NAME --command-id RunPowerShellScript \\\n--scripts \"$env:Path = [System.Environment]::GetEnvironmentVariable('Path','Machine') + ';' + [System.Environment]::GetEnvironmentVariable('Path','User'); npm install -g openclaw\"\n\nGlobal installation makes the openclaw command available from anywhere in the system.\n\n### Step 10: Configure Environment Variables\n\nAdd Node.js and npm global paths to the system PATH environment variable:\n- az vm run-command invoke -g $RESOURCE\\_GROUP -n $VM\\_NAME --command-id RunPowerShellScript \\\n--scripts \" $npmGlobalPath = 'C:\\Program Files\\nodejs'; $npmUserPath = [System.Environment]::GetFolderPath('ApplicationData') + '\\npm'; $currentPath = [System.Environment]::GetEnvironmentVariable('Path', 'Machine');\n\nif ($currentPath -notlike \\\"\\*$npmGlobalPath\\*\\\") { $newPath = $currentPath + ';' + $npmGlobalPath; [System.Environment]::SetEnvironmentVariable('Path', $newPath, 'Machine'); Write-Host 'Added Node.js path to system PATH'; }\n\nif ($currentPath -notlike \\\"\\*$npmUserPath\\*\\\") { $newPath = [System.Environment]::GetEnvironmentVariable('Path', 'Machine') + ';' + $npmUserPath; [System.Environment]::SetEnvironmentVariable('Path', $newPath, 'Machine'); Write-Host 'Added npm global path to system PATH'; }\n\nWrite-Host 'Environment variables updated successfully!'; \"\n\nThis ensures that node, npm, and openclaw commands can be used directly even in new terminal sessions.\n\n### Step 11: Verify Installation\n\nThe script finally verifies that all software is correctly installed:\n- az vm run-command invoke -g $RESOURCE\\_GROUP -n $VM\\_NAME --command-id RunPowerShellScript \\\n--scripts \"$env:Path = [System.Environment]::GetEnvironmentVariable('Path','Machine') + ';' + [System.Environment]::GetEnvironmentVariable('Path','User'); Write-Host 'Node.js version:'; node --version; Write-Host 'npm version:'; npm --version; Write-Host 'openclaw:'; npm list -g openclaw\"\n\nSuccessful output should look similar to:\n- Node.js version:\nv20.x.x npm version: 10.x.x openclaw: openclaw@x.x.x\n\n### Step 12: Connect to Virtual Machine\n\nAfter deployment completes, the script outputs connection information:\n- ============================================\nDeployment completed! ============================================ Resource Group: Your Azure Resource Group Name VM Name: win11-openclaw-vm Public IP: xx.xx.xx.xx Admin Username: Your Administrator UserName VM Size: Your VM Size\n\nConnect via RDP: mstsc /v:xx.xx.xx.xx ============================================\n\n**Connection Methods**:\n\n**Windows Users**:\n\n1. Press ***Win + R*** to open Run dialog\n2. Enter ***mstsc /v:public\\_ip*** and press Enter\n3. Log in using the username and password set in the script\n\n**macOS Users**:\n\n1. Download ***\"Windows App\"*** from the App Store\n2. Add PC connection with the public IP\n3. Log in using the username and password set in the script\n\n**Linux Users**:\n- # Use Remmina or xfreerdp\nxfreerdp /u:username /v:public\\_ip\n\n### Step 13: Initialize OpenClaw\n\nAfter connecting to the VM, run the following in PowerShell or Command Prompt\n- # Initialize OpenClaw\nopenclaw onboard\n\n# Configure AI model API key\n# Edit configuration file: C:\\Users\\username\\.openclaw\\openclaw.json\nnotepad $env:USERPROFILE\\.openclaw\\openclaw.json\n\nAdd your AI API key in the configuration file:\n- {\n\"agents\": { \"defaults\": { \"model\": \"Your Model Name\", \"apiKey\": \"your-api-key-here\" } } }\n\nStep 14: Start OpenClaw\n- # Start Gateway service\nopenclaw gateway\n\n# In another terminal, connect messaging channels (e.g., WhatsApp)\nopenclaw channels login\n\nFollow the prompts to scan the QR code and connect OpenClaw to your messaging app.\n\n## 4. Summary\n\nThrough this guide, we've successfully implemented the complete process of automatically deploying OpenClaw on an Azure Windows 11 virtual machine. The entire deployment process is highly automated, completing everything from VM creation to installing all dependencies and OpenClaw itself through a single script.\n\n### Key Takeaways\n\n1. **Automation Benefits**: Using az vm run-command allows executing configuration scripts immediately after VM creation without manual RDP login\n2. **Dependency Management**: Chocolatey simplifies the Windows package installation workflow\n3. **Environment Isolation**: Running AI agents on cloud VMs protects local computers and data\n4. **Scalability**: Scripted deployment facilitates replication and team collaboration, easily deploying multiple instances\n\n### Cost Optimization Tips\n\n- **Standard\\_B2s** VMs cost approximately $0.05/hour (~$37/month) on pay-as-you-go pricing\n- When not in use, stop the VM to only pay for storage costs\n- Consider Azure Reserved Instances to save up to 72%\n\n### Security Hardening Recommendations\n\n1. **Change Default Port**: Modify RDP port from 3389 to a custom port\n2. **Enable JIT Access**: Use Azure Security Center's just-in-time access feature\n3. **Configure Firewall Rules**: Only allow specific IP addresses to access\n4. **Regular System Updates**: Enable automatic Windows Updates\n5. **Use Azure Key Vault**: Store API keys in Key Vault instead of configuration files\n\n## 5. Additional Resources\n\n### Official Documentation\n\n- **OpenClaw Website**: [https://openclaw.ai](https://openclaw.ai)\n- **OpenClaw GitHub**: [https://github.com/openclaw/openclaw](https://github.com/openclaw/openclaw)\n- **OpenClaw Documentation**: [https://docs.openclaw.ai](https://docs.openclaw.ai)\n- **Azure CLI Documentation**: [https://docs.microsoft.com/cli/azure/](https://docs.microsoft.com/cli/azure/)\n\n### Azure Resources\n\n- **Azure VM Pricing Calculator**: [https://azure.microsoft.com/pricing/calculator/](https://azure.microsoft.com/pricing/calculator/)\n- **Azure Free Account**: [https://azure.microsoft.com/free/](https://azure.microsoft.com/free/) (new users receive $200 credit)\n- **Azure Security Center**: [https://azure.microsoft.com/services/security-center/](https://azure.microsoft.com/services/security-center/)\n- **Azure Key Vault**: [https://azure.microsoft.com/services/key-vault/](https://azure.microsoft.com/services/key-vault/)",
  "FeedLevelAuthor": "rss.livelink.threads-in-node",
  "FeedUrl": "https://techcommunity.microsoft.com/t5/s/gxcuf89792/rss/Category?category.id=Azure",
  "EnhancedContent": "## 1. Introduction to OpenClaw\n\nOpenClaw is an open-source AI personal assistant platform that runs on your own devices and executes real-world tasks. Unlike traditional cloud-based AI assistants, OpenClaw emphasizes local deployment and privacy protection, giving you complete control over your data.\n\n### Key Features of OpenClaw\n\n- **Cross-Platform Support**: Runs on Windows, macOS, Linux, and other operating systems\n- **Multi-Channel Integration**: Interact with AI through messaging platforms like WhatsApp, Telegram, and Discord\n- **Task Automation**: Execute file operations, browser control, system commands, and more\n- **Persistent Memory**: AI remembers your preferences and contextual information\n- **Flexible AI Backends**: Supports multiple large language models including Anthropic Claude and OpenAI GPT\n\nOpenClaw is built on Node.js and can be quickly installed and deployed via npm.\n\n## 2. Security Advantages of Running OpenClaw on Azure VM\n\nDeploying OpenClaw on an Azure virtual machine instead of your personal computer offers significant security benefits:\n\n### 1. Environment Isolation\n\nAzure VMs provide a completely isolated runtime environment. Even if the AI agent exhibits abnormal behavior or is maliciously exploited, it won't affect your personal computer or local data. This isolation mechanism forms the foundation of a zero-trust security architecture.\n\n### 2. Network Security Controls\n\nThrough Azure Network Security Groups (NSGs), you can precisely control which IP addresses can access your virtual machine. The RDP rules configured in the deployment script allow you to securely connect to your Windows 11 VM via Remote Desktop while enabling further restrictions on access sources.\n\n### 3. Data Persistence and Backup\n\nAzure VM managed disks support automatic snapshots and backups. Even if the virtual machine encounters issues, your OpenClaw configuration and data remain safe.\n\n### 4. Elastic Resource Management\n\nYou can adjust VM specifications (memory, CPU) at any time based on actual needs, or stop the VM when not in use to save costs, maintaining maximum flexibility.\n\n### 5. Enterprise-Grade Authentication\n\nAzure supports integration with Azure Active Directory (Entra ID) for identity verification, allowing you to assign different access permissions to team members for granular access control.\n\n### 6. Audit and Compliance\n\nAzure provides detailed activity logs and audit trails, making it easy to trace any suspicious activity and meet enterprise compliance requirements.\n\n## 3. Deployment Steps Explained\n\nThis deployment script uses Azure CLI to automate the installation of OpenClaw and its dependencies on a Windows 11 virtual machine. Here are the detailed execution steps:\n\n### Prerequisites\n\nBefore running the script, ensure you have:\n\n1. **Install Azure CLI**\n\n```\n# Windows users can download the MSI installer\nhttps://aka.ms/installazurecliwindows\n\n# macOS users\nbrew install azure-cli\n\n# Linux users\ncurl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash ```\n\n2. **Log in to Azure Account**\n\n``` az login ```\n\n3. **Prepare Deployment Script** Save the provided [deploy-windows11-vm.sh](https://gist.github.com/kinfey/2b059ff6684aa3d0dae80140a43426e2) script locally and grant execute permissions:\n\n``` chmod +x deploy-windows11-vm.sh ```\n\n### Step 1: Configure Deployment Parameters\n\nThe script begins by defining key configuration variables that you can modify as needed:\n\n``` RESOURCE_GROUP=\"Your Azure Resource Group Name\" # Resource group name VM_NAME=\"win11-openclaw-vm\" # Virtual machine name LOCATION=\"Your Azure Regison Name\" # Azure region ADMIN_USERNAME=\"Your Azure VM Administrator Name\" # Administrator username ADMIN_PASSWORD=\"our Azure VM Administrator Password\" # Administrator password (change to a strong password) VM_SIZE=\"Your Azure VM Size\" # VM size (4GB memory) ```\n\n**Security Recommendations**:\n\n- Always change ADMIN\\_PASSWORD to your own strong password\n- Passwords should contain uppercase and lowercase letters, numbers, and special characters\n- Never commit scripts containing real passwords to code repositories\n\n### Step 2: Check and Create Resource Group\n\nThe script first checks if the specified resource group exists, and creates it automatically if it doesn't:\n\n``` echo \"Checking resource group $RESOURCE_GROUP...\" az group show --name $RESOURCE_GROUP &> /dev/null if [ $? -ne 0 ]; then echo \"Creating resource group $RESOURCE_GROUP...\" az group create --name $RESOURCE_GROUP --location $LOCATION fi ```\n\nA resource group is a logical container in Azure used to organize and manage related resources. All associated resources (VMs, networks, storage, etc.) will be created within this resource group.\n\n### Step 3: Create Windows 11 Virtual Machine\n\nThis is the core step, using the ***az vm create*** command to create a Windows 11 Pro virtual machine:\n\n``` az vm create \\ --resource-group $RESOURCE_GROUP \\ --name $VM_NAME \\ --image MicrosoftWindowsDesktop:windows-11:win11-24h2-pro:latest \\ --size $VM_SIZE \\ --admin-username $ADMIN_USERNAME \\ --admin-password $ADMIN_PASSWORD \\ --public-ip-sku Standard \\ --nsg-rule RDP ```\n\n**Parameter Explanations**:\n\n- --image: Uses the latest Windows 11 24H2 Professional edition image\n- --size: Standard\\_B2s provides 2 vCPUs and 4GB memory, suitable for running OpenClaw\n- --public-ip-sku Standard: Assigns a standard public IP\n- --nsg-rule RDP: Automatically creates network security group rules allowing RDP (port 3389) inbound traffic\n\n### Step 4: Retrieve Virtual Machine Public IP\n\nAfter VM creation completes, the script retrieves its public IP address:\n\n``` PUBLIC_IP=$(az vm show -d -g $RESOURCE_GROUP -n $VM_NAME --query publicIps -o tsv) echo \"VM Public IP: $PUBLIC_IP\" ```\n\nThis IP address will be used for subsequent RDP remote connections.\n\n### Step 5: Install Chocolatey Package Manager\n\nUsing ***az vm run-command*** to execute PowerShell scripts inside the VM, first installing Chocolatey:\n\n``` az vm run-command invoke -g $RESOURCE_GROUP -n $VM_NAME --command-id RunPowerShellScript \\ --scripts \"Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString( 'https://community.chocolatey.org/install.ps1'))\" ```\n\nChocolatey is a package manager for Windows, similar to apt or yum on Linux, simplifying subsequent software installations.\n\n### Step 6: Install Git\n\nGit is a dependency for many npm packages, especially those that need to download source code from GitHub for compilation:\n\n``` az vm run-command invoke -g $RESOURCE_GROUP -n $VM_NAME --command-id RunPowerShellScript \\ --scripts \"C:\\ProgramData\\chocolatey\\bin\\choco.exe install git -y\" ```\n\n### Step 7: Install CMake and Visual Studio Build Tools\n\nSome of OpenClaw's native modules require compilation, necessitating the installation of C++ build toolchain:\n\n``` az vm run-command invoke -g $RESOURCE_GROUP -n $VM_NAME --command-id RunPowerShellScript \\ --scripts \"C:\\ProgramData\\chocolatey\\bin\\choco.exe install cmake visualstudio2022buildtools visualstudio2022-workload-vctools -y\" ```\n\n**Component Descriptions**:\n\n- cmake: Cross-platform build system\n- visualstudio2022buildtools: VS 2022 Build Tools\n- visualstudio2022-workload-vctools: C++ development toolchain\n\n### Step 8: Install Node.js LTS\n\nInstall the Node.js Long Term Support version, which is the core runtime environment for OpenClaw:\n\n``` az vm run-command invoke -g $RESOURCE_GROUP -n $VM_NAME --command-id RunPowerShellScript \\ --scripts \"$env:Path = [System.Environment]::GetEnvironmentVariable('Path','Machine') + ';' + [System.Environment]::GetEnvironmentVariable('Path','User'); C:\\ProgramData\\chocolatey\\bin\\choco.exe install nodejs-lts -y\" ```\n\nThe script refreshes environment variables first to ensure Chocolatey is in the PATH, then installs Node.js LTS.\n\n### Step 9: Globally Install OpenClaw\n\nUse npm to globally install OpenClaw:\n\n``` az vm run-command invoke -g $RESOURCE_GROUP -n $VM_NAME --command-id RunPowerShellScript \\ --scripts \"$env:Path = [System.Environment]::GetEnvironmentVariable('Path','Machine') + ';' + [System.Environment]::GetEnvironmentVariable('Path','User'); npm install -g openclaw\" ```\n\nGlobal installation makes the openclaw command available from anywhere in the system.\n\n### Step 10: Configure Environment Variables\n\nAdd Node.js and npm global paths to the system PATH environment variable:\n\n``` az vm run-command invoke -g $RESOURCE_GROUP -n $VM_NAME --command-id RunPowerShellScript \\ --scripts \" $npmGlobalPath = 'C:\\Program Files\\nodejs'; $npmUserPath = [System.Environment]::GetFolderPath('ApplicationData') + '\\npm'; $currentPath = [System.Environment]::GetEnvironmentVariable('Path', 'Machine');\n\nif ($currentPath -notlike \\\"*$npmGlobalPath*\\\") { $newPath = $currentPath + ';' + $npmGlobalPath; [System.Environment]::SetEnvironmentVariable('Path', $newPath, 'Machine'); Write-Host 'Added Node.js path to system PATH'; }\n\nif ($currentPath -notlike \\\"*$npmUserPath*\\\") { $newPath = [System.Environment]::GetEnvironmentVariable('Path', 'Machine') + ';' + $npmUserPath; [System.Environment]::SetEnvironmentVariable('Path', $newPath, 'Machine'); Write-Host 'Added npm global path to system PATH'; }\n\nWrite-Host 'Environment variables updated successfully!'; \" ```\n\nThis ensures that node, npm, and openclaw commands can be used directly even in new terminal sessions.\n\n### Step 11: Verify Installation\n\nThe script finally verifies that all software is correctly installed:\n\n``` az vm run-command invoke -g $RESOURCE_GROUP -n $VM_NAME --command-id RunPowerShellScript \\ --scripts \"$env:Path = [System.Environment]::GetEnvironmentVariable('Path','Machine') + ';' + [System.Environment]::GetEnvironmentVariable('Path','User'); Write-Host 'Node.js version:'; node --version; Write-Host 'npm version:'; npm --version; Write-Host 'openclaw:'; npm list -g openclaw\" ```\n\nSuccessful output should look similar to:\n\n``` Node.js version: v20.x.x npm version: 10.x.x openclaw: openclaw@x.x.x ```\n\n### Step 12: Connect to Virtual Machine\n\nAfter deployment completes, the script outputs connection information:\n\n``` ============================================ Deployment completed! ============================================ Resource Group: Your Azure Resource Group Name VM Name: win11-openclaw-vm Public IP: xx.xx.xx.xx Admin Username: Your Administrator UserName VM Size: Your VM Size\n\nConnect via RDP: mstsc /v:xx.xx.xx.xx ============================================ ```\n\n**Connection Methods**:\n\n**Windows Users**:\n\n1. Press ***Win + R*** to open Run dialog\n2. Enter ***mstsc /v:public\\_ip*** and press Enter\n3. Log in using the username and password set in the script\n\n**macOS Users**:\n\n1. Download ***\"Windows App\"*** from the App Store\n2. Add PC connection with the public IP\n3. Log in using the username and password set in the script\n\n**Linux Users**:\n\n```\n# Use Remmina or xfreerdp\nxfreerdp /u:username /v:public_ip ```\n\n### Step 13: Initialize OpenClaw\n\nAfter connecting to the VM, run the following in PowerShell or Command Prompt\n\n```\n# Initialize OpenClaw\nopenclaw onboard\n\n# Configure AI model API key\n# Edit configuration file: C:\\Users\\username\\.openclaw\\openclaw.json\nnotepad $env:USERPROFILE\\.openclaw\\openclaw.json ```\n\nAdd your AI API key in the configuration file:\n\n``` { \"agents\": { \"defaults\": { \"model\": \"Your Model Name\", \"apiKey\": \"your-api-key-here\" } } } ```\n\nStep 14: Start OpenClaw\n\n```\n# Start Gateway service\nopenclaw gateway\n\n# In another terminal, connect messaging channels (e.g., WhatsApp)\nopenclaw channels login ```\n\nFollow the prompts to scan the QR code and connect OpenClaw to your messaging app.\n\n## 4. Summary\n\nThrough this guide, we've successfully implemented the complete process of automatically deploying OpenClaw on an Azure Windows 11 virtual machine. The entire deployment process is highly automated, completing everything from VM creation to installing all dependencies and OpenClaw itself through a single script.\n\n### Key Takeaways\n\n1. **Automation Benefits**: Using az vm run-command allows executing configuration scripts immediately after VM creation without manual RDP login\n2. **Dependency Management**: Chocolatey simplifies the Windows package installation workflow\n3. **Environment Isolation**: Running AI agents on cloud VMs protects local computers and data\n4. **Scalability**: Scripted deployment facilitates replication and team collaboration, easily deploying multiple instances\n\n### Cost Optimization Tips\n\n- **Standard\\_B2s** VMs cost approximately $0.05/hour (~$37/month) on pay-as-you-go pricing\n- When not in use, stop the VM to only pay for storage costs\n- Consider Azure Reserved Instances to save up to 72%\n\n### Security Hardening Recommendations\n\n1. **Change Default Port**: Modify RDP port from 3389 to a custom port\n2. **Enable JIT Access**: Use Azure Security Center's just-in-time access feature\n3. **Configure Firewall Rules**: Only allow specific IP addresses to access\n4. **Regular System Updates**: Enable automatic Windows Updates\n5. **Use Azure Key Vault**: Store API keys in Key Vault instead of configuration files\n\n## 5. Additional Resources\n\n### Official Documentation\n\n- **OpenClaw Website**: [https://openclaw.ai](https://openclaw.ai)\n- **OpenClaw GitHub**: [https://github.com/openclaw/openclaw](https://github.com/openclaw/openclaw)\n- **OpenClaw Documentation**: [https://docs.openclaw.ai](https://docs.openclaw.ai)\n- **Azure CLI Documentation**: [https://docs.microsoft.com/cli/azure/](https://docs.microsoft.com/cli/azure/)\n\n### Azure Resources\n\n- **Azure VM Pricing Calculator**: [https://azure.microsoft.com/pricing/calculator/](https://azure.microsoft.com/pricing/calculator/)\n- **Azure Free Account**: [https://azure.microsoft.com/free/](https://azure.microsoft.com/free/) (new users receive $200 credit)\n- **Azure Security Center**: [https://azure.microsoft.com/services/security-center/](https://azure.microsoft.com/services/security-center/)\n- **Azure Key Vault**: [https://azure.microsoft.com/services/key-vault/](https://azure.microsoft.com/services/key-vault/)\n\nUpdated Feb 03, 2026\n\nVersion 1.0\n\n[ai](/tag/ai?nodeId=board%3AAzureDevCommunityBlog)\n\n[azure](/tag/azure?nodeId=board%3AAzureDevCommunityBlog)\n\n[tips and tricks](/tag/tips%20and%20tricks?nodeId=board%3AAzureDevCommunityBlog)\n\n[!\\[kinfey&#x27;s avatar\\](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/dS0xMTU4ODcwLTU0ODQxMWlERTQ5OEYxMkNFQTBBQzcw?image-dimensions=50x50)](/users/kinfey/1158870) [kinfey](/users/kinfey/1158870) ![Icon for Microsoft rank](https://techcommunity.microsoft.com/t5/s/gxcuf89792/images/cmstNC05WEo0blc?image-dimensions=100x16&amp;constrain-image=true)Microsoft\n\nJoined September 17, 2021\n\n[View Profile](/users/kinfey/1158870)\n\n/category/azure/blog/azuredevcommunityblog [Microsoft Developer Community Blog](/category/azure/blog/azuredevcommunityblog) Follow this blog board to get notified when there's new activity"
}
